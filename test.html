<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>INFP 48阶人格进化定位测评系统</title>
    <link rel="stylesheet" href="styles.css">
    <!-- 引入Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- 引入html2pdf.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <!-- 引入Supabase JS库 -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="test-page">
    <div class="container">
        <!-- 头部 -->
        <div class="header">
            <h1>INFP 48阶人格进化定位测评系统</h1>
        </div>

        <!-- 兑换码区域 -->
        <div id="code-section" class="code-section">
            <h2>请输入兑换码开始测评</h2>
            <div class="input-group" style="max-width: 400px; margin: 0 auto;">
                <input type="text" id="code-input" placeholder="输入4位兑换码" maxlength="4" style="text-transform: uppercase; text-align: center; letter-spacing: 2px; font-size: 18px;">
            </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-primary" id="start-test-btn">开始测评</button>
            </div>
            <div id="code-error" style="color: red; margin-top: 10px;"></div>
        </div>

        <!-- 知情同意书页面 -->
        <div id="consent-section" class="consent-section" style="display: none;">
            <div class="consent-container">
                <h2>知情同意书</h2>
                
                <div class="consent-section-content">
                    <h3>测试说明</h3>
                    <p>本测试基于MBTI16型理论及INFP不同阶段特性进行开发，仅供娱乐观赏使用，不构成专业心理诊断或治疗建议。测试结果旨在帮助您更好地了解自己，不应作为临床决策或专业指导的依据。</p>
                    
                    <div class="checkbox-item">
                        <input type="checkbox" id="understanding">
                        <label for="understanding">我理解本测试仅供娱乐观赏，不替代专业心理评估</label>
                    </div>
                </div>
                
                <div class="consent-section-content">
                    <h3>隐私保护</h3>
                    <p>我们非常重视您的隐私保护。测试过程中收集的数据仅用于生成测试结果，不会用于其他目的，也不会泄露给任何第三方。</p>
                    
                    <div class="checkbox-item">
                        <input type="checkbox" id="privacy">
                        <label for="privacy">我了解并同意隐私保护条款</label>
                    </div>
                </div>
                
                <div class="consent-section-content">
                    <h3>结果解释与使用</h3>
                    <p>测试结果基于您的自评数据生成，受多种因素影响，可能存在一定偏差。请以客观、理性的态度对待测试结果，不要过度解读或依赖。</p>
                    
                    <div class="checkbox-item">
                        <input type="checkbox" id="interpretation">
                        <label for="interpretation">我理解测试结果可能存在偏差，会理性对待</label>
                    </div>
                </div>
                
                <div class="consent-section-content warning">
                    <h3>⚠️ 重要提醒</h3>
                    <p>如果您目前正在经历严重的心理困扰、情绪问题或危机状态（如严重焦虑、抑郁倾向、自杀意念等），请立即寻求专业心理医生或心理咨询师的帮助。本测试不适用于处于危机状态的人群。</p>
                    
                    <div class="checkbox-item">
                        <input type="checkbox" id="warning">
                        <label for="warning">我了解本测试的适用范围，如有需要会寻求专业帮助</label>
                    </div>
                </div>
                
                <div class="consent-buttons">
                    <button id="disagree-btn" class="btn btn-disagree">我不同意</button>
                    <button id="agree-btn" class="btn btn-primary" disabled>我同意并开始测评</button>
                </div>
                
                <div class="consent-footer">
                    <p>本工具基于MBTI16型理论及INFP不同阶段特性进行开发，采用标准化的评分系统和常模数据。测试结果仅供参考，不构成专业诊断或治疗建议。</p>
                </div>
            </div>
        </div>

        <!-- 测评区域 -->
        <div id="test-section" class="test-section" style="display: none;">
            <!-- 基本信息页面 -->
            <div id="basic-info-page" style="display: block;">
                <h2>基本信息</h2>
                <form id="basic-info-form" class="basic-info-form">
                    <!-- 年龄段 -->
                    <div class="input-group">
                        <label>年龄段：</label>
                        <div class="select-options" id="age-options">
                            <div class="option-item" data-value="18以下">18岁以下</div>
                            <div class="option-item" data-value="18-24">18-24岁</div>
                            <div class="option-item" data-value="25-30">25-30岁</div>
                            <div class="option-item" data-value="31-35">31-35岁</div>
                            <div class="option-item" data-value="36-40">36-40岁</div>
                            <div class="option-item" data-value="40以上">40岁以上</div>
                        </div>
                        <input type="hidden" id="age-group" name="age-group">
                    </div>
                    
                    <!-- 性别 -->
                    <div class="input-group">
                        <label>性别：</label>
                        <div class="select-options" id="gender-options">
                            <div class="option-item" data-value="男">男</div>
                            <div class="option-item" data-value="女">女</div>
                            <div class="option-item" data-value="其他">其他</div>
                            <div class="option-item" data-value="不愿透露">不愿透露</div>
                        </div>
                        <input type="hidden" id="gender" name="gender">
                    </div>
                    
                    <!-- 星座 -->
                    <div class="input-group">
                        <label>星座：</label>
                        <div class="select-options" id="constellation-options">
                            <div class="option-item" data-value="白羊座">白羊座</div>
                            <div class="option-item" data-value="金牛座">金牛座</div>
                            <div class="option-item" data-value="双子座">双子座</div>
                            <div class="option-item" data-value="巨蟹座">巨蟹座</div>
                            <div class="option-item" data-value="狮子座">狮子座</div>
                            <div class="option-item" data-value="处女座">处女座</div>
                            <div class="option-item" data-value="天秤座">天秤座</div>
                            <div class="option-item" data-value="天蝎座">天蝎座</div>
                            <div class="option-item" data-value="射手座">射手座</div>
                            <div class="option-item" data-value="摩羯座">摩羯座</div>
                            <div class="option-item" data-value="水瓶座">水瓶座</div>
                            <div class="option-item" data-value="双鱼座">双鱼座</div>
                        </div>
                        <input type="hidden" id="constellation" name="constellation">
                    </div>
                    
                    <!-- 血型 -->
                    <div class="input-group">
                        <label>血型：</label>
                        <div class="select-options" id="blood-type-options">
                            <div class="option-item" data-value="A">A型</div>
                            <div class="option-item" data-value="B">B型</div>
                            <div class="option-item" data-value="O">O型</div>
                            <div class="option-item" data-value="AB">AB型</div>
                        </div>
                        <input type="hidden" id="blood-type" name="blood-type">
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px;">
                        <button type="button" class="btn btn-primary" id="start-testing-btn">开始测评</button>
                    </div>
                </form>
            </div>

            <!-- 四维度测评页面 -->
            <div id="testing-page" style="display: none;">
                <!-- 进度指示器 -->
                <div class="progress-indicator">步骤 1/4</div>
                <h2>测评题目</h2>
                <!-- 步骤1：亲密关系与边界建立 -->
                <div id="step1" class="step-page" style="display: block;">
                    <form class="testing-form">
                    <!-- 维度1：亲密关系与边界建立 -->
                    <div class="input-group">
                        <h3>一、亲密关系与边界建立</h3>
                        <div id="dimension1-questions-list" class="questions-list">
                            <!-- 1-10题 -->
                            <div class="question-item">
                                <div class="question-text">1. 在与人交往中，我更容易：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-1" value="0" data-dim="1" data-qindex="0"> 完全妥协，避免冲突</li>
                                    <li><input type="radio" name="dimension1-1" value="1" data-dim="1" data-qindex="1"> 偶尔妥协，但有底线</li>
                                    <li><input type="radio" name="dimension1-1" value="2" data-dim="1" data-qindex="2"> 坚持自己的立场，但尊重他人</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">2. 当朋友向我倾诉烦恼时，我通常会：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-2" value="0" data-dim="1" data-qindex="0"> 全力支持，甚至牺牲自己的时间</li>
                                    <li><input type="radio" name="dimension1-2" value="1" data-dim="1" data-qindex="1"> 认真倾听，但保持适当距离</li>
                                    <li><input type="radio" name="dimension1-2" value="2" data-dim="1" data-qindex="2"> 给出建议，但不过度卷入</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">3. 我对“亲密关系”的理解是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-3" value="0" data-dim="1" data-qindex="0"> 完全融合，没有个人空间</li>
                                    <li><input type="radio" name="dimension1-3" value="1" data-dim="1" data-qindex="1"> 相互依赖，但保持独立</li>
                                    <li><input type="radio" name="dimension1-3" value="2" data-dim="1" data-qindex="2"> 彼此尊重，有明确边界</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">4. 当别人侵犯我的边界时，我会：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-4" value="0" data-dim="1" data-qindex="0"> 默默忍受，不表达不满</li>
                                    <li><input type="radio" name="dimension1-4" value="1" data-dim="1" data-qindex="1"> 感到不舒服，但犹豫是否表达</li>
                                    <li><input type="radio" name="dimension1-4" value="2" data-dim="1" data-qindex="2"> 明确表达自己的感受和边界</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">5. 在选择朋友时，我更看重：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-5" value="0" data-dim="1" data-qindex="0"> 对方是否需要我</li>
                                    <li><input type="radio" name="dimension1-5" value="1" data-dim="1" data-qindex="1"> 彼此是否投缘</li>
                                    <li><input type="radio" name="dimension1-5" value="2" data-dim="1" data-qindex="2"> 对方是否尊重我的边界</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">6. 我对“独处”的看法是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-6" value="0" data-dim="1" data-qindex="0"> 害怕独处，总是寻找陪伴</li>
                                    <li><input type="radio" name="dimension1-6" value="1" data-dim="1" data-qindex="1"> 偶尔需要独处，但更享受陪伴</li>
                                    <li><input type="radio" name="dimension1-6" value="2" data-dim="1" data-qindex="2"> 享受独处，这是自我成长的重要时光</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">7. 当我需要拒绝别人时，我会：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-7" value="0" data-dim="1" data-qindex="0"> 很难开口，总是找借口</li>
                                    <li><input type="radio" name="dimension1-7" value="1" data-dim="1" data-qindex="1"> 犹豫，但最终会拒绝</li>
                                    <li><input type="radio" name="dimension1-7" value="2" data-dim="1" data-qindex="2"> 直接但礼貌地拒绝</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">8. 我认为“爱自己”意味着：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-8" value="0" data-dim="1" data-qindex="0"> 满足他人的需求，让别人开心</li>
                                    <li><input type="radio" name="dimension1-8" value="1" data-dim="1" data-qindex="1"> 偶尔照顾自己的感受</li>
                                    <li><input type="radio" name="dimension1-8" value="2" data-dim="1" data-qindex="2"> 优先照顾自己的身心健康</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">9. 在亲密关系中，我更倾向于：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-9" value="0" data-dim="1" data-qindex="0"> 完全依赖对方</li>
                                    <li><input type="radio" name="dimension1-9" value="1" data-dim="1" data-qindex="1"> 相互依赖，但保持独立</li>
                                    <li><input type="radio" name="dimension1-9" value="2" data-dim="1" data-qindex="2"> 保持独立，避免过度依赖</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">10. 我对“边界”的理解是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension1-10" value="0" data-dim="1" data-qindex="0"> 不需要边界，亲密无间更好</li>
                                    <li><input type="radio" name="dimension1-10" value="1" data-dim="1" data-qindex="1"> 有边界，但可以灵活调整</li>
                                    <li><input type="radio" name="dimension1-10" value="2" data-dim="1" data-qindex="2"> 明确的边界是关系健康的基础</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    </form>
                    <div class="step-actions">
                        <button type="button" class="btn btn-primary" id="next-btn">下一页</button>
                    </div>
                </div>
                
                <!-- 步骤2：心力管理 -->
                <div id="step2" class="step-page" style="display: none;">
                    <form class="testing-form">
                    <!-- 维度2：心力管理 -->
                    <div class="input-group">
                        <h3>二、心力管理</h3>
                        <div id="dimension2-questions-list" class="questions-list">
                            <!-- 11-20题 -->
                            <div class="question-item">
                                <div class="question-text">11. 当我感到压力大时，我会：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-1" value="0" data-dim="2" data-qindex="0"> 完全崩溃，无法应对</li>
                                    <li><input type="radio" name="dimension2-1" value="1" data-dim="2" data-qindex="1"> 感到焦虑，但能勉强应对</li>
                                    <li><input type="radio" name="dimension2-1" value="2" data-dim="2" data-qindex="2"> 采取积极的方式缓解压力</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">12. 我对自己的情绪掌控程度：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-2" value="0" data-dim="2" data-qindex="0"> 完全无法控制，情绪经常失控</li>
                                    <li><input type="radio" name="dimension2-2" value="1" data-dim="2" data-qindex="1"> 有时能控制，有时会失控</li>
                                    <li><input type="radio" name="dimension2-2" value="2" data-dim="2" data-qindex="2"> 能够很好地控制自己的情绪</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">13. 当我遇到挫折时，我更倾向于：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-3" value="0" data-dim="2" data-qindex="0"> 自我否定，陷入消极情绪</li>
                                    <li><input type="radio" name="dimension2-3" value="1" data-dim="2" data-qindex="1"> 感到沮丧，但会慢慢恢复</li>
                                    <li><input type="radio" name="dimension2-3" value="2" data-dim="2" data-qindex="2"> 从中学习，寻找解决方案</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">14. 我对“成功”的定义是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-4" value="0" data-dim="2" data-qindex="0"> 得到他人的认可和赞美</li>
                                    <li><input type="radio" name="dimension2-4" value="1" data-dim="2" data-qindex="1"> 实现自己的目标</li>
                                    <li><input type="radio" name="dimension2-4" value="2" data-dim="2" data-qindex="2"> 内心的平静和满足</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">15. 我每天的能量状态通常是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-5" value="0" data-dim="2" data-qindex="0"> 疲惫不堪，缺乏动力</li>
                                    <li><input type="radio" name="dimension2-5" value="1" data-dim="2" data-qindex="1"> 时高时低，不稳定</li>
                                    <li><input type="radio" name="dimension2-5" value="2" data-dim="2" data-qindex="2"> 充满活力，积极向上</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">16. 我处理负面情绪的方式是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-6" value="0" data-dim="2" data-qindex="0"> 压抑情绪，不表达</li>
                                    <li><input type="radio" name="dimension2-6" value="1" data-dim="2" data-qindex="1"> 偶尔表达，但担心影响他人</li>
                                    <li><input type="radio" name="dimension2-6" value="2" data-dim="2" data-qindex="2"> 健康地表达和释放情绪</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">17. 我对“完美”的追求程度：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-7" value="0" data-dim="2" data-qindex="0"> 必须完美，否则无法接受</li>
                                    <li><input type="radio" name="dimension2-7" value="1" data-dim="2" data-qindex="1"> 追求完美，但能接受不完美</li>
                                    <li><input type="radio" name="dimension2-7" value="2" data-dim="2" data-qindex="2"> 注重过程，不追求绝对完美</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">18. 我对未来的态度是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-8" value="0" data-dim="2" data-qindex="0"> 充满焦虑和恐惧</li>
                                    <li><input type="radio" name="dimension2-8" value="1" data-dim="2" data-qindex="1"> 有期待，但也有担忧</li>
                                    <li><input type="radio" name="dimension2-8" value="2" data-dim="2" data-qindex="2"> 积极乐观，充满希望</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">19. 我与他人比较的频率：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-9" value="0" data-dim="2" data-qindex="0"> 经常比较，感到自卑</li>
                                    <li><input type="radio" name="dimension2-9" value="1" data-dim="2" data-qindex="1"> 偶尔比较，但不会过度在意</li>
                                    <li><input type="radio" name="dimension2-9" value="2" data-dim="2" data-qindex="2"> 几乎不比较，专注自己的成长</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">20. 我对“幸福”的理解是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension2-10" value="0" data-dim="2" data-qindex="0"> 拥有更多的物质财富</li>
                                    <li><input type="radio" name="dimension2-10" value="1" data-dim="2" data-qindex="1"> 实现自己的目标和梦想</li>
                                    <li><input type="radio" name="dimension2-10" value="2" data-dim="2" data-qindex="2"> 内心的平静和满足感</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    </form>
                    <div class="step-actions">
                        <button type="button" class="btn btn-primary" id="next-btn">下一页</button>
                    </div>
                </div>
                
                <!-- 步骤3：自我认知与内在成长 -->
                <div id="step3" class="step-page" style="display: none;">
                    <form class="testing-form">
                    <!-- 维度3：自我认知与内在成长 -->
                    <div class="input-group">
                        <h3>三、自我认知与内在成长</h3>
                        <div id="dimension3-questions-list" class="questions-list">
                            <!-- 21-30题 -->
                            <div class="question-item">
                                <div class="question-text">21. 我对自己的了解程度：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-1" value="0" data-dim="3" data-qindex="0"> 完全不了解自己</li>
                                    <li><input type="radio" name="dimension3-1" value="1" data-dim="3" data-qindex="1"> 了解一些，但不够深入</li>
                                    <li><input type="radio" name="dimension3-1" value="2" data-dim="3" data-qindex="2"> 非常了解自己的优点和缺点</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">22. 我对“自我成长”的态度是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-2" value="0" data-dim="3" data-qindex="0"> 没有兴趣，安于现状</li>
                                    <li><input type="radio" name="dimension3-2" value="1" data-dim="3" data-qindex="1"> 有兴趣，但缺乏行动</li>
                                    <li><input type="radio" name="dimension3-2" value="2" data-dim="3" data-qindex="2"> 非常重视，积极投入</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">23. 我更容易：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-3" value="0" data-dim="3" data-qindex="0"> 关注自己的缺点，忽视优点</li>
                                    <li><input type="radio" name="dimension3-3" value="1" data-dim="3" data-qindex="1"> 平衡看待自己的优缺点</li>
                                    <li><input type="radio" name="dimension3-3" value="2" data-dim="3" data-qindex="2"> 关注自己的优点，接受缺点</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">24. 我做决策的方式是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-4" value="0" data-dim="3" data-qindex="0"> 完全依赖他人的意见</li>
                                    <li><input type="radio" name="dimension3-4" value="1" data-dim="3" data-qindex="1"> 参考他人意见，自己做决定</li>
                                    <li><input type="radio" name="dimension3-4" value="2" data-dim="3" data-qindex="2"> 基于自己的判断和价值观</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">25. 我对“真实”的理解是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-5" value="0" data-dim="3" data-qindex="0"> 为了适应环境，不得不伪装自己</li>
                                    <li><input type="radio" name="dimension3-5" value="1" data-dim="3" data-qindex="1"> 在安全的环境中可以真实表达</li>
                                    <li><input type="radio" name="dimension3-5" value="2" data-dim="3" data-qindex="2"> 始终保持真实，不伪装</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">26. 我对“价值观”的理解是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-6" value="0" data-dim="3" data-qindex="0"> 没有明确的价值观，随波逐流</li>
                                    <li><input type="radio" name="dimension3-6" value="1" data-dim="3" data-qindex="1"> 有一些价值观，但不够清晰</li>
                                    <li><input type="radio" name="dimension3-6" value="2" data-dim="3" data-qindex="2"> 有明确的价值观，指导自己的行为</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">27. 我接受批评的方式是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-7" value="0" data-dim="3" data-qindex="0"> 无法接受，感到受伤</li>
                                    <li><input type="radio" name="dimension3-7" value="1" data-dim="3" data-qindex="1"> 可以接受，但会感到不舒服</li>
                                    <li><input type="radio" name="dimension3-7" value="2" data-dim="3" data-qindex="2"> 乐于接受，从中学习</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">28. 我对“自由”的理解是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-8" value="0" data-dim="3" data-qindex="0"> 完全不受约束，随心所欲</li>
                                    <li><input type="radio" name="dimension3-8" value="1" data-dim="3" data-qindex="1"> 在规则范围内的自由</li>
                                    <li><input type="radio" name="dimension3-8" value="2" data-dim="3" data-qindex="2"> 内心的自由和自主选择权</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">29. 我更容易：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-9" value="0" data-dim="3" data-qindex="0"> 活在过去，无法放下</li>
                                    <li><input type="radio" name="dimension3-9" value="1" data-dim="3" data-qindex="1"> 偶尔回忆过去，关注当下</li>
                                    <li><input type="radio" name="dimension3-9" value="2" data-dim="3" data-qindex="2"> 活在当下，面向未来</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">30. 我对“意义”的追求是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension3-10" value="0" data-dim="3" data-qindex="0"> 没有追求，得过且过</li>
                                    <li><input type="radio" name="dimension3-10" value="1" data-dim="3" data-qindex="1"> 偶尔思考，没有明确答案</li>
                                    <li><input type="radio" name="dimension3-10" value="2" data-dim="3" data-qindex="2"> 积极探索，寻找人生意义</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    </form>
                    <div class="step-actions">
                        <button type="button" class="btn btn-primary" id="next-btn">下一页</button>
                    </div>
                </div>
                
                <!-- 步骤4：职业与价值实现 -->
                <div id="step4" class="step-page" style="display: none;">
                    <form class="testing-form">
                    <!-- 维度4：职业与价值实现 -->
                    <div class="input-group">
                        <h3>四、职业与价值实现</h3>
                        <div id="dimension4-questions-list" class="questions-list">
                            <!-- 31-40题 -->
                            <div class="question-item">
                                <div class="question-text">31. 我选择职业的首要考虑是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-1" value="0" data-dim="4" data-qindex="0"> 稳定和收入</li>
                                    <li><input type="radio" name="dimension4-1" value="1" data-dim="4" data-qindex="1"> 兴趣和个人喜好</li>
                                    <li><input type="radio" name="dimension4-1" value="2" data-dim="4" data-qindex="2"> 个人价值和社会意义</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">32. 我对当前职业的满意度：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-2" value="0" data-dim="4" data-qindex="0"> 非常不满意，想要改变</li>
                                    <li><input type="radio" name="dimension4-2" value="1" data-dim="4" data-qindex="1"> 一般，有满意也有不满意</li>
                                    <li><input type="radio" name="dimension4-2" value="2" data-dim="4" data-qindex="2"> 非常满意，符合自己的期望</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">33. 我更容易：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-3" value="0" data-dim="4" data-qindex="0"> 被他人的期望左右，忽视自己的需求</li>
                                    <li><input type="radio" name="dimension4-3" value="1" data-dim="4" data-qindex="1"> 在他人期望和自己需求之间平衡</li>
                                    <li><input type="radio" name="dimension4-3" value="2" data-dim="4" data-qindex="2"> 坚持自己的需求，不受他人影响</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">34. 我对“成功”的职业定义是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-4" value="0" data-dim="4" data-qindex="0"> 职位高，收入高</li>
                                    <li><input type="radio" name="dimension4-4" value="1" data-dim="4" data-qindex="1"> 工作稳定，压力小</li>
                                    <li><input type="radio" name="dimension4-4" value="2" data-dim="4" data-qindex="2"> 能够发挥自己的才能，实现价值</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">35. 我在工作中更容易：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-5" value="0" data-dim="4" data-qindex="0"> 感到疲惫和厌倦</li>
                                    <li><input type="radio" name="dimension4-5" value="1" data-dim="4" data-qindex="1"> 有时有动力，有时缺乏动力</li>
                                    <li><input type="radio" name="dimension4-5" value="2" data-dim="4" data-qindex="2"> 充满动力和热情</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">36. 我对“价值实现”的理解是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-6" value="0" data-dim="4" data-qindex="0"> 得到他人的认可和赞美</li>
                                    <li><input type="radio" name="dimension4-6" value="1" data-dim="4" data-qindex="1"> 实现自己的个人目标</li>
                                    <li><input type="radio" name="dimension4-6" value="2" data-dim="4" data-qindex="2"> 为他人和社会做出贡献</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">37. 我在职业发展中更容易：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-7" value="0" data-dim="4" data-qindex="0"> 随波逐流，没有明确规划</li>
                                    <li><input type="radio" name="dimension4-7" value="1" data-dim="4" data-qindex="1"> 有一些规划，但不够清晰</li>
                                    <li><input type="radio" name="dimension4-7" value="2" data-dim="4" data-qindex="2"> 有明确的规划和目标</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">38. 我更容易：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-8" value="0" data-dim="4" data-qindex="0"> 为了工作牺牲个人生活</li>
                                    <li><input type="radio" name="dimension4-8" value="1" data-dim="4" data-qindex="1"> 在工作和生活之间寻找平衡</li>
                                    <li><input type="radio" name="dimension4-8" value="2" data-dim="4" data-qindex="2"> 优先考虑个人生活和身心健康</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">39. 我对“创新”的态度是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-9" value="0" data-dim="4" data-qindex="0"> 保守，不愿尝试新事物</li>
                                    <li><input type="radio" name="dimension4-9" value="1" data-dim="4" data-qindex="1"> 愿意尝试，但需要勇气</li>
                                    <li><input type="radio" name="dimension4-9" value="2" data-dim="4" data-qindex="2"> 积极创新，拥抱变化</li>
                                </ul>
                            </div>
                            <div class="question-item">
                                <div class="question-text">40. 我认为职业发展的核心是：</div>
                                <ul class="option-list">
                                    <li><input type="radio" name="dimension4-10" value="0" data-dim="4" data-qindex="0"> 地位和财富</li>
                                    <li><input type="radio" name="dimension4-10" value="1" data-dim="4" data-qindex="1"> 技能和经验的积累</li>
                                    <li><input type="radio" name="dimension4-10" value="2" data-dim="4" data-qindex="2"> 个人成长和价值实现</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    </form>
                    <div class="step-actions">
                        <button type="button" class="btn btn-primary" id="complete-test-btn" style="padding: 16px 48px; font-size: 18px;">完成测评</button>
                    </div>
                </div>
            </div>

            <!-- 结果展示页面 -->
            <div id="result-page" style="display: none;">
                <!-- 报告标题区 -->
                <div class="report-header">
                    <h1>INFP 48阶人格进化定位测评</h1>

                    <div class="report-date" id="report-date"></div>
                </div>

                <!-- 类型结果区 -->
                <div class="report-section type-section">
                    <div class="section-title">你的人格类型</div>
                    <div class="type-result" id="type-result">
                        <!-- 动态显示类型结果 -->
                    </div>
                    <div class="type-description">
                        基于你的测评得分、星座和血型，我们为你匹配了最符合的INFP类型
                    </div>
                </div>

                <!-- 雷达图区 -->
                <div class="report-section chart-section">
                    <div class="section-title">四维度得分雷达图</div>
                    <div class="chart-container">
                        <canvas id="radar-chart"></canvas>
                    </div>
                    <div class="chart-description">
                        雷达图展示了你在四个维度上的得分情况，范围为10-30分
                    </div>
                </div>

                <!-- 基本信息区 -->
                <div class="report-section info-section">
                    <div class="section-title">基本信息</div>
                    <div class="info-grid" id="basic-info-grid">
                        <!-- 动态生成基本信息 -->
                    </div>
                </div>

                <!-- 维度得分区 -->
                <div class="report-section scores-section">
                    <div class="section-title">维度得分</div>
                    <div class="scores-list" id="scores-list">
                        <!-- 动态生成维度得分 -->
                    </div>
                </div>

                <!-- 类型解读区 -->
                <div class="report-section interpretation-section">
                    <div class="section-title">类型解读</div>
                    <div id="type-interpretation">
                        <!-- 动态生成类型解读 -->
                    </div>
                </div>

                <!-- 各维度详细分析区 -->
                <div class="report-section analysis-section">
                    <div class="section-title">各维度详细分析</div>
                    <div id="dimension-analysis">
                        <!-- 动态生成各维度详细分析 -->
                    </div>
                </div>

                <!-- 成长建议区 -->
                <div class="report-section advice-section">
                    <div class="section-title">成长建议</div>
                    <div id="growth-advice">
                        <!-- 动态生成成长建议 -->
                    </div>
                </div>

                <!-- 报告尾部 -->
                <div class="report-footer">
                    <div class="footer-text">© 2025 INFP 48阶人格进化定位测评系统</div>
                    <div class="footer-note">本报告仅供参考，不构成专业心理诊断</div>
                </div>

                <!-- 导出按钮 -->
                <div class="export-buttons">
                    <button class="btn btn-primary" id="export-pdf-btn">导出PDF报告</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 引入环境变量配置（如果存在，用于本地开发） -->
    <script src="env.js" onerror="console.log('env.js 文件不存在，跳过加载')"></script>
    <!-- 引入外部文件 -->
    <script src="questions.js"></script>
    <script src="utils.js"></script>

    <script>
        // Supabase客户端初始化
        // 支持环境变量配置（Vercel部署时自动注入）
        // 本地开发时，可以从 window.env 或直接配置
        const supabaseUrl = window.env?.VITE_SUPABASE_URL || window.SUPABASE_URL || '';
        const supabaseKey = window.env?.VITE_SUPABASE_ANON_KEY || window.SUPABASE_ANON_KEY || '';
        let supabaseClient = null;
        
        // 只有当URL和Key都存在，并且supabase库已加载时，才创建Supabase客户端
        if (typeof supabase !== 'undefined' && supabaseUrl && supabaseKey) {
            try {
                supabaseClient = supabase.createClient(supabaseUrl, supabaseKey);
            } catch (error) {
                console.error('创建 Supabase 客户端失败:', error);
            }
        }

        // 测评状态管理
        const testState = {
            currentCode: '',
            currentStep: 1, // 1-4: 步骤
            currentDimension: 1,
            answers: {
                dimension1: Array(10).fill(null),
                dimension2: Array(10).fill(null),
                dimension3: Array(10).fill(null),
                dimension4: Array(10).fill(null)
            },
            basicInfo: {
                ageGroup: '',
                gender: '',
                constellation: '',
                bloodType: ''
            }
        };

        // DOM元素
        const codeSection = document.getElementById('code-section');
        const testSection = document.getElementById('test-section');
        const codeInput = document.getElementById('code-input');
        const startTestBtn = document.getElementById('start-test-btn');
        const codeError = document.getElementById('code-error');
        const basicInfoPage = document.getElementById('basic-info-page');
        const testingPage = document.getElementById('testing-page');
        const resultPage = document.getElementById('result-page');
        const startTestingBtn = document.getElementById('start-testing-btn');
        const questionContainer = document.getElementById('question-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressFill = document.querySelector('.progress-fill');
        const progressText = document.getElementById('progress-text');
        const dimensionNav = document.querySelector('.dimension-nav');
        const typeResult = document.getElementById('type-result');
        const radarChartCanvas = document.getElementById('radar-chart');
        const resultInterpretation = document.getElementById('result-interpretation');
        const exportPdfBtn = document.getElementById('export-pdf-btn');
        
        // 知情同意书元素
        const consentSection = document.getElementById('consent-section');
        const understandingCheckbox = document.getElementById('understanding');
        const privacyCheckbox = document.getElementById('privacy');
        const interpretationCheckbox = document.getElementById('interpretation');
        const warningCheckbox = document.getElementById('warning');
        const agreeBtn = document.getElementById('agree-btn');
        const disagreeBtn = document.getElementById('disagree-btn');

        // 检查并恢复设备状态（方案A：自动跳过兑换码输入）
        function checkAndRestoreDeviceState() {
            try {
                // 获取设备ID
                const deviceId = utils.getDeviceId();
                const data = utils.getData();
                
                // 检查该设备是否已使用过兑换码
                if (data.deviceUsedCodes && data.deviceUsedCodes[deviceId] && data.deviceUsedCodes[deviceId].length > 0) {
                    // 获取该设备使用过的第一个兑换码
                    const usedCode = data.deviceUsedCodes[deviceId][0];
                    
                    // 验证兑换码格式
                    const formatRegex = /^[A-Z0-9]{4}$/;
                    if (formatRegex.test(usedCode)) {
                        // 设置兑换码到状态中
                        testState.currentCode = usedCode;
                        
                        // 隐藏兑换码输入页面，直接显示基本信息页面（跳过知情同意书）
                        codeSection.style.display = 'none';
                        consentSection.style.display = 'none';
                        testSection.style.display = 'block';
                        basicInfoPage.style.display = 'block';
                        testingPage.style.display = 'none';
                        
                        console.log('已自动恢复设备状态，兑换码:', usedCode);
                        return true;
                    }
                }
            } catch (error) {
                console.error('检查设备状态失败:', error);
            }
            return false;
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 首先检查并恢复设备状态（如果设备已使用过兑换码）
            const restored = checkAndRestoreDeviceState();
            
            // 如果已恢复状态，不需要监听兑换码输入事件
            if (!restored) {
                // 监听兑换码输入事件
                startTestBtn.addEventListener('click', handleStartTest);
                codeInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        handleStartTest();
                    }
                });
            }
            
            // 监听基本信息选项点击
            setupBasicInfoListeners();
            
            // 监听基本信息提交
            startTestingBtn.addEventListener('click', handleStartTesting);
            
            // 监听下一步按钮
            const nextBtns = document.querySelectorAll('#next-btn');
            nextBtns.forEach(btn => {
                btn.addEventListener('click', handleNextStep);
            });

            // 监听导出按钮
            exportPdfBtn.addEventListener('click', exportPDF);
            
            // 知情同意书事件监听
            setupConsentListeners();
        });
        
        // 设置知情同意书监听器
        function setupConsentListeners() {
            // 监听复选框变化
            understandingCheckbox.addEventListener('change', validateConsent);
            privacyCheckbox.addEventListener('change', validateConsent);
            interpretationCheckbox.addEventListener('change', validateConsent);
            warningCheckbox.addEventListener('change', validateConsent);
            
            // 监听同意按钮
            agreeBtn.addEventListener('click', handleConsentAgree);
            
            // 监听不同意按钮
            disagreeBtn.addEventListener('click', handleConsentDisagree);
        }
        
        // 验证知情同意书
        function validateConsent() {
            // 检查所有复选框是否都已选中
            const allChecked = understandingCheckbox.checked && 
                              privacyCheckbox.checked && 
                              interpretationCheckbox.checked && 
                              warningCheckbox.checked;
            
            // 启用或禁用同意按钮
            agreeBtn.disabled = !allChecked;
        }
        
        // 处理同意按钮点击
        function handleConsentAgree() {
            // 隐藏知情同意书，显示测试部分
            consentSection.style.display = 'none';
            testSection.style.display = 'block';
        }
        
        // 处理不同意按钮点击
        function handleConsentDisagree() {
            // 显示提示信息，然后返回兑换码页面
            alert('感谢您的理解。如果您改变主意，可以重新输入兑换码开始测评。');
            consentSection.style.display = 'none';
            codeSection.style.display = 'block';
        }
        
        // 处理上一维度按钮点击
        function handlePrevQuestion() {
            const currentDim = testState.currentDimension;
            if (currentDim > 1) {
                // 跳转到上一个维度
                loadDimensionQuestions(currentDim - 1);
            }
        }
        
        // 处理下一维度按钮点击
        function handleNextQuestion() {
            const currentDim = testState.currentDimension;
            const dimAnswers = testState.answers[`dimension${currentDim}`];
            const allAnswered = dimAnswers.every(answer => answer !== null);
            
            if (!allAnswered) {
                alert('请完成当前维度的所有题目');
                return;
            }
            
            if (currentDim < 4) {
                // 跳转到下一个维度
                loadDimensionQuestions(currentDim + 1);
            }
        }
        
        // 设置基本信息选项监听器
        function setupBasicInfoListeners() {
            // 年龄段选项
            document.querySelectorAll('#age-options .option-item').forEach(option => {
                option.addEventListener('click', function() {
                    // 移除其他选项的选中状态
                    this.parentElement.querySelectorAll('.option-item').forEach(opt => opt.classList.remove('active'));
                    // 添加当前选项的选中状态
                    this.classList.add('active');
                    // 更新隐藏输入框的值
                    document.getElementById('age-group').value = this.dataset.value;
                });
            });
            
            // 性别选项
            document.querySelectorAll('#gender-options .option-item').forEach(option => {
                option.addEventListener('click', function() {
                    this.parentElement.querySelectorAll('.option-item').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById('gender').value = this.dataset.value;
                });
            });
            
            // 星座选项
            document.querySelectorAll('#constellation-options .option-item').forEach(option => {
                option.addEventListener('click', function() {
                    this.parentElement.querySelectorAll('.option-item').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById('constellation').value = this.dataset.value;
                });
            });
            
            // 血型选项
            document.querySelectorAll('#blood-type-options .option-item').forEach(option => {
                option.addEventListener('click', function() {
                    this.parentElement.querySelectorAll('.option-item').forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    document.getElementById('blood-type').value = this.dataset.value;
                });
            });
        }

        // 处理开始测评（基于设备ID的验证）
        async function handleStartTest() {
            const code = codeInput.value.trim().toUpperCase();
            codeError.textContent = '';
            
            if (!code) {
                codeError.textContent = '请输入兑换码';
                return;
            }
            
            try {
                startTestBtn.disabled = true;
                startTestBtn.textContent = '验证中...';
                
                // 获取设备ID
                const deviceId = utils.getDeviceId();
                
                // 优先使用 Supabase 验证（如果已配置）
                if (supabaseClient) {
                    try {
                        // 1. 查询兑换码是否存在
                        const { data, error } = await supabaseClient
                            .from('codes')
                            .select('*')
                            .eq('code', code)
                            .maybeSingle();
                        
                        if (error) {
                            throw error;
                        }
                        
                        if (!data) {
                            // 兑换码不存在
                            codeError.textContent = '兑换码无效';
                            startTestBtn.disabled = false;
                            startTestBtn.textContent = '开始测评';
                            return;
                        }
                        
                        // 2. 检查兑换码是否已被使用
                        if (data.is_used) {
                            // 兑换码已被使用，检查是否是当前设备使用的
                            const localData = utils.getData();
                            const deviceId = utils.getDeviceId();
                            
                            // 检查当前设备是否使用过此兑换码
                            if (localData.deviceUsedCodes && 
                                localData.deviceUsedCodes[deviceId] && 
                                localData.deviceUsedCodes[deviceId].includes(code)) {
                                // 是当前设备使用的，允许继续使用（刷新后仍可用）
                                testState.currentCode = code;
                                codeSection.style.display = 'none';
                                consentSection.style.display = 'block';
                                startTestBtn.disabled = false;
                                startTestBtn.textContent = '开始测评';
                                return;
                            } else {
                                // 是其他设备使用的，拒绝
                                codeError.textContent = '兑换码已被其他设备使用';
                                startTestBtn.disabled = false;
                                startTestBtn.textContent = '开始测评';
                                return;
                            }
                        } else {
                            // 兑换码未被使用，允许使用并标记为已使用
                            // 更新Supabase中的is_used状态
                            const { error: updateError } = await supabaseClient
                                .from('codes')
                                .update({ is_used: true })
                                .eq('id', data.id);
                            
                            if (updateError) {
                                throw updateError;
                            }
                            
                            // 记录该设备使用过此兑换码
                            try {
                                utils.markCodeAsUsedByDevice(code);
                            } catch (localError) {
                                console.warn('记录设备使用信息失败:', localError);
                            }
                            
                            // 兑换成功，跳转或开始测试
                            testState.currentCode = code;
                            codeSection.style.display = 'none';
                            consentSection.style.display = 'block';
                            startTestBtn.disabled = false;
                            startTestBtn.textContent = '开始测评';
                            return;
                        }
                    } catch (supabaseError) {
                        console.error('Supabase 验证失败，回退到本地验证:', supabaseError);
                        // 如果 Supabase 验证失败，继续使用本地验证
                    }
                }
                
                // 如果 Supabase 未配置或验证失败，使用本地验证逻辑
                if (utils.validateCode(code)) {
                    // 本地验证成功，记录该设备使用过此兑换码
                    utils.markCodeAsUsedByDevice(code);
                    // 兑换成功，跳转或开始测试
                    testState.currentCode = code;
                    codeSection.style.display = 'none';
                    consentSection.style.display = 'block';
                } else {
                    // 兑换码无效
                    codeError.textContent = '兑换码无效';
                }
            } catch (error) {
                console.error('验证兑换码失败:', error);
                codeError.textContent = '验证失败，请检查网络连接或联系管理员';
            } finally {
                startTestBtn.disabled = false;
                startTestBtn.textContent = '开始测评';
            }
        }

        // 处理开始测评按钮
        function handleStartTesting() {
            // 收集基本信息
            const ageGroup = document.getElementById('age-group').value;
            const gender = document.getElementById('gender').value;
            const constellation = document.getElementById('constellation').value;
            const bloodType = document.getElementById('blood-type').value;
            
            // 验证所有基本信息都已选择
            if (!ageGroup || !gender || !constellation || !bloodType) {
                alert('请填写完整的基本信息');
                return;
            }
            
            testState.basicInfo = {
                ageGroup: ageGroup,
                gender: gender,
                constellation: constellation,
                bloodType: bloodType
            };
            
            // 切换到测评页面
            basicInfoPage.style.display = 'none';
            testingPage.style.display = 'block';
            
            // 设置选项监听器
            setupOptionListeners();
            
            // 为所有步骤的选项设置监听器
            setupStepOptionListeners();
        }

        // 加载维度题目
        function loadDimensionQuestions(dimension) {
            testState.currentDimension = dimension;
            
            // 更新维度导航状态
            updateDimensionNav(dimension);
            
            // 更新维度标题
            const dimensionTitles = {
                1: '一、亲密关系与边界建立',
                2: '二、心力管理',
                3: '三、自我认知与内在成长',
                4: '四、职业与价值实现'
            };
            document.getElementById('dimension-title').textContent = dimensionTitles[dimension];
            
            // 渲染当前维度的所有题目
            renderDimensionQuestions(dimension);
            
            // 更新进度
            updateProgress();
            
            // 滚动到页面顶部
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 渲染维度题目
        function renderDimensionQuestions(dimension) {
            const dimQuestions = questions[`dimension${dimension}`];
            const questionsList = document.getElementById('questions-list');
            
            let html = '';
            
            dimQuestions.forEach((question, qIndex) => {
                const questionNum = qIndex + 1;
                const isSelected = testState.answers[`dimension${dimension}`][qIndex] !== null;
                
                html += `
                    <div class="question-item">
                        <div class="question-number">${dimension}-${questionNum}/10</div>
                        <div class="question-text">${question.text}</div>
                        <ul class="option-list">
                `;
                
                question.options.forEach((option, optIndex) => {
                    const isOptionSelected = testState.answers[`dimension${dimension}`][qIndex] === optIndex;
                    html += `
                        <li class="${isOptionSelected ? 'selected' : ''}">
                            <input type="radio" name="option-${dimension}-${questionNum}" value="${optIndex}" ${isOptionSelected ? 'checked' : ''} data-dim="${dimension}" data-qindex="${qIndex}">
                            ${option.text}
                        </li>
                    `;
                });
                
                html += '</ul></div>';
            });
            
            questionsList.innerHTML = html;
            
            // 监听所有选项点击
            const allOptions = questionsList.querySelectorAll('li');
            allOptions.forEach(option => {
                option.addEventListener('click', handleOptionSelect);
            });
        }

        // 设置选项监听器 - 已被setupStepOptionListeners替代
        function setupOptionListeners() {
            // 不再使用这个函数，改用setupStepOptionListeners
        }

        // 处理选项选择
        function handleOptionSelect(e) {
            const input = e.target;
            const li = input.closest('li');
            const questionItem = li.closest('.question-item');
            
            // 移除当前题目的其他选项的选中状态
            questionItem.querySelectorAll('li').forEach(option => {
                option.classList.remove('selected');
            });
            
            // 添加当前选项的选中状态
            li.classList.add('selected');
            
            // 保存答案
            const dimension = parseInt(input.dataset.dim);
            const qIndex = parseInt(input.dataset.qindex);
            const selectedOption = parseInt(input.value);
            testState.answers[`dimension${dimension}`][qIndex] = selectedOption;
        }

        // 处理下一步按钮点击
        function handleNextStep() {
            if (!validateCurrentStep()) {
                alert('请完成当前页面的所有题目');
                return;
            }
            
            const currentStep = testState.currentStep;
            if (currentStep < 4) {
                // 进入下一页
                goToStep(currentStep + 1);
            }
        }

        // 切换到指定步骤
        function goToStep(step) {
            // 隐藏所有步骤
            document.querySelectorAll('.step-page').forEach(page => {
                page.style.display = 'none';
            });
            
            // 显示目标步骤
            const targetStep = document.getElementById(`step${step}`);
            if (targetStep) {
                targetStep.style.display = 'block';
            }
            
            // 更新进度指示
            updateProgressIndicator(step);
            
            // 更新当前步骤
            testState.currentStep = step;
            testState.currentDimension = step;
            
            // 滚动到页面顶部
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 验证当前步骤所有题目是否已回答
        function validateCurrentStep() {
            const currentStep = testState.currentStep;
            const answers = testState.answers[`dimension${currentStep}`];
            const allAnswered = answers.every(answer => answer !== null);
            return allAnswered;
        }

        // 更新进度指示器
        function updateProgressIndicator(step) {
            const progressIndicator = document.querySelector('.progress-indicator');
            if (progressIndicator) {
                progressIndicator.textContent = `步骤 ${step}/4`;
            }
        }
        
        // 为所有步骤页面的选项设置监听器
        function setupStepOptionListeners() {
            // 获取所有步骤页面
            const stepPages = document.querySelectorAll('.step-page');
            
            // 遍历每个步骤页面
            stepPages.forEach(stepPage => {
                // 获取当前步骤页面中的所有单选按钮
                const radioInputs = stepPage.querySelectorAll('.option-list input[type="radio"]');
                
                // 为每个单选按钮添加change事件监听器
                radioInputs.forEach(input => {
                    // 移除现有的事件监听器，避免重复绑定
                    input.removeEventListener('change', handleStepOptionSelect);
                    input.removeEventListener('click', handleStepOptionSelect);
                    
                    // 添加change事件监听器
                    input.addEventListener('change', handleStepOptionSelect);
                    
                    // 同时添加click事件监听器，确保点击时能触发
                    input.addEventListener('click', handleStepOptionSelect);
                    
                    // 为父元素li添加click事件监听器，确保点击选项文本时也能触发
                    const li = input.closest('li');
                    if (li) {
                        li.removeEventListener('click', handleStepOptionLiClick);
                        li.addEventListener('click', handleStepOptionLiClick);
                    }
                });
            });
        }
        
        // 处理步骤页面的选项li点击
        function handleStepOptionLiClick(e) {
            // 找到对应的单选按钮
            const input = this.querySelector('input[type="radio"]');
            if (input) {
                // 触发单选按钮的change事件
                input.checked = true;
                const event = new Event('change', { bubbles: true });
                input.dispatchEvent(event);
            }
        }
        
        // 处理步骤页面的选项选择
        function handleStepOptionSelect(e) {
            const input = e.target;
            const li = input.closest('li');
            const questionItem = li.closest('.question-item');
            const questionsList = questionItem.closest('.questions-list');
            
            // 获取维度
            const dimension = parseInt(input.dataset.dim);
            
            // 移除当前题目的其他选项的选中状态
            questionItem.querySelectorAll('li').forEach(option => {
                option.classList.remove('selected');
            });
            
            // 添加当前选项的选中状态
            li.classList.add('selected');
            
            // 计算题目索引：根据questionItem在questionsList中的位置
            const allQuestionItems = Array.from(questionsList.querySelectorAll('.question-item'));
            const qindex = allQuestionItems.indexOf(questionItem);
            
            // 保存答案到正确的数组位置
            const selectedValue = parseInt(input.value);
            if (qindex >= 0 && qindex < testState.answers[`dimension${dimension}`].length) {
                testState.answers[`dimension${dimension}`][qindex] = selectedValue;
            }
            
            // 更新进度
            updateProgress();
        }

        // 为所有下一步按钮添加事件监听
        document.addEventListener('DOMContentLoaded', function() {
            // 监听下一步按钮
            const nextBtns = document.querySelectorAll('#next-btn');
            nextBtns.forEach(btn => {
                btn.addEventListener('click', handleNextStep);
            });
            
            // 监听完成测评按钮
            const completeTestBtn = document.getElementById('complete-test-btn');
            if (completeTestBtn) {
                completeTestBtn.addEventListener('click', function() {
                    if (!validateCurrentStep()) {
                        alert('请完成当前页面的所有题目');
                        return;
                    }
                    calculateResult();
                });
            }
        });

        // 检查维度是否已完成
        function checkDimensionComplete(dimension) {
            const dimAnswers = testState.answers[`dimension${dimension}`];
            const allAnswered = dimAnswers.every(answer => answer !== null);
            
            // 更新按钮状态
            updateButtonsVisibility(dimension, allAnswered);
        }

        // 更新按钮可见性
        function updateButtonsVisibility(dimension, isDimensionComplete) {
            const nextBtn = document.getElementById('next-btn');
            const completeBtn = document.getElementById('complete-test-btn');
            
            // 显示或隐藏完成测评按钮
            if (nextBtn && completeBtn) {
                if (dimension === 4 && isDimensionComplete) {
                    // 所有维度都已完成
                    nextBtn.style.display = 'none';
                    completeBtn.style.display = 'inline-block';
                } else {
                    // 还有未完成的维度
                    nextBtn.style.display = 'block';
                    completeBtn.style.display = 'none';
                }
            }
        }

        // 更新维度导航
        function updateDimensionNav(activeDim) {
            dimensionNav.querySelectorAll('button').forEach((btn, index) => {
                if (index + 1 === activeDim) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
        }

        // 更新进度
        function updateProgress() {
            // 计算已完成的题目数量
            let completedCount = 0;
            Object.values(testState.answers).forEach(dimAnswers => {
                completedCount += dimAnswers.filter(answer => answer !== null).length;
            });
            
            const totalCount = 40;
            const progress = (completedCount / totalCount) * 100;
            
            // 检查元素是否存在，避免TypeError
            if (progressFill) {
                progressFill.style.width = `${progress}%`;
            }
            if (progressText) {
                progressText.textContent = `${completedCount}/${totalCount}`;
            }
        }

        // 处理维度切换
        function handleDimensionChange(e) {
            if (e.target.tagName === 'BUTTON') {
                const dim = parseInt(e.target.dataset.dim);
                const currentDim = testState.currentDimension;
                
                if (dim !== currentDim) {
                    // 切换到新维度的题目
                    loadDimensionQuestions(dim);
                }
            }
        }
        
        // 添加完成测评按钮事件监听
        document.addEventListener('DOMContentLoaded', function() {
            const completeTestBtn = document.getElementById('complete-test-btn');
            if (completeTestBtn) {
                completeTestBtn.addEventListener('click', function() {
                    // 检查是否已完成所有题目
                    let allAnswered = true;
                    Object.values(testState.answers).forEach(dimAnswers => {
                        if (dimAnswers.some(answer => answer === null)) {
                            allAnswered = false;
                        }
                    });
                    
                    if (!allAnswered) {
                        if (confirm('还有未完成的题目，确定要提交吗？')) {
                            calculateResult();
                        }
                    } else {
                        calculateResult();
                    }
                });
            }
        })

        // 计算结果
        function calculateResult() {
            // 收集得分
            const scores = {
                dimension1: testState.answers.dimension1.map((index, qIndex) => {
                    return questions.dimension1[qIndex].options[index].score;
                }),
                dimension2: testState.answers.dimension2.map((index, qIndex) => {
                    return questions.dimension2[qIndex].options[index].score;
                }),
                dimension3: testState.answers.dimension3.map((index, qIndex) => {
                    return questions.dimension3[qIndex].options[index].score;
                }),
                dimension4: testState.answers.dimension4.map((index, qIndex) => {
                    return questions.dimension4[qIndex].options[index].score;
                })
            };
            
            // 匹配INFP类型
            const type = utils.matchINFPType(scores, testState.basicInfo.constellation, testState.basicInfo.bloodType);
            
            // 计算各维度总分
            const totalScores = utils.calculateTotalScores(scores);
            
            // 保存测评结果
            saveTestResult(type, scores, totalScores);
            
            // 显示结果
            showResult(type, totalScores);
        }

        // 保存测评结果
        function saveTestResult(type, scores, totalScores) {
            const data = utils.getData();
            const result = {
                code: testState.currentCode,
                basicInfo: testState.basicInfo,
                scores: scores,
                totalScores: totalScores,
                type: type,
                timestamp: new Date().toISOString()
            };
            
            // 保存测评结果
            data.testResults[testState.currentCode] = result;
            
            // 标记兑换码为已使用
            if (!data.usedCodes.includes(testState.currentCode)) {
                data.usedCodes.push(testState.currentCode);
            }
            
            // 只保存一次数据
            utils.saveData(data);
        }

        // 显示结果
        function showResult(type, totalScores) {
            // 切换到结果页面
            testingPage.style.display = 'none';
            resultPage.style.display = 'block';
            
            // 将"透明型INFP"替换为"通明型INFP"
            type = type.replace('透明型INFP', '通明型INFP');
            
            // 显示类型结果
            typeResult.textContent = type;
            
            // 生成结果解读
            generateResultInterpretation(type, totalScores);
            
            // 绘制雷达图（确保页面渲染完成后再绘制）
            // 使用 requestAnimationFrame 确保 DOM 更新完成
            requestAnimationFrame(() => {
                // 再次延迟，确保 Canvas 元素完全可见
                setTimeout(() => {
                    try {
                        const canvas = document.getElementById('radar-chart');
                        if (!canvas) {
                            console.error('雷达图 Canvas 元素未找到');
                            return;
                        }
                        
                        // 检查 Chart.js 是否已加载
                        if (typeof Chart === 'undefined') {
                            console.error('Chart.js 未加载');
                            // 如果 Chart.js 未加载，等待一段时间后重试
                            setTimeout(() => {
                                if (typeof Chart !== 'undefined' && typeof utils !== 'undefined' && utils.drawRadarChart) {
                                    utils.drawRadarChart(totalScores, 'radar-chart');
                                }
                            }, 500);
                            return;
                        }
                        
                        // 检查 utils 是否已加载
                        if (typeof utils === 'undefined' || !utils.drawRadarChart) {
                            console.error('utils.drawRadarChart 未找到');
                            return;
                        }
                        
                        // 绘制雷达图
                        utils.drawRadarChart(totalScores, 'radar-chart');
                    } catch (error) {
                        console.error('绘制雷达图失败:', error);
                    }
                }, 200);
            });
        }

        // 绘制雷达图（已迁移到utils.js）
        function drawRadarChart(totalScores) {
            utils.drawRadarChart(totalScores, 'radar-chart');
        }

        // 生成结果解读
        function generateResultInterpretation(type, totalScores) {
            // 设置报告日期
            const now = new Date();
            const dateStr = now.toLocaleDateString('zh-CN');
            document.getElementById('report-date').textContent = `报告生成日期：${dateStr}`;
            
            // 显示类型结果
            document.getElementById('type-result').textContent = type;
            
            // 转换类型为小写，便于匹配
            const lowerType = type.toLowerCase();
            
            // 获取星座元素
            const constellationElement = getConstellationElement(testState.basicInfo.constellation);
            
            // 生成基本信息
            const basicInfoGrid = document.getElementById('basic-info-grid');
            basicInfoGrid.innerHTML = `
                <div class="info-item">
                    <div class="info-label">年龄段</div>
                    <div class="info-value">${testState.basicInfo.ageGroup}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">性别</div>
                    <div class="info-value">${testState.basicInfo.gender}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">星座</div>
                    <div class="info-value">${testState.basicInfo.constellation}</div>
                </div>
                <div class="info-item">
                    <div class="info-label">血型</div>
                    <div class="info-value">${testState.basicInfo.bloodType}</div>
                </div>
            `;
            
            // 生成维度得分
            const scoresList = document.getElementById('scores-list');
            scoresList.innerHTML = `
                <div class="score-item">
                    <div class="score-label">亲密关系与边界建立</div>
                    <div class="score-bar">
                        <div class="score-fill" style="width: ${(totalScores.dim1/30)*100}%"></div>
                    </div>
                    <div class="score-value">${totalScores.dim1}/30</div>
                </div>
                <div class="score-item">
                    <div class="score-label">心力管理</div>
                    <div class="score-bar">
                        <div class="score-fill" style="width: ${(totalScores.dim2/30)*100}%"></div>
                    </div>
                    <div class="score-value">${totalScores.dim2}/30</div>
                </div>
                <div class="score-item">
                    <div class="score-label">自我认知与内在成长</div>
                    <div class="score-bar">
                        <div class="score-fill" style="width: ${(totalScores.dim3/30)*100}%"></div>
                    </div>
                    <div class="score-value">${totalScores.dim3}/30</div>
                </div>
                <div class="score-item">
                    <div class="score-label">职业与价值实现</div>
                    <div class="score-bar">
                        <div class="score-fill" style="width: ${(totalScores.dim4/30)*100}%"></div>
                    </div>
                    <div class="score-value">${totalScores.dim4}/30</div>
                </div>
            `;
            
            // 生成类型解读（根据图片结构）
            const typeInterpretation = document.getElementById('type-interpretation');
            
            // 根据不同的人格类型生成不同的解读内容
            let crowdDefinition = '';
            let typeIntroduction = '';
            let coreFeatures = '';
            
            if (lowerType.includes('冲动')) {
                crowdDefinition = '冲动型INFP往往行动先于思考，凭借瞬间的灵感与情绪驱动投入。然而，这种高能量状态难以维持，常在爆发后迅速耗尽，陷入低落与空虚，形成\'冲动-耗竭\'的循环。';
                typeIntroduction = '作为冲动型INFP，你的行动力并不匮乏，甚至常常\"抢先\"于思维——一股情绪、一瞬灵感就能让你全力投入。这赋予了你能捕捉鲜活灵感的优势，但也让生活难以建立起稳定的节奏与深度。关键不在于抑制冲动，而在于学习驾驭它：从被情绪推着走，到主动掌舵自己的航向。';
                coreFeatures = `
                    <li><strong>情绪驱动行动</strong>：您的行为模式高度依赖当下的情绪状态。感觉对了，可以爆发出惊人的能量和创造力；感觉不对，则完全提不起劲，陷入停滞。</li>
                    <li><strong>兴趣转移迅速</strong>：您对新鲜事物充满好奇，但深度和耐力不足。容易对一个领域产生浓厚兴趣并全身心投入，但热度消退后又会迅速转向下一个目标。</li>
                    <li><strong>承诺困难</strong>：无论是项目、计划还是关系，长期的、需要稳定投入的承诺会让您感到束缚和压力，本能地想要逃离，给人\"不靠谱\"或\"三分钟热度\"的印象。</li>
                    <li><strong>感受深刻而善变</strong>：您的情绪和感受都非常真实和强烈，但它们的变化也很快。上午可能还充满希望，下午一点小事就可能让您跌入谷底。</li>
                `;
            } else if (lowerType.includes('枯竭')) {
                crowdDefinition = '枯竭型INFP如同一门容易过载的炮——你拥有强大的行动热情和实现理想的目标感，敢于为认定的事物全力投入。但你常常低估现实阻力，在遭遇困难时持续消耗自身能量，直至系统彻底过热，陷入\"全力爆发—彻底熄火\"的循环。';
                typeIntroduction = '枯竭型INFP拥有INFP中少见的强行动力。一旦认定目标，便会倾注全部热情与精力，这种决绝令人印象深刻。然而，这种缺乏缓冲的投入方式，也让你在面对挫折、延迟或负面反馈时格外脆弱。未经调节的能量会急速耗尽，从高昂的斗志直接坠入深度倦怠。你的核心成长在于学会调试自己的能量输出模式，将一次性的澎湃激情，转化为能够应对长期战斗的可持续动力。';
                coreFeatures = `
                    <li><strong>抱负驱动的过度投入</strong>：您容易被宏大的理想或目标点燃，并在初期投入远超自身负荷的精力，缺乏持久战的准备和节奏感。</li>
                    <li><strong>非黑即白的行动模式</strong>：状态好时觉得自己无所不能，受挫后又容易陷入全盘否定的绝望，在\"全能感\"与\"无能感\"的两个极端间摆动。</li>
                    <li><strong>忽视身心预警信号</strong>：在追逐目标的过程中，您常常忽略身体疲惫、情绪枯竭的警报，直到彻底\"断电\"才被迫停下。</li>
                    <li><strong>价值感绑定单一结果</strong>：您的自我价值高度依赖于某个具体目标的达成与否，一旦结果不如预期，就容易产生强烈的失败感和身份危机。</li>
                `;
            } else if (lowerType.includes('矛盾')) {
                crowdDefinition = '矛盾型INFP的核心特征是内心感性与理性的剧烈冲突。你既会被澎湃的情感和理想所驱动，又无法关闭冷静、批判的理性分析。这两种力量常常同时作用且相互对抗，导致你在决策、表达乃至自我认知时陷入反复拉扯和深深的内耗。';
                typeIntroduction = '作为矛盾型INFP，你大脑中的\"情感处理器\"与\"逻辑处理器\"常常同时高负荷运行，且相互干扰。这并非一种可自由控制的天赋，而更像一种本能反应：情感刚产生一个冲动，理性立刻对其审查和质疑。这种无休止的内部辩论，消耗了你大量心理能量，是导致你犹豫不决和行动迟缓的根本原因。';
                coreFeatures = `
                    <li><strong>双重感知带来的决策瘫痪</strong>：面对选择时，您能同时清晰地看到感性和理性两条路径的优劣，无法轻易偏向任何一方，导致难以决断。</li>
                    <li><strong>自我表达的内在审核</strong>：在表达观点或情感前，内心已经历多轮自我质疑和修正，常常话到嘴边又咽下，因担心逻辑不周或情感失真。</li>
                    <li><strong>能量在内部对抗中耗散</strong>：大量心理能量消耗在调和内在矛盾上，用于外部行动的能量所剩无几，常感心力交瘁却进展缓慢。</li>
                    <li><strong>在不同人格面具间切换</strong>：在不同场合下，您可能会不自觉地放大感性或理性的一面，给人留下割裂的印象，也加深了自我认知的困惑。</li>
                `;
            } else {
                // 其他类型的处理
                // 这里我们根据类型中的关键词来生成内容
                if (lowerType.includes('焦虑')) {
                    // 只有真正的焦虑型INFP才显示焦虑型内容
                    crowdDefinition = '您是一位正处于"情绪敏感与自我保护期"的INFP。您内心怀抱着纯粹而炽热的理想，但这份理想在现实面前显得格外脆弱。您像一台精密的内燃机，拥有强大的内在能量，却因完美主义的枷锁，导致能量在内部空转、剧烈消耗，难以有效转化为向前的行动，常常陷入"想得太多，一步未动"的内耗状态。';
                    typeIntroduction = '"焦虑型INFP"是许多INFP旅程的起点。您拥有敏锐的感知力和深刻的价值观，能看见一个更美好、更纯粹的世界可能是什么样子。然而，这种深刻的洞察力如同一把双刃剑，它也让您无比清晰地看到现实与理想之间的鸿沟，以及自身当下的"不完美"。您渴望一步到位地抵达完美彼岸，但任何微小的瑕疵、潜在的失败风险，都足以让您在起跑线前望而却步，被自己想象的困难所压垮。请理解，这不是您的缺陷，而是您独特的灵魂正在学习如何与这个不完美的世界相处。';
                    coreFeatures = `
                        <li><strong>理想化的高标准</strong>：您在脑海中对生活、工作和关系都有一套理想的"完美剧本"，当现实不符合时，会感到强烈的失望、焦虑甚至幻灭。</li>
                        <li><strong>完美主义前置</strong>：在开始任何任务前，您会预设一个必须达到的完美结果，并因害怕无法达到而承受巨大压力，导致行动瘫痪。</li>
                        <li><strong>思维反刍与内耗</strong>：您的思绪永不停歇，反复咀嚼过去的失误、分析当下的不足、担忧未来的风险。这种持续的脑内对话，消耗了您绝大部分的心理能量。</li>
                        <li><strong>严苛的自我批评</strong>：您的内心有一位严厉的"批评家"，它用极高的标准审判您的一举一动，将任何"不完美"都归因于自身的失败，进一步侵蚀您的行动勇气。</li>
                    `;
                } else if (lowerType.includes('激情')) {
                    // 激情型INFP
                    crowdDefinition = '激情型INFP内心燃烧着强烈的理想主义火焰，对生活充满热情和渴望。你容易被宏大的目标和美好的愿景所吸引，愿意为了心中的理想付出一切。';
                    typeIntroduction = '作为激情型INFP，你的生命充满了活力和热情。你对世界充满好奇，渴望探索未知的领域，体验不同的人生。你的激情是你前进的动力，但也需要学会如何管理和引导这种能量，避免过度消耗。';
                    coreFeatures = `
                        <li><strong>理想主义者</strong>：你拥有崇高的理想和价值观，渴望改变世界，让它变得更美好。</li>
                        <li><strong>热情洋溢</strong>：你对生活充满热情，总能感染周围的人，带来正能量。</li>
                        <li><strong>行动力强</strong>：一旦确定了目标，你会立刻采取行动，全力以赴地去实现它。</li>
                        <li><strong>情感丰富</strong>：你的情感世界非常丰富，容易受到外界的影响，情绪波动较大。</li>
                    `;
                } else if (lowerType.includes('自我')) {
                    // 自我型INFP
                    crowdDefinition = '自我型INFP更加关注自己的内心世界，重视个人的感受和需求。你倾向于从内部寻找力量和答案，而不是依赖外部的认可和评价。';
                    typeIntroduction = '作为自我型INFP，你有着强烈的自我意识和独立精神。你知道自己想要什么，不轻易被他人的意见所左右。你喜欢独处，享受与自己内心对话的时光，在孤独中寻找灵感和力量。';
                    coreFeatures = `
                        <li><strong>自我意识强</strong>：你非常了解自己的优点和缺点，对自己的价值有清晰的认知。</li>
                        <li><strong>独立思考</strong>：你善于独立思考，不随波逐流，有自己独特的见解和观点。</li>
                        <li><strong>重视隐私</strong>：你非常注重个人隐私，不愿意过多地暴露自己的内心世界。</li>
                        <li><strong>内心强大</strong>：你有着强大的内心力量，能够在困难和挫折面前保持坚强和乐观。</li>
                    `;
                } else if (lowerType.includes('敏感')) {
                    // 敏感型INFP
                    crowdDefinition = '敏感型INFP正处于情绪敏锐且需要建立内在重心的阶段。风象星座的活跃思维与B型血追求自由的天性，使你像一颗蒲公英，能灵敏地感知并跟随每一阵风——他人的情绪、外界的观点或眼前的机会。你拥有开放的感知力，却也因缺乏一个稳定的内在核心与明确的方向，容易在生活的气流中漂泊不定，难以持续扎根生长。';
                    typeIntroduction = '敏感型INFP的成长，体现在你逐渐学会从"被情绪推着走"转向"主动选择方向"。你对世界的感知力是你的天赋，但你需要为这份天赋找到一个稳定的容器，让它能够转化为有价值的洞察和行动，而不是让你在各种外界影响中迷失自我。';
                    coreFeatures = `
                        <li><strong>外部导向的决策模式</strong>：你的选择和情绪极易受到当下环境、他人态度或流行观点的影响。</li>
                        <li><strong>兴趣广泛但无法深耕</strong>：你对许多事物都抱有短暂而热烈的兴趣，但容易遇到困难就放弃。</li>
                        <li><strong>边界模糊与过度共情</strong>：你很难拒绝他人的请求，容易被他人的情绪和问题卷入。</li>
                        <li><strong>缺乏稳定的内在核心</strong>：你对自己的需求和价值观缺乏清晰的认识，容易随波逐流。</li>
                    `;
                } else if (lowerType.includes('耗竭')) {
                    // 耗竭型INFP
                    crowdDefinition = '耗竭型INFP如同一门容易过载的炮——你拥有强大的行动热情和实现理想的目标感，敢于为认定的事物全力投入。但你常常低估现实阻力，在遭遇困难时持续消耗自身能量，直至系统彻底过热，陷入"全力爆发—彻底熄火"的循环。';
                    typeIntroduction = '耗竭型INFP拥有INFP中少见的强行动力。一旦认定目标，便会倾注全部热情与精力，这种决绝令人印象深刻。然而，这种缺乏缓冲的投入方式，也让你在面对挫折、延迟或负面反馈时格外脆弱。未经调节的能量会急速耗尽，从高昂的斗志直接坠入深度倦怠。你的核心成长在于学会调试自己的能量输出模式，将一次性的澎湃激情，转化为能够应对长期战斗的可持续动力。';
                    coreFeatures = `
                        <li><strong>抱负驱动的过度投入</strong>：你容易被宏大的理想或目标点燃，并在初期投入远超自身负荷的精力。</li>
                        <li><strong>非黑即白的行动模式</strong>：状态好时觉得自己无所不能，受挫后又容易陷入全盘否定的绝望。</li>
                        <li><strong>忽视身心预警信号</strong>：在追逐目标的过程中，你常常忽略身体疲惫、情绪枯竭的警报。</li>
                        <li><strong>价值感绑定单一结果</strong>：你的自我价值高度依赖于某个具体目标的达成与否。</li>
                    `;
                } else if (lowerType.includes('冲突')) {
                    // 冲突型INFP
                    crowdDefinition = '冲突型INFP的核心特征是内心感性与理性的剧烈冲突。你既会被澎湃的情感和理想所驱动，又无法关闭冷静、批判的理性分析。这两种力量常常同时作用且相互对抗，导致你在决策、表达乃至自我认知时陷入反复拉扯和深深的内耗。';
                    typeIntroduction = '作为冲突型INFP，你大脑中的"情感处理器"与"逻辑处理器"常常同时高负荷运行，且相互干扰。这并非一种可自由控制的天赋，而更像一种本能反应：情感刚产生一个冲动，理性立刻对其审查和质疑。这种无休止的内部辩论，消耗了你大量心理能量，是导致你犹豫不决和行动迟缓的根本原因。';
                    coreFeatures = `
                        <li><strong>双重感知带来的决策瘫痪</strong>：面对选择时，你能同时清晰地看到感性和理性两条路径的优劣，无法轻易偏向任何一方。</li>
                        <li><strong>自我表达的内在审核</strong>：在表达观点或情感前，内心已经历多轮自我质疑和修正。</li>
                        <li><strong>能量在内部对抗中耗散</strong>：大量心理能量消耗在调和内在矛盾上，用于外部行动的能量所剩无几。</li>
                        <li><strong>在不同人格面具间切换</strong>：在不同场合下，你可能会不自觉地放大感性或理性的一面。</li>
                    `;
                } else if (lowerType.includes('情绪')) {
                    // 情绪型INFP
                    crowdDefinition = '情绪型INFP如同一座情绪的火山——你拥有丰富而强烈的情感世界，情绪变化剧烈且不可预测。你容易被情绪所左右，导致行为和决策缺乏稳定性，难以保持持久的动力和方向。';
                    typeIntroduction = '作为情绪型INFP，你的情感体验比一般INFP更加深刻和强烈。你的情绪像潮水一样起伏不定，时而高涨，时而低落，这种强烈的情绪波动让你感到疲惫和失控。你渴望找到情绪的平衡点，但往往不知道如何调节和管理自己的情绪，导致能量在情绪波动中被消耗殆尽。';
                    coreFeatures = `
                        <li><strong>情绪波动剧烈</strong>：你的情绪容易被外界触发，且波动幅度较大，难以控制。</li>
                        <li><strong>情感驱动行为</strong>：你的行为和决策往往受到当前情绪状态的影响，缺乏理性思考。</li>
                        <li><strong>能量在情绪中耗散</strong>：大量心理能量消耗在情绪波动和管理上，用于实际行动的能量所剩无几。</li>
                        <li><strong>情绪表达直接强烈</strong>：你倾向于直接表达自己的情绪，不管场合和后果。</li>
                    `;
                } else if (lowerType.includes('依赖')) {
                    // 依赖型INFP
                    crowdDefinition = '依赖型INFP如同一只迷路的小猫——你拥有丰富的情感和敏感的内心，但缺乏独立决策的信心和能力。你习惯于依赖他人的意见和支持，害怕独立面对生活中的挑战和选择。';
                    typeIntroduction = '作为依赖型INFP，你对他人的依赖并非源于懒惰或无能，而是源于对被抛弃和孤独的恐惧。你渴望被理解和接纳，害怕自己的选择会导致他人的不满或离开。这种恐惧让你宁愿放弃自己的需求和想法，也不愿冒险独立决策。';
                    coreFeatures = `
                        <li><strong>缺乏独立决策能力</strong>：面对选择时，你总是寻求他人的意见和支持，难以独立做出决定。</li>
                        <li><strong>害怕被抛弃</strong>：你对关系的稳定性非常敏感，害怕被他人抛弃或忽视。</li>
                        <li><strong>自我价值依赖他人认可</strong>：你的自我价值感很大程度上依赖于他人的评价和认可。</li>
                        <li><strong>难以拒绝他人</strong>：你很难拒绝他人的请求，即使这会牺牲自己的需求和利益。</li>
                    `;
                } else if (lowerType.includes('混乱')) {
                    // 混乱型INFP
                    crowdDefinition = '混乱型INFP如同一个杂乱的抽屉——你拥有丰富的想法和情感，但缺乏组织和管理能力。你的生活和思维常常处于混乱状态，难以形成清晰的目标和计划。';
                    typeIntroduction = '作为混乱型INFP，你似乎总是处于一种"想法很多，但不知道从何开始"的状态。你的思维跳跃性强，容易被新的想法和灵感吸引，但缺乏持续关注和执行的能力。这种混乱状态让你感到焦虑和失控，渴望找到一种能够组织和管理自己的方法。';
                    coreFeatures = `
                        <li><strong>思维跳跃性强</strong>：你的思维容易从一个话题跳到另一个话题，难以保持专注。</li>
                        <li><strong>缺乏组织和计划能力</strong>：你很难制定和执行清晰的计划，生活和工作常常处于混乱状态。</li>
                        <li><strong>容易被新想法吸引</strong>：你对新事物和新想法非常敏感，容易被分散注意力。</li>
                        <li><strong>难以持续执行</strong>：你开始一个项目或想法时充满热情，但往往难以坚持到最后。</li>
                    `;
                } else if (lowerType.includes('两难')) {
                    // 两难型INFP
                    crowdDefinition = '两难型INFP如同站在十字路口的行人——你总是面临各种两难选择，难以做出决定。你对每种选择都能看到其利弊，导致你在决策时陷入深深的纠结和内耗。';
                    typeIntroduction = '作为两难型INFP，你对事物的观察力和分析能力非常强，能够同时看到问题的多个方面。然而，这种能力也成为了你的负担，让你在面对选择时总是犹豫不决，害怕做出错误的决定。你渴望找到一种能够帮助你做出清晰决策的方法。';
                    coreFeatures = `
                        <li><strong>决策困难</strong>：你在面对选择时总是犹豫不决，害怕做出错误的决定。</li>
                        <li><strong>过度分析</strong>：你对每个选择都会进行过度的分析和权衡，导致决策瘫痪。</li>
                        <li><strong>害怕后悔</strong>：你非常害怕做出决定后会后悔，因此宁愿拖延决策。</li>
                        <li><strong>缺乏决策自信</strong>：你对自己的决策能力缺乏信心，总是寻求他人的确认和支持。</li>
                    `;
                } else if (lowerType.includes('固执')) {
                    // 固执型INFP
                    crowdDefinition = '固执型INFP如同一块坚硬的石头——你拥有坚定的信念和原则，但缺乏灵活性和开放度。你往往坚持自己的想法和观点，不愿意接受他人的建议和反馈。';
                    typeIntroduction = '作为固执型INFP，你对自己的信念和原则非常坚持，甚至到了固执的程度。你认为只有坚持自己的信念，才能实现自己的理想和价值。然而，这种固执往往让你难以适应变化，无法接受新的观点和想法，导致你在人际关系和职业发展中遇到困难。';
                    coreFeatures = `
                        <li><strong>坚持己见</strong>：你对自己的观点和想法非常坚持，不愿意接受他人的建议和反馈。</li>
                        <li><strong>缺乏灵活性</strong>：你难以适应变化，总是希望事情按照自己的预期发展。</li>
                        <li><strong>对批评敏感</strong>：你对他人的批评非常敏感，认为批评是对自己的否定。</li>
                        <li><strong>理想化倾向</strong>：你对理想和完美的追求往往让你忽视现实的限制和可能性。</li>
                    `;
                } else if (lowerType.includes('内耗')) {
                    // 内耗型INFP
                    crowdDefinition = '内耗型INFP如同一个不停运转的磨盘——你拥有丰富的想法和情感，但这些想法和情感往往相互冲突，导致你在内部消耗大量的心理能量。';
                    typeIntroduction = '作为内耗型INFP，你总是在内心进行各种斗争和辩论，消耗了大量的心理能量。你渴望找到一种能够调和内在矛盾的方法，让自己的内心能够更加平静和和谐。';
                    coreFeatures = `
                        <li><strong>内在冲突严重</strong>：你的内心总是充满各种矛盾和冲突，难以找到平衡点。</li>
                        <li><strong>自我否定</strong>：你经常进行自我否定和自我批评，导致自信心不足。</li>
                        <li><strong>能量消耗大</strong>：大量的心理能量消耗在内部斗争中，用于外部行动的能量所剩无几。</li>
                        <li><strong>拖延倾向</strong>：你往往因为内心的冲突而拖延行动，难以做出决定。</li>
                    `;
                } else if (lowerType.includes('矛盾')) {
                    // 矛盾型INFP（已经在前面处理过，但为了保险起见再次处理）
                    crowdDefinition = '矛盾型INFP的核心特征是内心感性与理性的剧烈冲突。你既会被澎湃的情感和理想所驱动，又无法关闭冷静、批判的理性分析。这两种力量常常同时作用且相互对抗，导致你在决策、表达乃至自我认知时陷入反复拉扯和深深的内耗。';
                    typeIntroduction = '作为矛盾型INFP，你大脑中的"情感处理器"与"逻辑处理器"常常同时高负荷运行，且相互干扰。这并非一种可自由控制的天赋，而更像一种本能反应：情感刚产生一个冲动，理性立刻对其审查和质疑。这种无休止的内部辩论，消耗了你大量心理能量，是导致你犹豫不决和行动迟缓的根本原因。';
                    coreFeatures = `
                        <li><strong>双重感知带来的决策瘫痪</strong>：面对选择时，您能同时清晰地看到感性和理性两条路径的优劣，无法轻易偏向任何一方，导致难以决断。</li>
                        <li><strong>自我表达的内在审核</strong>：在表达观点或情感前，内心已经历多轮自我质疑和修正，常常话到嘴边又咽下，因担心逻辑不周或情感失真。</li>
                        <li><strong>能量在内部对抗中耗散</strong>：大量心理能量消耗在调和内在矛盾上，用于外部行动的能量所剩无几，常感心力交瘁却进展缓慢。</li>
                        <li><strong>在不同人格面具间切换</strong>：在不同场合下，您可能会不自觉地放大感性或理性的一面，给人留下割裂的印象，也加深了自我认知的困惑。</li>
                    `;
                } else if (lowerType.includes('枯竭')) {
                    // 枯竭型INFP（已经在前面处理过，但为了保险起见再次处理）
                    crowdDefinition = '枯竭型INFP如同一门容易过载的炮——你拥有强大的行动热情和实现理想的目标感，敢于为认定的事物全力投入。但你常常低估现实阻力，在遭遇困难时持续消耗自身能量，直至系统彻底过热，陷入"全力爆发—彻底熄火"的循环。';
                    typeIntroduction = '枯竭型INFP拥有INFP中少见的强行动力。一旦认定目标，便会倾注全部热情与精力，这种决绝令人印象深刻。然而，这种缺乏缓冲的投入方式，也让你在面对挫折、延迟或负面反馈时格外脆弱。未经调节的能量会急速耗尽，从高昂的斗志直接坠入深度倦怠。你的核心成长在于学会调试自己的能量输出模式，将一次性的澎湃激情，转化为能够应对长期战斗的可持续动力。';
                    coreFeatures = `
                        <li><strong>抱负驱动的过度投入</strong>：您容易被宏大的理想或目标点燃，并在初期投入远超自身负荷的精力，缺乏持久战的准备和节奏感。</li>
                        <li><strong>非黑即白的行动模式</strong>：状态好时觉得自己无所不能，受挫后又容易陷入全盘否定的绝望，在"全能感"与"无能感"的两个极端间摆动。</li>
                        <li><strong>忽视身心预警信号</strong>：在追逐目标的过程中，您常常忽略身体疲惫、情绪枯竭的警报，直到彻底"断电"才被迫停下。</li>
                        <li><strong>价值感绑定单一结果</strong>：您的自我价值高度依赖于某个具体目标的达成与否，一旦结果不如预期，就容易产生强烈的失败感和身份危机。</li>
                    `;
                } else if (lowerType.includes('探索')) {
                    crowdDefinition = '探索型INFP正处于从焦虑向稳定过渡的关键阶段。您开始尝试走出舒适区，主动探索外部世界的各种可能性，同时也在深入探索自己的内在需求和价值观。探索型是连接低阶和高阶的重要桥梁，为您后续的成长奠定坚实的基础。';
                    typeIntroduction = '作为探索型INFP，您不再满足于停留在想象和计划阶段，而是开始将想法转化为行动，主动探索各种可能性。您对世界充满好奇心，愿意尝试新事物，同时也在这个过程中不断深化对自我的认识。您的探索精神为您打开了广阔的成长空间，让您能够更全面地了解自己和世界。';
                    coreFeatures = `
                        <li><strong>强烈的好奇心驱动</strong>：您对世界充满好奇，渴望探索各种新事物和新领域，不断拓展自己的视野。</li>
                        <li><strong>开放的学习心态</strong>：您愿意接受不同的观点和经历，保持开放的学习态度，从各种体验中汲取养分。</li>
                        <li><strong>深入的自我探索</strong>：您积极探索自己的内在需求、价值观和兴趣爱好，不断深化对自我的认识。</li>
                        <li><strong>行动力的显著提升</strong>：您开始将想法转化为行动，不再陷入纯粹的思考和计划，而是通过实践不断成长。</li>
                    `;
                } else if (lowerType.includes('表达')) {
                    crowdDefinition = '表达型INFP善于将内在的情感和想法通过各种方式表达出来。您拥有丰富的情感世界和敏锐的洞察力，能够用文字、艺术或其他形式将这些内在体验分享给他人，触动他人的内心。';
                    typeIntroduction = '作为表达型INFP，您不再压抑自己的情感和想法，而是学会了用健康、有效的方式表达出来。您的表达具有独特的感染力和深度，能够将内在的情感转化为能够被他人理解和共鸣的形式。表达型是连接内在世界和外部世界的重要桥梁，让您的内在价值得以展现。';
                    coreFeatures = `
                        <li><strong>丰富的情感表达能力</strong>：您能够用各种方式表达自己的情感、想法和体验，让他人能够感受到您的内在世界。</li>
                        <li><strong>敏锐的情感洞察力</strong>：您拥有敏锐的洞察力，能够深入理解他人的情感和需求，并用恰当的方式回应。</li>
                        <li><strong>独特的表达风格</strong>：您的表达具有独特的风格和深度，能够触动他人的内心，产生共鸣。</li>
                        <li><strong>内外世界的有效连接</strong>：您能够将内在的情感和想法转化为外在的表达，建立起内在世界和外部世界的有效连接。</li>
                    `;
                } else if (lowerType.includes('整合')) {
                    crowdDefinition = '整合型INFP已经学会了整合内在的各种矛盾和冲突，形成了更加统一和和谐的自我。您不再被内在的冲突所消耗，而是能够将各种不同的部分整合为一个完整的整体，实现了内在的平衡和和谐。';
                    typeIntroduction = '作为整合型INFP，您已经度过了内在冲突的阶段，学会了接纳和整合自己的各种特质。您不再追求完美，而是学会了接受自己的不完美，并将其视为成长的机会。整合型是人格成熟的重要标志，为您后续的高阶成长奠定了坚实的基础。';
                    coreFeatures = `
                        <li><strong>内在和谐的实现</strong>：您的内在不再充满冲突，而是形成了统一和和谐的整体，各种特质能够协同工作。</li>
                        <li><strong>自我接纳的深度发展</strong>：您能够接纳自己的优点和缺点，不再自我否定，而是将不完美视为成长的机会。</li>
                        <li><strong>平衡能力的显著提升</strong>：您能够在各种不同的需求和目标之间找到平衡，不再陷入极端。</li>
                        <li><strong>成熟稳重的心态</strong>：您的心态成熟，能够理性地处理各种问题和挑战，保持内心的平静和稳定。</li>
                    `;
                } else if (lowerType.includes('实验')) {
                    crowdDefinition = '实验型INFP善于尝试各种新的方法和途径，不断探索和实验，寻找最适合自己的成长路径。您拥有开放的心态和强烈的好奇心，愿意在实践中不断学习和成长。';
                    typeIntroduction = '作为实验型INFP，您不再局限于固定的思维模式和行为方式，而是愿意尝试各种新的方法和途径。您将生活视为一场实验，通过不断的尝试和调整，找到最适合自己的成长路径。实验型是INFP成长过程中的重要阶段，为您的高阶成长积累了丰富的经验和教训。';
                    coreFeatures = `
                        <li><strong>开放的实验心态</strong>：您愿意尝试各种新的方法和途径，保持开放的学习态度，不断探索新的可能性。</li>
                        <li><strong>积极的尝试精神</strong>：您将生活视为一场实验，通过不断的尝试和调整，找到最适合自己的成长路径。</li>
                        <li><strong>强大的学习能力</strong>：您善于从实践中学习，不断总结经验和教训，将失败视为成长的机会。</li>
                        <li><strong>灵活的适应能力</strong>：您能够适应各种不同的情况和环境，灵活调整自己的行为方式，找到最适合自己的发展道路。</li>
                    `;
                } else if (lowerType.includes('创造')) {
                    crowdDefinition = '创造型INFP已经达到了高阶阶段，能够将内在的理想和创造力转化为实际的成果。您拥有独特的视角和创意，能够创造出富有深度和意义的作品，同时也能在创造过程中实现自我价值。';
                    typeIntroduction = '作为创造型INFP，您已经将理想主义与现实行动完美结合。您不再被完美主义所束缚，而是学会了在实践中不断调整和完善自己的作品。您的创造力得到了充分的发挥，能够为世界带来独特的价值和影响。';
                    coreFeatures = `
                        <li><strong>富有创造力</strong>：您能够产生独特的想法和创意，并将其转化为实际的作品或成果。</li>
                        <li><strong>行动导向</strong>：您注重实践，能够将想法转化为具体的行动和成果。</li>
                        <li><strong>自我实现</strong>：您在创造过程中找到了自我价值和意义。</li>
                        <li><strong>影响力强</strong>：您的作品能够影响和启发他人，产生积极的社会价值。</li>
                    `;
                } else if (lowerType.includes('表达')) {
                    crowdDefinition = '表达型INFP善于将内在的情感和想法通过各种方式表达出来。您拥有丰富的情感世界和敏锐的洞察力，能够用文字、艺术或其他形式将这些内在体验分享给他人。';
                    typeIntroduction = '作为表达型INFP，您不再压抑自己的情感和想法，而是学会了用健康、有效的方式表达出来。您的表达具有独特的感染力和深度，能够触动他人的内心。表达型是连接内在世界和外部世界的重要桥梁，让您的内在价值得以展现。';
                    coreFeatures = `
                        <li><strong>表达能力强</strong>：您善于用各种方式表达自己的情感、想法和体验。</li>
                        <li><strong>情感丰富</strong>：您拥有深刻的情感体验，能够理解和表达复杂的情绪。</li>
                        <li><strong>感染力强</strong>：您的表达能够触动他人的内心，产生共鸣。</li>
                        <li><strong>创造力强</strong>：您能够用独特的方式表达和呈现内容。</li>
                    `;
                } else if (lowerType.includes('灵感')) {
                    crowdDefinition = '灵感型INFP是天生的创意源泉，能够产生源源不断的灵感和想法。您的思维跳跃而富有想象力，能够从各种看似无关的事物中获得灵感，为创造提供强大的动力。';
                    typeIntroduction = '作为灵感型INFP，您拥有独特的思维方式和想象力，能够产生各种富有创意的想法。您的灵感往往突如其来，充满了新颖性和独特性。灵感型是创造力的重要源泉，为您的创造过程提供了强大的动力和素材。';
                    coreFeatures = `
                        <li><strong>想象力丰富</strong>：您拥有天马行空的想象力，能够产生各种独特的想法。</li>
                        <li><strong>灵感源源不断</strong>：您能够从各种来源获得灵感，创意不断。</li>
                        <li><strong>思维跳跃</strong>：您的思维方式独特，能够在不同领域之间建立联系。</li>
                        <li><strong>创造力强</strong>：您能够将灵感转化为实际的创意作品。</li>
                    `;
                } else if (lowerType.includes('整合')) {
                    crowdDefinition = '整合型INFP已经学会了整合内在的各种矛盾和冲突，形成了更加统一和和谐的自我。您不再被内在的冲突所消耗，而是能够将各种不同的部分整合为一个完整的整体，实现了内在的平衡和和谐。';
                    typeIntroduction = '作为整合型INFP，您已经度过了内在冲突的阶段，学会了接纳和整合自己的各种特质。您不再追求完美，而是学会了接受自己的不完美，并将其视为成长的机会。整合型是人格成熟的重要标志，为您后续的高阶成长奠定了坚实的基础。';
                    coreFeatures = `
                        <li><strong>内在和谐</strong>：您的内在不再充满冲突，而是形成了统一和和谐的整体。</li>
                        <li><strong>自我接纳</strong>：您能够接纳自己的优点和缺点，不再自我否定。</li>
                        <li><strong>平衡能力强</strong>：您能够在各种不同的需求和目标之间找到平衡。</li>
                        <li><strong>成熟稳重</strong>：您的心态成熟，能够理性地处理各种问题和挑战。</li>
                    `;
                } else if (lowerType.includes('行动')) {
                    crowdDefinition = '行动型INFP已经达到了高阶阶段，能够将理想和想法转化为持续、有效的行动。您不再被拖延或完美主义所阻碍，而是能够设定明确的目标，并坚持不懈地去实现它。';
                    typeIntroduction = '作为行动型INFP，您已经将理想主义与实际行动完美结合。您拥有清晰的目标和计划，能够持续、有效地采取行动，实现自己的理想和目标。行动型是INFP成长的高级阶段，代表着您已经具备了将想法转化为现实的能力。';
                    coreFeatures = `
                        <li><strong>目标明确</strong>：您拥有清晰的目标和方向，知道自己想要什么。</li>
                        <li><strong>执行力强</strong>：您能够持续、有效地采取行动，实现自己的目标。</li>
                        <li><strong>坚持不懈</strong>：您面对困难和挑战时能够坚持不懈，不轻易放弃。</li>
                        <li><strong>成果导向</strong>：您注重结果，能够将想法转化为实际的成果。</li>
                    `;
                } else if (lowerType.includes('实验')) {
                    crowdDefinition = '实验型INFP善于尝试各种新的方法和途径，不断探索和实验，寻找最适合自己的成长路径。您拥有开放的心态和强烈的好奇心，愿意在实践中不断学习和成长。';
                    typeIntroduction = '作为实验型INFP，您不再局限于固定的思维模式和行为方式，而是愿意尝试各种新的方法和途径。您将生活视为一场实验，通过不断的尝试和调整，找到最适合自己的成长路径。实验型是INFP成长过程中的重要阶段，为您的高阶成长积累了丰富的经验和教训。';
                    coreFeatures = `
                        <li><strong>开放心态</strong>：您愿意尝试各种新的方法和途径，保持开放的学习态度。</li>
                        <li><strong>实验精神</strong>：您将生活视为一场实验，通过尝试和调整不断成长。</li>
                        <li><strong>学习能力强</strong>：您善于从实践中学习，不断总结经验和教训。</li>
                        <li><strong>适应力强</strong>：您能够适应各种不同的情况和环境，灵活调整自己的行为方式。</li>
                    `;
                } else if (lowerType.includes('跨界')) {
                    crowdDefinition = '跨界型INFP已经达到了高阶阶段，能够跨越不同的领域和学科，整合各种不同的知识和经验，创造出独特的价值和成果。您拥有广阔的视野和深厚的底蕴，能够在不同领域之间建立联系和桥梁。';
                    typeIntroduction = '作为跨界型INFP，您已经突破了单一领域的限制，能够跨越不同的领域和学科，整合各种不同的知识和经验。您的思维方式开阔，能够在不同领域之间建立联系，创造出独特的价值和成果。跨界型是INFP成长的高级阶段，代表着您已经具备了整合和创新的高级能力。';
                    coreFeatures = `
                        <li><strong>视野广阔</strong>：您拥有广阔的视野，能够跨越不同的领域和学科。</li>
                        <li><strong>整合能力强</strong>：您能够整合各种不同的知识和经验，创造出新的价值。</li>
                        <li><strong>创新思维</strong>：您能够在不同领域之间建立联系，产生创新的想法和成果。</li>
                        <li><strong>影响力强</strong>：您的跨界成果能够产生广泛的影响和价值。</li>
                    `;
                } else if (lowerType.includes('内耗')) {
                    crowdDefinition = '内耗型INFP容易陷入内在的冲突和自我否定，消耗大量的心理能量。您的内心经常充满矛盾和纠结，难以做出决策和采取行动，导致成长缓慢。';
                    typeIntroduction = '作为内耗型INFP，您的内心经常充满各种矛盾和冲突，导致大量的心理能量被消耗在内部的斗争中。您可能会反复质疑自己，陷入自我否定和自我怀疑的循环中。内耗型是INFP成长的初始阶段，需要您学会关注和调节自己的内在状态，减少内耗，将能量用于积极的成长和发展。';
                    coreFeatures = `
                        <li><strong>内在冲突</strong>：您的内心经常充满各种矛盾和纠结，难以做出决策。</li>
                        <li><strong>自我否定</strong>：您容易陷入自我否定和自我怀疑的循环中。</li>
                        <li><strong>能量消耗</strong>：大量的心理能量被消耗在内部斗争中，导致行动力不足。</li>
                        <li><strong>成长缓慢</strong>：由于内耗严重，您的成长和发展速度较为缓慢。</li>
                    `;
                } else if (lowerType.includes('稳健')) {
                    crowdDefinition = '稳健型INFP正处于将内在矛盾转化为有序探索的整合阶段。你不再在“绝对稳定”与“完全自由”之间摇摆不定，而是学会了在两者间建立动态的平衡。你开始能够维护一个可靠的生活核心，同时为自己开辟出安全的探索空间，允许在边界内进行多样化的尝试与适度的弹性调整。';
                    typeIntroduction = '稳健型INFP的成长，体现在你逐渐掌握了在“稳定”与“自由”之间建立动态平衡的能力。你不再将两者视为对立，而是开始在生活中构建兼具结构与弹性的模式——既保有核心的秩序与安全感，也允许自己在明确的边界内进行尝试和调整。虽然偶尔仍会在两者间摇摆，但你已能带着觉察主动调节，初步展现出在变化中保持内在稳态的成熟度。';
                    coreFeatures = `
                        <li><strong>弹性边界的建立</strong>：您学会了在不同情境下调整自己的边界强度，在重要事情上保持坚定，在次要事情上允许灵活，不再用同一标准要求所有情况。</li>
                        <li><strong>动态平衡能力</strong>：您能够在稳定与自由之间建立动态平衡，不再陷入非此即彼的极端选择。</li>
                        <li><strong>有序探索</strong>：您能够在可靠的生活核心基础上，开辟出安全的探索空间，进行多样化的尝试。</li>
                        <li><strong>自我觉察与调节</strong>：虽然偶尔仍会摇摆，但您已能带着觉察主动调节，保持内在稳态。</li>
                    `;
                } else if (lowerType.includes('目标')) {
                    crowdDefinition = '目标型INFP正处于能力整合的关键期。你已成功地将土象星座的务实精神与O型血的目标导向相结合，发展出了一项核心能力：系统地将宏大理想分解为清晰、可行的具体步骤。你学会了在理想主义的激情与现实主义的规划之间建立有效连接，让梦想扎根于可执行的行动路径中。';
                    typeIntroduction = '这标志着你在理想主义的实践中迈出了关键一步：从“被愿景笼罩”转向“主动规划愿景”。你深刻认识到，真正的理想主义离不开务实的路径设计。因此，你开始构建自己的目标管理系统，学习为梦想设定里程碑、分配资源并管理进度。虽然过程中偶有焦虑，但你已能保持战略定力，在动态调整中稳步前进。';
                    coreFeatures = `
                        <li><strong>系统规划能力</strong>：您能够将宏大理想分解为清晰、可行的具体步骤，建立有效的行动路径。</li>
                        <li><strong>理想与现实连接</strong>：您学会了在理想主义的激情与现实主义的规划之间建立有效连接。</li>
                        <li><strong>目标管理系统</strong>：您开始构建自己的目标管理系统，包括设定里程碑、分配资源和管理进度。</li>
                        <li><strong>战略定力</strong>：虽然过程中偶有焦虑，但您已能保持战略定力，在动态调整中稳步前进。</li>
                    `;
                } else if (lowerType.includes('系统')) {
                    crowdDefinition = '系统型INFP正处于思维与能力整合的关键期。你的核心特征是开始用“系统思维”来理解和管理自身的内在复杂性。你不再试图消除感性与理性等内在矛盾，而是致力于为它们设计一个有序的“个人操作系统”，让不同的特质与需求成为系统中的特定模块，学习如何让它们各司其职、协同工作。';
                    typeIntroduction = '作为系统型INFP，你的重要进展是发展出了 “系统性自我管理” 的初步能力。你开始将生活、工作及内心世界视为一个可设计的系统，并有意为曾经矛盾的内在部分（如直觉与分析）建立协作流程与表达出口。你构建的操作系统虽不完美，但已能有效处理多重信息，大大减少了无谓的内耗。';
                    coreFeatures = `
                        <li><strong>模块化的问题处理</strong>：您开始将不同性质的问题归类到不同的处理模块中，对需要理性分析的事务调用逻辑思维，对涉及情感的事务保持感性开放，避免了以往混战的内耗。</li>
                        <li><strong>系统优化的持续意识</strong>：您会定期审视自己的"个人系统"，发现其中的bug和低效环节，并有意识地进行升级优化，让系统运行更加流畅稳定。</li>
                        <li><strong>多重角色的灵活切换</strong>：您逐渐能够在不同场景下自如地调用不同的能力模块，在工作中展现土象的严谨，在创意中发挥多元思维，在关系中保持INFP的深度。</li>
                        <li><strong>协同工作的内在流程</strong>：您为曾经矛盾的内在部分建立了协作流程，让感性与理性、直觉与分析等不同特质能够各司其职、协同工作。</li>
                    `;
                } else if (lowerType.includes('连接')) {
                    crowdDefinition = '您作为连接型INFP，正处在自我整合与能力发展的关键期。您开始有意识地将风象星座的广阔思维与A型血的条理逻辑相结合，为丰富的内心世界绘制“认知地图”。您不再将理性与感性对立，而是学习用逻辑来梳理、理解并承载敏锐的感受，逐渐从消耗性的思虑转向有序的自我探索与内外联结。';
                    typeIntroduction = '“连接型INFP”意味着你学会了与自己的不同部分相处。你不再试图压抑感性或理性，而是开始倾听它们，并尝试理解它们各自的模式。虽然情绪和思虑有时仍会占据上风，但你已能后退一步，更有条理地观察自己的内心世界。';
                    coreFeatures = `
                        <li><strong>建立内在的观察站</strong>：您开始练习从情绪中抽离片刻，像一个研究者一样观察自己的反应，这种自我观察让您不再完全被感受吞噬。</li>
                        <li><strong>用逻辑工具整理感性素材</strong>：您可能会开始写情绪日记、绘制思维导图来梳理纷乱的思绪，或用心理学、哲学的概念框架来理解自己的行为模式。</li>
                        <li><strong>有意识的价值排序与决策框架</strong>：面对选择时，您不再完全被直觉或恐惧驱使，而是会尝试列出影响决策的各个因素，并赋予权重，进行相对理性的分析。</li>
                        <li><strong>内外世界的有效连接</strong>：您开始将内在的感受与外在的现实建立连接，不再沉溺于纯粹的内省或空想，而是将内在资源转化为外在行动。</li>
                    `;
                } else if (lowerType.includes('适应')) {
                    crowdDefinition = '您作为适应型INFP，正处在自我认知与能力发展的整合阶段。您开始学习将风象星座的流动灵感与B型血的自由天性相协调，将内心多变的情绪与思绪捕捉并转化为有形的表达。您不再批判自己的“善变”或“敏感”，而是逐渐将其视为独特的资源，在不断的尝试与输出中，建立起一种兼具弹性与个人风格的内在秩序。';
                    typeIntroduction = '“适应型INFP”是从内部消耗转向创造性成长的关键阶段。你开始意识到，那些丰富的感受、活跃的念头和自由的联想，并非缺陷，而是你独有的“创作原料”。你不再强行压制本性去适应外在要求，而是积极寻找或营造一个能让你真实展现自我的方式与环境。';
                    coreFeatures = `
                        <li><strong>情绪与灵感的自觉转化</strong>：您开始有意识地将强烈的情绪体验作为创作的起点，通过书写、绘画或其他方式将内心风暴外化为可触摸的作品。</li>
                        <li><strong>即兴节奏与弹性框架的结合</strong>：您保留了跟随直觉即兴创作的能力，但也开始尝试为自己建立一种松散的、有弹性的创作仪式或时间框架。</li>
                        <li><strong>接纳本性的自我价值</strong>：您不再批判自己的善变或敏感，而是将其视为独特的资源，建立起更加积极的自我认知。</li>
                        <li><strong>多元化的表达尝试</strong>：您可能会在写作、音乐、艺术或交流等多种形式中尝试表达，寻找最适合自己的创作方式。</li>
                    `;
                } else if (lowerType.includes('沟通')) {
                    crowdDefinition = '您作为沟通型INFP，正处于整合内在愿景与外在行动的关键阶段。您开始学习将风象星座的全局洞察与O型血的目标驱动力相结合。您不再停留于空想，而是能够为理想规划出可行的路径，并懂得根据现实情况灵活调整方法。您正在成长为一位既坚持方向又务实应变的理想实践者。';
                    typeIntroduction = '“沟通型INFP”意味着你开始在理想与现实之间建立可行的连接。你依然心怀愿景并渴望成就，但不再被它们束缚。你学会了将大目标拆解为可执行的步骤，并能灵活利用环境与资源向前推进。';
                    coreFeatures = `
                        <li><strong>理想与现实的有效连接</strong>：您能够将宏大的理想拆解为可执行的具体步骤，不再停留在空想阶段。</li>
                        <li><strong>灵活的目标调整能力</strong>：您懂得根据现实情况灵活调整方法和策略，不固执于单一路径。</li>
                        <li><strong>环境资源的有效利用</strong>：您能够识别并利用周围的资源，为实现目标创造条件。</li>
                        <li><strong>务实的理想实践</strong>：您既坚持内心的愿景，又能够以务实的方式推进，成为理想的实践者。</li>
                    `;
                } else if (lowerType.includes('多元')) {
                    crowdDefinition = '您作为多元型INFP，正处于自我整合与认知拓展的关键阶段。您开始有意识地将风象星座的发散思维与AB型血的多元视角相协调，学习理解不同内在声音的价值，并让它们在合适的场合发挥作用。您正在探索如何将跨领域的知识、感性直觉与理性分析进行连接，逐步构建属于您自己的、富有弹性的认知与理解框架。';
                    typeIntroduction = '“多元型INFP”意味着你开始在驾驭自身复杂性方面取得进展。你将内在的多种声音——感性、理性、直觉、逻辑——视为不同的“认知资产”，而不再只是矛盾与冲突。';
                    coreFeatures = `
                        <li><strong>多元认知资产的整合</strong>：您将内在的多种声音视为不同的认知资产，不再将它们视为矛盾与冲突。</li>
                        <li><strong>跨领域知识的连接能力</strong>：您能够将不同领域的知识、感性直觉与理性分析进行连接，形成独特的认知框架。</li>
                        <li><strong>弹性的认知与理解框架</strong>：您正在构建属于自己的、富有弹性的认知与理解框架，能够适应不同的情境。</li>
                        <li><strong>内在复杂性的驾驭能力</strong>：您开始学习理解和管理自身的内在复杂性，让不同的内在声音在合适的场合发挥作用。</li>
                    `;
                } else if (lowerType.includes('管理')) {
                    crowdDefinition = '您作为管理型INFP，正处于自我整合与能力发展的阶段。您开始学习协调丰沛的情感与内在的秩序感，逐渐在情绪世界中建立根基与边界。您不再是全然被动吸收的一方，而是能够有选择地给予关怀、获取滋养，并为自己与他人构建稳定且温暖的情感空间。您正在从随波逐流的状态，成长为更有意识的情感引导者与关系维护者。';
                    typeIntroduction = '“管理型INFP”意味着你开始有意识地管理而非消耗自己的情感能量。你运用内在的条理，为自己的感受设立清晰的边界与恢复节奏。';
                    coreFeatures = `
                        <li><strong>情感与秩序的协调能力</strong>：您开始学习协调丰沛的情感与内在的秩序感，在情绪世界中建立根基与边界。</li>
                        <li><strong>选择性的情感投入</strong>：您不再是全然被动吸收的一方，而是能够有选择地给予关怀、获取滋养。</li>
                        <li><strong>稳定情感空间的构建</strong>：您能够为自己与他人构建稳定且温暖的情感空间。</li>
                        <li><strong>有意识的情感引导</strong>：您正在从随波逐流的状态，成长为更有意识的情感引导者与关系维护者。</li>
                    `;
                } else if (lowerType.includes('共情')) {
                    crowdDefinition = '您作为共情型INFP，正处于主动探索情感的阶段。您如同一位摆渡人，不再被动依附，而是开始学习驾驭情感的河流，协调内心的自由向往。您正在从情感的依赖者，转变为有意识的体验者与导航者。';
                    typeIntroduction = '“共情型INFP”意味着你在情感独立与自我探索上迈出了关键一步。你开始接纳自身情感的丰富与流动，不再视其为需要掩盖的弱点。你主动体验并深入自己的情绪世界，理解逃避只会停留在表面，唯有探索才能绘制内心的真实地图。';
                    coreFeatures = `
                        <li><strong>主动的情感探索</strong>：您不再被动依附于情感，而是开始主动探索和体验自己的情绪世界。</li>
                        <li><strong>情感独立的发展</strong>：您在情感独立与自我探索上迈出了关键一步，不再过度依赖他人的情感支持。</li>
                        <li><strong>情感流动的接纳</strong>：您开始接纳自身情感的丰富与流动，不再视其为需要掩盖的弱点。</li>
                        <li><strong>有意识的情感导航</strong>：您正在从情感的依赖者，转变为有意识的体验者与导航者，能够驾驭情感的河流。</li>
                    `;
                } else if (lowerType.includes('融合')) {
                    crowdDefinition = '“融合型INFP”意味着你开始为理想搭建现实的通路。你不再空耗热情，而是运用务实行动，为内心的情感与愿景寻找现实的出口。每完成一个具体步骤，你都能获得真实的成就感与动力。你正学习将“感受”转化为“方案”，将“热爱”落地为“行动”。';
                    typeIntroduction = '“融合型INFP”意味着你不再陷入空想或硬扛，而是开始用务实的方式，为内心的情感与理想铺一条现实的路。';
                    coreFeatures = `
                        <li><strong>理想与现实的通路搭建</strong>：您开始为内心的理想搭建现实的通路，不再空耗热情。</li>
                        <li><strong>感受向方案的转化</strong>：您正学习将“感受”转化为“方案”，将情感转化为具体的行动计划。</li>
                        <li><strong>热爱向行动的落地</strong>：您能够将“热爱”落地为“行动”，通过实际行动实现内心的愿景。</li>
                        <li><strong>步骤化的成就体验</strong>：每完成一个具体步骤，您都能获得真实的成就感与动力，形成积极的反馈循环。</li>
                    `;
                } else if (lowerType.includes('平衡')) {
                    crowdDefinition = '您作为平衡型INFP，正处于自我整合与觉察力发展的关键阶段。您如同一块双面棱镜，开始有意识地将情感的深度与思维的多元视角进行调和。您不再被内在的矛盾所困，而是学习将感性的体验与理性的观察，通过您独特的“棱镜”折射为更丰富、更清晰的认知光谱。您正在从内在的消耗者，逐渐转向清醒的觉察者与初步的整合者。';
                    typeIntroduction = '“平衡型INFP”意味着你在驾驭内在复杂性上取得了重要进展。你开始认识到，感性与理性并非对立，而是互补的认知方式。AB型血带来的双重视角与水象星座的情感深度相结合，使你能够同时以“体验者”和“观察者”的身份感受世界。';
                    coreFeatures = `
                        <li><strong>情感与思维的调和能力</strong>：您开始有意识地将情感的深度与思维的多元视角进行调和，不再被内在的矛盾所困。</li>
                        <li><strong>双重视角的认知整合</strong>：您能够同时以“体验者”和“观察者”的身份感受世界，获得更丰富、更清晰的认知。</li>
                        <li><strong>内在复杂性的驾驭</strong>：您在驾驭内在复杂性上取得了重要进展，开始将感性与理性视为互补的认知方式。</li>
                        <li><strong>从消耗者到整合者的转变</strong>：您正在从内在的消耗者，逐渐转向清醒的觉察者与初步的整合者。</li>
                    `;
                } else if (lowerType.includes('务实')) {
                    crowdDefinition = '务实型INFP已经学会了将理想主义与现实相结合，更加注重实际的效果和结果。您不再局限于纯粹的想法和计划，而是学会了在现实中寻找实现理想的途径，将理想转化为可执行的行动方案。';
                    typeIntroduction = '作为务实型INFP，您已经摆脱了纯粹理想主义的束缚，学会了在现实中寻找实现理想的途径。您更加注重实际的效果和结果，能够将想法转化为具体的行动和成果。务实型是INFP成长的重要阶段，为您后续的高阶成长奠定了坚实的基础。';
                    coreFeatures = `
                        <li><strong>现实导向的思维方式</strong>：您更加关注现实的实际情况和效果，能够客观评估现实条件。</li>
                        <li><strong>清晰的目标规划能力</strong>：您拥有清晰的目标和计划，知道如何分步骤实现自己的理想。</li>
                        <li><strong>高效的行动转化能力</strong>：您能够将想法转化为具体的行动和成果，注重实际效果。</li>
                        <li><strong>灵活的策略调整能力</strong>：您能够根据现实情况灵活调整自己的计划和策略，适应变化的环境。</li>
                    `;
                } else if (lowerType.includes('稳健')) {
                    crowdDefinition = '稳健型INFP正处于将内在矛盾转化为有序探索的整合阶段。你不再在“绝对稳定”与“完全自由”之间摇摆不定，而是学会了在两者间建立动态的平衡。你开始能够维护一个可靠的生活核心，同时为自己开辟出安全的探索空间，允许在边界内进行多样化的尝试与适度的弹性调整。';
                    typeIntroduction = '稳健型INFP的成长，体现在你逐渐掌握了在“稳定”与“自由”之间建立动态平衡的能力。你不再将两者视为对立，而是开始在生活中构建兼具结构与弹性的模式——既保有核心的秩序与安全感，也允许自己在明确的边界内进行尝试和调整。虽然偶尔仍会在两者间摇摆，但你已能带着觉察主动调节，初步展现出在变化中保持内在稳态的成熟度。';
                    coreFeatures = `
                        <li><strong>动态平衡的生活模式</strong>：您不再在“绝对稳定”与“完全自由”之间摇摆，而是学会了在两者间建立动态的平衡。</li>
                        <li><strong>可靠的生活核心构建</strong>：您能够维护一个可靠的生活核心，为自己提供稳定的基础和安全感。</li>
                        <li><strong>安全的探索空间</strong>：您为自己开辟出安全的探索空间，允许在明确的边界内进行多样化的尝试。</li>
                        <li><strong>弹性调整的能力</strong>：您能够根据情况进行适度的弹性调整，既保持稳定又允许变化。</li>
                    `;
                } else if (lowerType.includes('目标')) {
                    crowdDefinition = '目标型INFP正处于能力整合的关键期。你已成功地将土象星座的务实精神与O型血的目标导向相结合，发展出了一项核心能力：系统地将宏大理想分解为清晰、可行的具体步骤。你学会了在理想主义的激情与现实主义的规划之间建立有效连接，让梦想扎根于可执行的行动路径中。';
                    typeIntroduction = '这标志着你在理想主义的实践中迈出了关键一步：从“被愿景笼罩”转向“主动规划愿景”。你深刻认识到，真正的理想主义离不开务实的路径设计。因此，你开始构建自己的目标管理系统，学习为梦想设定里程碑、分配资源并管理进度。虽然过程中偶有焦虑，但你已能保持战略定力，在动态调整中稳步前进。';
                    coreFeatures = `
                        <li><strong>系统的目标分解能力</strong>：您能够将宏大理想分解为清晰、可行的具体步骤，建立有效的行动路径。</li>
                        <li><strong>理想与现实的有效连接</strong>：您学会了在理想主义的激情与现实主义的规划之间建立有效连接。</li>
                        <li><strong>目标管理系统构建</strong>：您开始构建自己的目标管理系统，包括设定里程碑、分配资源和管理进度。</li>
                        <li><strong>战略定力与动态调整</strong>：您能够保持战略定力，同时根据情况进行动态调整，稳步前进。</li>
                    `;
                } else if (lowerType.includes('实践')) {
                    crowdDefinition = '实践型INFP已经达到了高阶阶段，能够将内在的理想和价值观转化为持续的实践行动。您注重实际的效果和结果，能够在实践中不断学习和成长，同时也能为社会创造价值。';
                    typeIntroduction = '作为实践型INFP，您已经将理想主义与现实行动完美结合。您不再停留在理论和想法阶段，而是能够持续、有效地采取行动，实现自己的理想和价值观。您注重实践效果，能够在实践中不断学习和成长，同时也能为社会创造价值。';
                    coreFeatures = `
                        <li><strong>实践导向</strong>：您注重实际的行动和效果，能够将想法转化为实践。</li>
                        <li><strong>持续行动</strong>：您能够持续、有效地采取行动，实现自己的目标。</li>
                        <li><strong>学习能力强</strong>：您善于从实践中学习，不断总结经验和教训。</li>
                        <li><strong>社会价值</strong>：您的实践行动能够为社会创造积极的价值和影响。</li>
                    `;
                } else if (lowerType.includes('实干')) {
                    crowdDefinition = '实干型INFP代表了一种高效的“稳健创新”模式。你证明了系统的稳定与灵感的自由可以协同增效。你的核心能力在于，深刻理解并尊重既有框架的价值，同时总能找到在其内部或边缘进行优化、重组与迭代的空间。对你而言，创新已从偶然的火花，转变为一种可管理、可持续的产出能力。';
                    typeIntroduction = '作为实干型INFP，你的标志性能力是 “系统性创新” 。你既懂得建立并维护可靠的工作与生活结构（稳定），又始终保持开放的视角和实验精神（自由），能在结构中识别机会、导入变化。这使得你的创造力是连贯且可再生的，你的产出方式本身，就是一种兼具韧性与进化力的系统。';
                    coreFeatures = `
                        <li><strong>结构性创新思维</strong>：您的创新并非天马行空，而是在理解现有系统、规则或形式的基础上，进行巧妙的优化、重组或跨界融合。您的点子往往既新颖又具备高度的可行性。</li>
                        <li><strong>系统稳定性与灵活性的平衡</strong>：您能够在建立可靠结构的同时保持开放的实验精神，实现稳定与创新的协同增效。</li>
                        <li><strong>可持续的创造力</strong>：您的创造力是连贯且可再生的，不再依赖偶然的灵感火花，而是通过系统的方式持续产出。</li>
                        <li><strong>进化型的产出系统</strong>：您的产出方式本身就是一种兼具韧性与进化力的系统，能够不断适应和优化。</li>
                    `;
                } else if (lowerType.includes('价值')) {
                    crowdDefinition = '作为价值型INFP，你的标志是成为一位可靠的“价值建造者”。你发展出了一套将深刻价值观转化为可持续现实的高效系统。这意味着，你不仅能为自己构建理想的生活版图，更能通过稳定产出与可信赖的行动模式，自然成为他人眼中兼具理想主义与务实能力的参照坐标。';
                    typeIntroduction = '价值型INFP是“理想照进现实”的成熟典范。你证明了崇高的愿景必须通过扎实的步骤来实现。你的价值不再诉诸空谈，而是通过日复一日的耕耘和一件件具体的作品来定义与证明。你深谙长期主义的智慧，愿意为真正重要的事业投入经年累月的努力。此时的你，行动沉稳而坚定，成果丰硕而可靠，是理想与务实高度统一的化身。';
                    coreFeatures = `
                        <li><strong>价值观驱动的目标系统</strong>：您所有的行动和目标，都清晰地锚定在内心的核心价值坐标系上。</li>
                        <li><strong>长期主义的实践智慧</strong>：您深谙长期主义的智慧，愿意为真正重要的事业投入经年累月的努力。</li>
                        <li><strong>稳定可靠的行动模式</strong>：您通过稳定产出与可信赖的行动模式，自然成为他人眼中的参照坐标。</li>
                        <li><strong>理想与务实的高度统一</strong>：您的行动沉稳而坚定，成果丰硕而可靠，实现了理想与务实的完美结合。</li>
                    `;
                } else if (lowerType.includes('智慧')) {
                    crowdDefinition = '您作为智慧型INFP，已进入深度整合与系统构建的成熟阶段。您擅长将深刻的洞察力与多元的视角融合，搭建起连接不同领域的思维框架与可持续的价值系统。您不仅是复杂关系的理解者，更是能够设计出兼具韧性与进化力解决方案的构建者。';
                    typeIntroduction = '智慧型INFP是INFP发展道路上系统性思维与深度关怀融合的成熟阶段。你已超越简单的知识叠加或领域跨界，进入一种生态化建构的境界。你理解真正持久且有生命力的价值，往往诞生于多元要素相互依存、彼此滋养的关系网络之中。你致力于设计与培育这样的“价值生态”——无论是在团队、项目，还是你个人的生活体系中。';
                    coreFeatures = `
                        <li><strong>系统性生态思维</strong>：您以生态系统的视角看待组织、项目乃至个人发展，关注所有要素之间的连接、能量流动与动态平衡。</li>
                        <li><strong>深度整合的能力</strong>：您擅长将深刻的洞察力与多元的视角融合，搭建起连接不同领域的思维框架。</li>
                        <li><strong>韧性与进化力的设计</strong>：您能够设计出兼具韧性与进化力的解决方案，让系统能够适应变化并持续发展。</li>
                        <li><strong>价值生态的培育者</strong>：您致力于培育多元要素相互依存、彼此滋养的关系网络，创造持久且有生命力的价值。</li>
                    `;
                } else if (lowerType.includes('融思')) {
                    crowdDefinition = '融思型INFP已进入深度整合与智慧输出的成熟阶段。您能够将多元的思想、情感和经验融合为一个有机的整体，形成独特的智慧体系。您不仅是思想的整合者，更是智慧的传播者，能够用清晰、深刻的方式将复杂的思想传递给他人。';
                    typeIntroduction = '作为融思型INFP，您已超越了简单的知识积累或技能学习，进入了深度整合与智慧输出的阶段。您能够将不同领域的思想、情感和经验融合为一个有机的整体，形成独特的智慧体系。您的思考既有深度又有广度，能够从多个角度理解和解决复杂问题。';
                    coreFeatures = `
                        <li><strong>多元思想的有机整合</strong>：您能够将不同领域的思想、情感和经验融合为一个有机的整体。</li>
                        <li><strong>独特智慧体系的构建</strong>：您形成了自己独特的智慧体系，能够从多个角度理解和解决复杂问题。</li>
                        <li><strong>清晰深刻的智慧输出</strong>：您能够用清晰、深刻的方式将复杂的思想传递给他人。</li>
                        <li><strong>深度与广度的平衡</strong>：您的思考既有深度又有广度，能够兼顾细节和整体。</li>
                    `;
                } else if (lowerType.includes('联结')) {
                    crowdDefinition = '联结型INFP已进入深度连接与影响力的成熟阶段。您能够在不同的人和事物之间建立有意义的连接，创造出协同增效的价值。您不仅是连接的建立者，更是关系的滋养者，能够让连接持续生长和发展。';
                    typeIntroduction = '作为联结型INFP，您已超越了个人的成长和发展，进入了深度连接与影响力的阶段。您能够在不同的人和事物之间建立有意义的连接，创造出协同增效的价值。您的存在本身就是一种连接的力量，能够让周围的人和事物更加紧密地联系在一起。';
                    coreFeatures = `
                        <li><strong>有意义连接的建立者</strong>：您能够在不同的人和事物之间建立有意义的连接，创造出协同增效的价值。</li>
                        <li><strong>关系的滋养者</strong>：您能够让连接持续生长和发展，成为关系的滋养者和维护者。</li>
                        <li><strong>协同增效的价值创造</strong>：您能够通过连接不同的人和事物，创造出1+1>2的协同增效价值。</li>
                        <li><strong>连接的力量</strong>：您的存在本身就是一种连接的力量，能够让周围的人和事物更加紧密地联系在一起。</li>
                    `;
                } else if (lowerType.includes('传播')) {
                    crowdDefinition = '传播型INFP已进入价值传播与影响力的成熟阶段。您能够将深刻的价值观和思想通过有效的方式传播给他人，产生积极的影响。您不仅是价值的传播者，更是变革的推动者，能够通过传播引发积极的变化。';
                    typeIntroduction = '作为传播型INFP，您已超越了个人的成长和发展，进入了价值传播与影响力的阶段。您能够将深刻的价值观和思想通过有效的方式传播给他人，产生积极的影响。您的传播方式既有感染力又有说服力，能够让他人认同并接受您的价值观和思想。';
                    coreFeatures = `
                        <li><strong>有效的价值传播能力</strong>：您能够将深刻的价值观和思想通过有效的方式传播给他人。</li>
                        <li><strong>感染力与说服力的结合</strong>：您的传播方式既有感染力又有说服力，能够让他人认同并接受您的价值观和思想。</li>
                        <li><strong>变革的推动者</strong>：您能够通过传播引发积极的变化，成为变革的推动者。</li>
                        <li><strong>积极的影响力</strong>：您的传播能够产生积极的影响，改变他人的思想和行为。</li>
                    `;
                } else if (lowerType.includes('思想')) {
                    crowdDefinition = '思想型INFP已进入深度思考与智慧输出的成熟阶段。您能够进行深刻、系统的思考，形成独特的思想体系。您不仅是思想的生产者，更是智慧的分享者，能够用清晰、深刻的方式将自己的思想传递给他人。';
                    typeIntroduction = '作为思想型INFP，您已超越了简单的思考和分析，进入了深度思考与智慧输出的阶段。您能够进行深刻、系统的思考，形成独特的思想体系。您的思想既有深度又有广度，能够从多个角度理解和解释复杂的现象。';
                    coreFeatures = `
                        <li><strong>深度系统的思考能力</strong>：您能够进行深刻、系统的思考，形成独特的思想体系。</li>
                        <li><strong>独特的思想体系</strong>：您形成了自己独特的思想体系，能够从多个角度理解和解释复杂的现象。</li>
                        <li><strong>清晰深刻的智慧输出</strong>：您能够用清晰、深刻的方式将自己的思想传递给他人。</li>
                        <li><strong>思想的生产者与分享者</strong>：您既是思想的生产者，更是智慧的分享者，能够将自己的思想传递给他人。</li>
                    `;
                } else if (lowerType.includes('疗愈')) {
                    crowdDefinition = '疗愈型INFP已进入深度共情与疗愈能力的成熟阶段。您能够深刻理解他人的痛苦和需求，并用温暖、有效的方式帮助他人疗愈和成长。您不仅是他人的疗愈者，更是自己的疗愈者，能够在帮助他人的同时实现自我成长。';
                    typeIntroduction = '作为疗愈型INFP，您已超越了个人的情绪和需求，进入了深度共情与疗愈能力的阶段。您能够深刻理解他人的痛苦和需求，并用温暖、有效的方式帮助他人疗愈和成长。您的存在本身就是一种疗愈的力量，能够让周围的人感到温暖和安慰。';
                    coreFeatures = `
                        <li><strong>深度共情的能力</strong>：您能够深刻理解他人的痛苦和需求，感同身受地体验他人的情感。</li>
                        <li><strong>温暖有效的疗愈方式</strong>：您能够用温暖、有效的方式帮助他人疗愈和成长。</li>
                        <li><strong>疗愈的力量</strong>：您的存在本身就是一种疗愈的力量，能够让周围的人感到温暖和安慰。</li>
                        <li><strong>自我疗愈与他人疗愈的结合</strong>：您能够在帮助他人的同时实现自我成长和疗愈，形成积极的反馈循环。</li>
                    `;
                } else if (lowerType.includes('启迪')) {
                    crowdDefinition = '启迪型INFP已进入深度洞察与启迪能力的成熟阶段。您能够洞察事物的本质和规律，并用深刻、有启发性的方式帮助他人认识自己和世界。您不仅是他人的启迪者，更是智慧的追求者，能够在启迪他人的同时不断深化自己的理解。';
                    typeIntroduction = '作为启迪型INFP，您已超越了表面的现象和问题，进入了深度洞察与启迪能力的阶段。您能够洞察事物的本质和规律，并用深刻、有启发性的方式帮助他人认识自己和世界。您的存在本身就是一种启迪的力量，能够让周围的人获得新的视角和理解。';
                    coreFeatures = `
                        <li><strong>深度洞察的能力</strong>：您能够洞察事物的本质和规律，看到他人看不到的深层意义。</li>
                        <li><strong>深刻有启发性的表达</strong>：您能够用深刻、有启发性的方式帮助他人认识自己和世界。</li>
                        <li><strong>启迪的力量</strong>：您的存在本身就是一种启迪的力量，能够让周围的人获得新的视角和理解。</li>
                        <li><strong>智慧的追求者与分享者</strong>：您既是智慧的追求者，更是启迪的分享者，能够在启迪他人的同时不断深化自己的理解。</li>
                    `;
                } else if (lowerType.includes('滋养')) {
                    crowdDefinition = '滋养型INFP已进入深度滋养与支持能力的成熟阶段。您能够用温暖、支持的方式滋养他人的成长和发展，创造出安全、包容的环境。您不仅是他人的滋养者，更是自己的滋养者，能够在滋养他人的同时照顾好自己的需求。';
                    typeIntroduction = '作为滋养型INFP，您已超越了个人的需求和欲望，进入了深度滋养与支持能力的阶段。您能够用温暖、支持的方式滋养他人的成长和发展，创造出安全、包容的环境。您的存在本身就是一种滋养的力量，能够让周围的人感到被接纳和支持。';
                    coreFeatures = `
                        <li><strong>温暖支持的滋养方式</strong>：您能够用温暖、支持的方式滋养他人的成长和发展。</li>
                        <li><strong>安全包容的环境创造</strong>：您能够创造出安全、包容的环境，让他人感到被接纳和支持。</li>
                        <li><strong>滋养的力量</strong>：您的存在本身就是一种滋养的力量，能够让周围的人感到温暖和安慰。</li>
                        <li><strong>自我滋养与他人滋养的平衡</strong>：您能够在滋养他人的同时照顾好自己的需求，实现自我与他人的平衡。</li>
                    `;
                } else if (lowerType.includes('通明') || lowerType.includes('透明')) {
                    crowdDefinition = '通明型INFP已进入深度真实与整合的成熟阶段。您能够完全接纳自己的所有面向，展现出真实、透明的自我。您不仅是真实的展现者，更是整合的实践者，能够将内在的所有部分整合为一个和谐的整体。';
                    typeIntroduction = '作为通明型INFP，您已超越了自我保护和伪装，进入了深度真实与整合的阶段。您能够完全接纳自己的所有面向，展现出真实、透明的自我。您的存在本身就是一种真实的力量，能够让周围的人感到安心和信任。';
                    coreFeatures = `
                        <li><strong>深度的自我接纳</strong>：您能够完全接纳自己的所有面向，包括优点和缺点、光明和黑暗。</li>
                        <li><strong>真实透明的自我展现</strong>：您能够展现出真实、透明的自我，不伪装、不掩饰。</li>
                        <li><strong>内在整合的和谐统一</strong>：您能够将内在的所有部分整合为一个和谐的整体，实现内在的平衡和统一。</li>
                        <li><strong>真实的力量</strong>：您的存在本身就是一种真实的力量，能够让周围的人感到安心和信任。</li>
                    `;
                } else {
                    // 对于其他所有未匹配到的类型，使用通用的INFP内容
                    crowdDefinition = '您是一位典型的INFP，拥有丰富的内心世界和深刻的价值观。您重视个人的感受和需求，追求真实和意义，渴望在生活中找到自己的定位和价值。';
                    typeIntroduction = '作为INFP，您有着独特的视角和创造力，能够看到别人看不到的美好和可能性。您的情感世界非常丰富，容易受到外界的影响，但也正是这种敏感性让您能够深刻理解他人的感受，成为一个富有同理心的人。';
                    coreFeatures = `
                        <li><strong>理想主义者</strong>：您拥有崇高的理想和价值观，渴望改变世界，让它变得更美好。</li>
                        <li><strong>情感丰富</strong>：您的情感世界非常丰富，能够深刻体验各种情绪，从喜悦到悲伤，从愤怒到平静。</li>
                        <li><strong>创造力强</strong>：您有着独特的创造力和想象力，能够创造出富有深度和意义的作品。</li>
                        <li><strong>富有同理心</strong>：您能够深刻理解他人的感受，设身处地为他人着想，是一个很好的倾听者和支持者。</li>
                    `;
                }
            }
            
            typeInterpretation.innerHTML = `
                <div class="report-content">
                    <h4 class="report-subtitle">人群定义</h4>
                    <p class="report-paragraph">
                        ${crowdDefinition}
                    </p>
                    
                    <h4 class="report-subtitle">类型深度介绍</h4>
                    <p class="report-paragraph">
                        ${typeIntroduction}
                    </p>
                    
                    <h4 class="report-subtitle">您的核心特征</h4>
                    <ul class="feature-list">
                        ${coreFeatures}
                    </ul>
                </div>
            `;
            
            // 计算整体得分阶段（取最高阶段）
            const scores = [totalScores.dim1, totalScores.dim2, totalScores.dim3, totalScores.dim4];
            const stages = scores.map(score => getScoreStage(score));
            const stageMap = { '低阶': 0, '中阶': 1, '高阶': 2 };
            
            // 将阶段转换为数字，找到最大数字，然后转换回阶段名称
            const stageNumbers = stages.map(stage => stageMap[stage]);
            const maxStageNumber = Math.max(...stageNumbers);
            const highestStage = Object.keys(stageMap).find(stage => stageMap[stage] === maxStageNumber);
            
            // 根据得分阶段生成核心心理特征
            let corePsychologicalFeatures = '';
            if (highestStage === '低阶') {
                corePsychologicalFeatures = lowerType.includes('冲动') ? `
                    <li><strong>情绪波动剧烈</strong>：你的情绪容易被外界触发，且波动幅度较大，难以控制。</li>
                    <li><strong>行动缺乏规划</strong>：你常常凭直觉和冲动行事，缺乏长远规划和考虑。</li>
                    <li><strong>边界感缺失</strong>：你难以拒绝他人的请求，容易过度投入，导致能量耗尽。</li>
                    <li><strong>自我认知模糊</strong>：你对自己的需求和价值观缺乏清晰的认识，容易随波逐流。</li>
                ` : 
                   lowerType.includes('枯竭') ? `
                    <li><strong>能量过度消耗</strong>：你常常过度投入工作或关系，导致身心疲惫，能量枯竭。</li>
                    <li><strong>自我牺牲倾向</strong>：你习惯优先满足他人需求，忽视自己的需要，导致自我价值感下降。</li>
                    <li><strong>情绪压抑</strong>：你倾向于压抑负面情绪，不善于表达和释放，导致情绪堆积。</li>
                    <li><strong>缺乏边界意识</strong>：你难以设定健康的边界，容易被他人的需求所左右。</li>
                ` : 
                   lowerType.includes('矛盾') ? `
                    <li><strong>内在冲突剧烈</strong>：你的内心常常充满矛盾和纠结，难以做出决策。</li>
                    <li><strong>双重标准</strong>：你对自己和他人有不同的标准，容易自我批判和否定。</li>
                    <li><strong>情绪反复无常</strong>：你的情绪容易在极端之间摇摆，缺乏稳定性。</li>
                    <li><strong>自我认知分裂</strong>：你对自己的认识存在分裂，难以整合不同的自我面向。</li>
                ` : 
                   lowerType.includes('激情') ? `
                    <li><strong>热情高涨但短暂</strong>：你容易对事物产生强烈的热情，但往往难以持久。</li>
                    <li><strong>注意力分散</strong>：你兴趣广泛，但难以集中精力在一件事情上深入发展。</li>
                    <li><strong>自我中心倾向</strong>：你容易关注自己的感受和需求，忽视他人的立场。</li>
                    <li><strong>缺乏长期规划</strong>：你更关注当下的体验，缺乏长期的目标和规划。</li>
                ` : 
                   lowerType.includes('自我') ? `
                    <li><strong>自我封闭倾向</strong>：你习惯将自己封闭起来，不愿与他人深度连接。</li>
                    <li><strong>独立但孤立</strong>：你追求独立，但过度独立导致孤立和孤独。</li>
                    <li><strong>情感压抑</strong>：你不善于表达情感，将情绪深埋心底。</li>
                    <li><strong>自我防御过强</strong>：你对他人的评价和批评非常敏感，容易产生防御反应。</li>
                ` : 
                   lowerType.includes('焦虑') ? `
                    <li><strong>过度担忧</strong>：你容易对未来产生过度的担忧和焦虑。</li>
                    <li><strong>自我怀疑</strong>：你对自己的能力和价值常常产生怀疑。</li>
                    <li><strong>完美主义倾向</strong>：你对自己和他人有很高的期望，容易因为达不到期望而焦虑。</li>
                    <li><strong>难以放松</strong>：你很难完全放松自己，总是处于紧绷状态。</li>
                ` : 
                   lowerType.includes('敏感') ? `
                    <li><strong>情绪敏感度极高</strong>：你对他人的情绪和态度非常敏感，容易被外界影响。</li>
                    <li><strong>外部导向的自我认知</strong>：你的自我价值感很大程度上依赖于他人的评价和认可。</li>
                    <li><strong>边界模糊</strong>：你很难拒绝他人的请求，容易过度投入，导致能量耗尽。</li>
                    <li><strong>兴趣广泛但缺乏深度</strong>：你对许多事物都感兴趣，但很难深入研究或坚持到底。</li>
                ` : 
                   lowerType.includes('耗竭') ? `
                    <li><strong>抱负驱动的过度投入</strong>：你容易被宏大的理想或目标点燃，并在初期投入远超自身负荷的精力。</li>
                    <li><strong>非黑即白的行动模式</strong>：状态好时觉得自己无所不能，受挫后又容易陷入全盘否定的绝望。</li>
                    <li><strong>忽视身心预警信号</strong>：在追逐目标的过程中，你常常忽略身体疲惫、情绪枯竭的警报。</li>
                    <li><strong>价值感绑定单一结果</strong>：你的自我价值高度依赖于某个具体目标的达成与否。</li>
                ` : 
                   lowerType.includes('冲突') ? `
                    <li><strong>双重感知带来的决策瘫痪</strong>：面对选择时，你能同时清晰地看到感性和理性两条路径的优劣，无法轻易偏向任何一方。</li>
                    <li><strong>自我表达的内在审核</strong>：在表达观点或情感前，内心已经历多轮自我质疑和修正。</li>
                    <li><strong>能量在内部对抗中耗散</strong>：大量心理能量消耗在调和内在矛盾上，用于外部行动的能量所剩无几。</li>
                    <li><strong>在不同人格面具间切换</strong>：在不同场合下，你可能会不自觉地放大感性或理性的一面。</li>
                ` : 
                   lowerType.includes('碎片') ? `
                    <li><strong>思维反刍与过度分析</strong>：你会反复回想过去的事件或推演未来的可能，陷入"越想越焦虑"的循环。</li>
                    <li><strong>追求思维完美答案</strong>：你相信存在完全理性的完美答案，任何不确定性都会让你不安。</li>
                    <li><strong>理性与感性内耗</strong>：风象星座的活跃思维与A型血的完美主义交织，形成消耗自我的引擎。</li>
                    <li><strong>行动力缺失</strong>：过度的思辨消磨了你的行动力，让你难以踏出切实的第一步。</li>
                ` : `
                    <li><strong>情绪敏感度高</strong>：你的情绪容易受到外界影响，对他人的评价和态度非常敏感。</li>
                    <li><strong>边界感模糊</strong>：你难以拒绝他人的请求，常常为了满足他人的需求而牺牲自己的利益。</li>
                    <li><strong>自我价值感低</strong>：你的自我价值感很大程度上依赖于他人的认可和评价。</li>
                    <li><strong>完美主义倾向</strong>：你对自己和他人都有很高的期望，容易因为达不到期望而感到沮丧。</li>
                `;
            } else if (highestStage === '中阶') {
                corePsychologicalFeatures = `
                    <li><strong>情绪管理能力提升</strong>：你开始学会调节自己的情绪，不再轻易被外界影响。</li>
                    <li><strong>边界意识形成</strong>：你逐渐建立了明确的个人边界，学会了合理拒绝他人的请求。</li>
                    <li><strong>自我价值感增强</strong>：你开始关注自己的优点和成就，减少了对他人评价的依赖。</li>
                    <li><strong>灵活的完美主义</strong>：你仍然追求完美，但学会了接受不完美，不再因为达不到期望而过度沮丧。</li>
                `;
            } else {
                corePsychologicalFeatures = `
                    <li><strong>情绪稳定成熟</strong>：你能够很好地管理自己的情绪，保持内心的平静和稳定。</li>
                    <li><strong>健康的边界</strong>：你拥有清晰、健康的个人边界，能够平衡自己和他人的需求。</li>
                    <li><strong>稳定的自我价值</strong>：你的自我价值感来自内心，不依赖于他人的认可和评价。</li>
                    <li><strong>建设性的追求</strong>：你追求卓越，但更注重过程和成长，而非单纯的完美结果。</li>
                `;
            }
            
            // 生成各维度详细分析（核心心理特征和四维度得分分析）
            const dimensionAnalysis = document.getElementById('dimension-analysis');
            dimensionAnalysis.innerHTML = `
                <div class="report-content">
                    <h4 class="report-subtitle">您的四维度得分分析</h4>
                    <p class="report-paragraph">
                        假设您的得分情况如下，这清晰地揭示了您当前的核心困境：
                    </p>
                    
                    <!-- 替换图片，根据人格类型和得分阶段生成文字内容 -->
                    <div class="image-content-text">
                        ${highestStage === '高阶' ? 
                          (lowerType.includes('行动') ? '行动型INFP的四维度得分特点：亲密关系边界清晰，能够平衡自己和他人的需求；情绪管理能力成熟稳定，能够很好地调节自己的情绪；自我认知清晰深入，对自己的优势和潜力有明确的认识；职业价值认知明确，能够将个人价值观与职业发展结合。建议：继续深化自我探索，将个人成长与社会价值结合，实现更高层次的自我实现。' : 
                           lowerType.includes('跨界') ? '跨界型INFP的四维度得分特点：亲密关系中拥有健康的边界，能够灵活处理人际关系；情绪管理能力成熟，能够在不同情境下保持稳定；自我认知清晰，能够整合不同的自我面向；职业价值认知明确，能够在不同领域间找到连接和价值。建议：继续深化跨界探索，将不同领域的知识和经验整合，创造更大的价值。' : 
                           lowerType.includes('创造') ? '创造型INFP的四维度得分特点：亲密关系中能够保持健康的边界，同时保持情感连接；情绪管理能力成熟，能够将情绪转化为创造的动力；自我认知清晰，能够深入了解自己的创造力和潜力；职业价值认知明确，能够将创造力转化为职业价值。建议：继续深化创造实践，将创造力转化为更有影响力的作品和成果。' : 
                           lowerType.includes('表达') ? '表达型INFP的四维度得分特点：亲密关系中能够保持健康的边界，同时保持开放和连接；情绪管理能力成熟，能够将情绪转化为有效的表达；自我认知清晰，能够深入了解自己的表达需求和风格；职业价值认知明确，能够将表达能力转化为职业价值。建议：继续深化表达实践，提升表达的影响力和感染力。' : 
                           lowerType.includes('整合') ? '整合型INFP的四维度得分特点：亲密关系中拥有健康的边界，能够平衡自己和他人的需求；情绪管理能力成熟，能够整合不同的情绪状态；自我认知清晰，能够整合不同的自我面向；职业价值认知明确，能够整合不同的职业需求和价值。建议：继续深化整合实践，将不同的元素整合为一个和谐的整体。' : 
                           lowerType.includes('实践') ? '实践型INFP的四维度得分特点：亲密关系中能够保持健康的边界，同时保持务实和连接；情绪管理能力成熟，能够将情绪转化为有效的行动；自我认知清晰，能够深入了解自己的实践能力和潜力；职业价值认知明确，能够将实践能力转化为职业价值。建议：继续深化实践，将实践经验转化为更有影响力的成果和价值。' : 
                           lowerType.includes('实验') ? '实验型INFP的四维度得分特点：亲密关系中能够保持健康的边界，同时保持开放和好奇；情绪管理能力成熟，能够在实验中保持稳定；自我认知清晰，能够在实验中不断探索和成长；职业价值认知明确，能够将实验精神转化为职业价值。建议：继续深化实验，探索更多的可能性和潜力。' : 
                           lowerType.includes('探索') ? '探索型INFP的四维度得分特点：亲密关系中能够保持健康的边界，同时保持好奇和开放；情绪管理能力成熟，能够在探索中保持稳定；自我认知清晰，能够在探索中不断深化自我了解；职业价值认知明确，能够将探索精神转化为职业价值。建议：继续深化探索，拓展自己的视野和经验。' : 
                           lowerType.includes('实干') ? '实干型INFP的四维度得分特点：亲密关系中拥有健康的边界，能够平衡稳定与创新；情绪管理能力成熟，能够支持系统创新；自我认知清晰，明确自身的创新优势；职业价值认知明确，能够将结构性创新转化为职业价值。建议：继续深化结构性创新思维，将创新系统应用到更广阔的领域。' : 
                           lowerType.includes('价值') ? '价值型INFP的四维度得分特点：亲密关系中拥有健康的边界，与价值观一致；情绪管理能力成熟，能够支持长期价值实现；自我认知清晰，明确核心价值观；职业价值认知明确，能够将价值观转化为可持续的职业价值。建议：继续深化价值系统建设，将个人价值与社会价值结合。' : 
                           lowerType.includes('智慧') ? '智慧型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重生态平衡；情绪管理能力成熟，能够支持系统性思考；自我认知清晰，拥有生态思维；职业价值认知明确，能够设计具有韧性与进化力的解决方案。建议：继续深化生态思维，培育更多价值生态系统。' : 
                           lowerType.includes('融思') ? '融思型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重深度连接；情绪管理能力成熟，能够支持多元思想整合；自我认知清晰，拥有整合性思维；职业价值认知明确，能够输出独特的智慧体系。建议：继续深化多元思想整合，提升智慧输出的影响力。' : 
                           lowerType.includes('联结') ? '联结型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重有意义的连接；情绪管理能力成熟，能够支持连接的建立和维护；自我认知清晰，明确连接的价值；职业价值认知明确，能够创造协同增效的价值。建议：继续深化连接能力，创造更多有意义的连接。' : 
                           lowerType.includes('传播') ? '传播型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重价值传播；情绪管理能力成熟，能够支持有效传播；自我认知清晰，明确传播的价值；职业价值认知明确，能够将价值观转化为有影响力的传播。建议：继续深化传播能力，扩大价值观的影响力。' : 
                           lowerType.includes('思想') ? '思想型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重思想交流；情绪管理能力成熟，能够支持深度思考；自我认知清晰，拥有系统的思想体系；职业价值认知明确，能够输出深刻的思想。建议：继续深化思考能力，提升思想的深度和广度。' : 
                           lowerType.includes('疗愈') ? '疗愈型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重情感支持；情绪管理能力成熟，能够支持深度共情；自我认知清晰，明确疗愈的价值；职业价值认知明确，能够帮助他人疗愈和成长。建议：继续深化疗愈能力，扩大疗愈的影响力。' : 
                           lowerType.includes('启迪') ? '启迪型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重深度洞察；情绪管理能力成熟，能够支持启迪他人；自我认知清晰，拥有深刻的洞察力；职业价值认知明确，能够帮助他人认识自己和世界。建议：继续深化洞察能力，扩大启迪的影响力。' : 
                           lowerType.includes('滋养') ? '滋养型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重滋养支持；情绪管理能力成熟，能够支持滋养他人；自我认知清晰，明确滋养的价值；职业价值认知明确，能够创造安全包容的环境。建议：继续深化滋养能力，扩大滋养的影响力。' : 
                           (lowerType.includes('通明') || lowerType.includes('透明')) ? '通明型INFP的四维度得分特点：亲密关系中拥有健康的边界，注重真实连接；情绪管理能力成熟，能够支持真实展现；自我认知清晰，完全接纳自己；职业价值认知明确，能够展现真实的力量。建议：继续深化真实展现，扩大真实的影响力。' : 
                           '高阶INFP的四维度得分特点：亲密关系中拥有清晰健康的边界，能够平衡自己和他人的需求；情绪管理能力成熟稳定，能够很好地调节自己的情绪；自我认知清晰深入，对自己的优势和潜力有明确的认识；职业价值认知明确，能够将个人价值观与职业发展结合。建议：继续深化自我探索，将个人成长与社会价值结合，实现更高层次的自我实现。') : 
                          lowerType.includes('冲动') ? '冲动型INFP的四维度得分特点：亲密关系边界模糊，容易过度投入；情绪管理能力较弱，易受外界影响；自我认知有待深入；职业价值认知正在形成中。建议：建立明确边界，提升情绪管理能力，深入探索内在自我，明确职业方向。' : 
                          lowerType.includes('枯竭') ? '枯竭型INFP的四维度得分特点：亲密关系中存在边界问题，容易过度牺牲；情绪管理能力不足，易陷入情绪低谷；自我认知需要加强；职业价值感有待提升。建议：学会合理分配精力，建立情绪缓冲机制，深入了解自我需求，寻找职业价值契合点。' : 
                          lowerType.includes('矛盾') ? '矛盾型INFP的四维度得分特点：亲密关系中边界感不稳定；情绪管理能力波动较大；自我认知存在内在冲突；职业价值认知模糊。建议：建立清晰的个人边界，学会调和内在矛盾，增强自我认知的一致性，明确职业发展方向。' : 
                          lowerType.includes('激情') ? '激情型INFP的四维度得分特点：亲密关系中充满热情，但边界感较弱；情绪管理能力较强，但容易过度投入；自我认知较为清晰；职业价值感强烈。建议：保持热情的同时建立适当边界，学会平衡情绪投入，继续深化自我认知，将激情转化为职业动力。' : 
                          lowerType.includes('自我') ? '自我型INFP的四维度得分特点：亲密关系中注重个人空间，边界感较强；情绪管理能力稳定；自我认知清晰；职业价值认知明确。建议：保持独立的同时适当开放自我，继续提升情绪管理能力，深化自我探索，将自我认知与职业发展结合。' : 
                          lowerType.includes('焦虑') ? '焦虑型INFP的四维度得分特点：亲密关系中边界感模糊，容易过度担忧；情绪管理能力较弱，易焦虑；自我认知存在偏差；职业价值认知不明确。建议：建立明确边界，学习放松技巧缓解焦虑，客观认识自我，探索适合的职业方向。' : 
                          lowerType.includes('碎片') ? '碎片型INFP的四维度得分特点：亲密关系中过度分析关系动态，难以表达真实情感；情绪管理中陷入思考循环，越想越焦虑；自我认知分裂，思维与情感难以整合；职业决策中过度权衡，行动力不足。建议：减少过度分析，尝试直接表达情感，培养行动优先的习惯，逐步建立内在整合。' : 
                          lowerType.includes('敏感') ? '敏感型INFP的四维度得分特点：亲密关系中边界模糊，容易过度共情；情绪管理中容易被外界影响，情绪波动大；自我认知依赖外部评价，缺乏内在稳定性；职业价值认知不明确，容易随波逐流。建议：建立清晰的个人边界，培养情绪自主性，深化内在自我探索，明确职业发展方向。' : 
                          lowerType.includes('耗竭') ? '耗竭型INFP的四维度得分特点：亲密关系中容易过度投入，导致自身能量枯竭；情绪管理中缺乏弹性，容易在极端情绪间摆动；自我认知受结果影响大，成功时自信爆棚，失败时自我否定；职业价值认知单一，过度追求目标实现，忽视过程体验。建议：学会合理分配精力，建立情绪缓冲机制，客观认识自我价值，平衡目标与过程。' : 
                          lowerType.includes('冲突') ? '冲突型INFP的四维度得分特点：亲密关系中边界感不稳定，内心存在冲突；情绪管理能力波动较大，容易在感性和理性间摇摆；自我认知存在内在矛盾，难以形成统一的自我形象；职业价值认知模糊，容易陷入理想与现实的冲突中。建议：建立清晰的个人边界，学会调和内在矛盾，增强自我认知的一致性，明确职业发展方向。' : 
                          lowerType.includes('稳健') ? '稳健型INFP的四维度得分特点：亲密关系中建立了弹性边界，能够在稳定与开放之间平衡；情绪管理能力稳定，能够有效调节自身情绪；自我认知较为清晰，能够整合内在矛盾；职业价值认知正在形成，注重平衡理想与现实。建议：继续深化边界管理能力，保持情绪稳定，进一步整合自我认知，探索与价值观契合的职业方向。' : 
                          lowerType.includes('目标') ? '目标型INFP的四维度得分特点：亲密关系中边界清晰，能够平衡个人需求与关系发展；情绪管理能力稳定，能够支持目标实现；自我认知清晰，明确自身优势与发展方向；职业价值认知明确，能够将理想转化为具体的职业目标。建议：继续完善目标管理系统，保持情绪稳定性，进一步深化自我认知，将职业目标与个人价值观紧密结合。' : 
                          lowerType.includes('系统') ? '系统型INFP的四维度得分特点：亲密关系中建立了模块化的边界管理，能够根据关系类型灵活调整边界；情绪管理能力稳定，能够通过系统方法调节情绪；自我认知清晰，能够整合不同的内在特质；职业价值认知明确，注重系统性地实现职业目标。建议：继续优化个人系统，提升模块间的协同效率，深化自我认知的整合程度，将系统思维应用到更广阔的领域。' : 
                          lowerType.includes('连接') ? '连接型INFP的四维度得分特点：亲密关系中注重情感连接与理性边界的平衡；情绪管理能力提升，能够通过自我观察调节情绪；自我认知正在整合，能够理解不同内在部分的模式；职业价值认知明确，注重内外世界的连接与平衡。建议：继续深化自我观察能力，完善决策框架，将内在资源转化为外在行动，实现更有效的内外连接。' : 
                          lowerType.includes('适应') ? '适应型INFP的四维度得分特点：亲密关系中保持弹性，能够适应不同关系模式；情绪管理能力提升，能够将情绪转化为创作资源；自我认知正在整合，接纳自身的善变与敏感；职业价值认知明确，注重创造性表达与个人风格。建议：继续深化情绪转化能力，建立弹性的创作框架，探索多元化的表达形式，寻找适合自己的职业发展方向。' : 
                          lowerType.includes('沟通') ? '沟通型INFP的四维度得分特点：亲密关系中能够建立健康的边界，同时保持良好的沟通；情绪管理能力提升，能够稳定情绪并有效表达；自我认知清晰，能够整合内在资源；职业价值认知明确，注重理想与现实的连接。建议：继续深化沟通能力，将内在资源转化为外在行动，实现理想与现实的平衡。' : 
                          lowerType.includes('多元') ? '多元型INFP的四维度得分特点：亲密关系中能够灵活调整边界，适应不同关系模式；情绪管理能力提升，能够平衡不同情绪状态；自我认知清晰，能够整合内在多种声音；职业价值认知明确，注重跨领域知识的连接与应用。建议：继续深化多元认知资产的整合，将内在多样性转化为理解复杂情境的独特优势。' : 
                          lowerType.includes('管理') ? '管理型INFP的四维度得分特点：亲密关系中能够建立健康的情感边界，平衡付出与收获；情绪管理能力提升，能够稳定情绪并有效引导他人；自我认知清晰，能够整合情感与秩序；职业价值认知明确，注重情感管理与支持性工作。建议：继续深化情感管理能力，将内在秩序感转化为支持他人的能力。' : 
                          lowerType.includes('共情') ? '共情型INFP的四维度得分特点：亲密关系中能够深度理解他人情感，建立安全的情感连接；情绪管理能力提升，能够接纳并表达丰富情感；自我认知清晰，能够平衡情感依赖与独立；职业价值认知明确，注重情感支持与引导性工作。建议：继续深化共情能力，将情感体验转化为帮助他人的资源。' : 
                          lowerType.includes('融合') ? '融合型INFP的四维度得分特点：亲密关系中能够建立现实的情感连接，平衡理想与实际；情绪管理能力提升，能够将情感转化为行动；自我认知清晰，能够整合情感与务实；职业价值认知明确，注重理想与现实的结合。建议：继续深化理想与现实的融合能力，将情感与行动有效结合。' : 
                          lowerType.includes('平衡') ? '平衡型INFP的四维度得分特点：亲密关系中能够平衡情感深度与理性边界；情绪管理能力提升，能够调和内在矛盾；自我认知清晰，能够整合双重视角；职业价值认知明确，注重感性与理性的平衡。建议：继续深化内在平衡能力，将双重视角转化为独特的认知优势。' : 
                          'INFP的四维度得分特点：亲密关系中注重情感连接；情绪管理能力有待提升；自我认知正在发展；职业价值认知逐渐形成。建议：建立健康的边界，提升情绪管理能力，深入探索自我，明确职业价值方向。'}
                    </div>
                    
                    <table class="scores-table">
                        <tr>
                            <th>维度名称</th>
                            <th>你的得分</th>
                            <th>阶段</th>
                            <th>分析</th>
                        </tr>
                        <tr>
                            <td>亲密关系与边界建立</td>
                            <td>${totalScores.dim1}/30</td>
                            <td>${getScoreStage(totalScores.dim1)}</td>
                            <td>${highestStage === '高阶' ? 
                              (lowerType.includes('行动') ? '你在亲密关系中拥有清晰健康的边界，能够很好地平衡自己和他人的需求。你懂得在保持连接的同时尊重自己的底线，这种成熟的边界意识让你的关系更加健康和持久。' : 
                               lowerType.includes('跨界') ? '你在亲密关系中拥有健康的边界，能够灵活处理人际关系，既保持独立，又能与不同背景的人建立连接。' : 
                               lowerType.includes('创造') ? '你在亲密关系中能够保持健康的边界，同时保持情感连接，让关系成为你创造力的支持和源泉。' : 
                               lowerType.includes('表达') ? '你在亲密关系中能够保持健康的边界，同时保持开放和连接，让关系成为你表达的渠道和灵感的来源。' : 
                               lowerType.includes('整合') ? '你在亲密关系中拥有健康的边界，能够平衡自己和他人的需求，整合不同的关系需求和价值。' : 
                               lowerType.includes('实践') ? '你在亲密关系中能够保持健康的边界，同时保持务实和连接，让关系成为你实践理想的支持。' : 
                               lowerType.includes('实验') ? '你在亲密关系中能够保持健康的边界，同时保持开放和好奇，愿意在关系中尝试新的方式和体验。' : 
                               lowerType.includes('探索') ? '你在亲密关系中能够保持健康的边界，同时保持好奇和开放，在关系中不断探索和成长。' : 
                               lowerType.includes('实干') ? '你在亲密关系中拥有健康的边界，能够平衡稳定与创新，既尊重既有框架，又能在其中导入变化。' : 
                               lowerType.includes('价值') ? '你在亲密关系中拥有健康的边界，与你的核心价值观高度一致，选择与那些认同你的价值观的人建立深入关系。' : 
                               lowerType.includes('智慧') ? '你在亲密关系中拥有健康的边界，注重生态平衡，将关系视为一个有机系统，关注所有要素之间的连接和动态平衡。' : 
                               lowerType.includes('融思') ? '你在亲密关系中拥有健康的边界，注重深度连接，能够与他人进行深入的思想交流和情感分享。' : 
                               lowerType.includes('联结') ? '你在亲密关系中拥有健康的边界，注重有意义的连接，能够与他人建立深度的、有价值的连接。' : 
                               lowerType.includes('传播') ? '你在亲密关系中拥有健康的边界，注重价值传播，能够将你的价值观与他人分享，影响和启发他人。' : 
                               lowerType.includes('思想') ? '你在亲密关系中拥有健康的边界，注重思想交流，能够与他人进行深入的思想探讨。' : 
                               lowerType.includes('疗愈') ? '你在亲密关系中拥有健康的边界，注重情感支持，能够深刻理解他人的痛苦和需求。' : 
                               lowerType.includes('启迪') ? '你在亲密关系中拥有健康的边界，注重深度洞察，能够帮助他人认识自己和世界。' : 
                               lowerType.includes('滋养') ? '你在亲密关系中拥有健康的边界，注重滋养支持，能够用温暖、支持的方式滋养他人的成长和发展。' : 
                               (lowerType.includes('通明') || lowerType.includes('透明')) ? '你在亲密关系中拥有健康的边界，注重真实连接，能够完全接纳自己并展现真实的自我。' : 
                               '你在亲密关系中拥有清晰健康的边界，能够很好地平衡自己和他人的需求。你懂得在保持连接的同时尊重自己的底线，这种成熟的边界意识让你的关系更加健康和持久。') :  
                              lowerType.includes('冲动') ? '你在亲密关系中边界感较为模糊，容易受情绪驱动过度投入，建议建立明确的个人边界，避免过度牺牲。' : 
                              lowerType.includes('枯竭') ? '你在亲密关系中容易过度投入，导致自身能量枯竭，建议学会合理分配精力，建立健康的关系边界。' : 
                              lowerType.includes('矛盾') ? '你在亲密关系中边界感不稳定，内心存在冲突，建议明确自己的需求，建立清晰的个人边界。' : 
                              lowerType.includes('激情') ? '你在亲密关系中充满热情，但边界感较弱，建议保持热情的同时建立适当边界。' : 
                              lowerType.includes('自我') ? '你在亲密关系中注重个人空间，边界感较强，建议保持独立的同时适当开放自我。' : 
                              lowerType.includes('焦虑') ? '你在亲密关系中边界感模糊，容易过度担忧，建议建立明确边界，减少不必要的焦虑。' : 
                              lowerType.includes('碎片') ? '你在亲密关系中容易过度分析关系动态，反复推敲对方的每一句话和行为，难以直接表达真实情感。建议减少过度分析，尝试直接、真诚地表达你的感受，建立更自然的关系连接。' : 
                              lowerType.includes('敏感') ? '你在亲密关系中边界模糊，容易过度共情，将他人的情绪和问题视为自己的责任。建议建立清晰的个人边界，学会合理拒绝，保护自己的能量，同时保持真诚的情感连接。' : 
                              lowerType.includes('耗竭') ? '你在亲密关系中容易过度投入，将关系视为需要全力维护的目标，导致自身能量枯竭。你常常忽略自己的需求，优先满足对方，这种失衡的关系模式最终会让你感到疲惫和失望。建议学会合理分配精力，在关系中建立健康的边界，同时关注自己的需求。' : 
                              lowerType.includes('冲突') ? '你在亲密关系中边界感不稳定，内心存在冲突。你既渴望深度连接，又害怕失去自我；既想要表达真实情感，又担心被评判。这种内心的矛盾让你在关系中常常犹豫不决，难以建立稳定的边界。建议学会倾听内心的声音，明确自己的需求，建立清晰的个人边界。' : 
                              lowerType.includes('稳健') ? '你在亲密关系中建立了弹性边界，能够在稳定与开放之间取得平衡，既尊重自己的需求，也考虑他人的感受。建议继续深化这种平衡能力，根据不同情境灵活调整边界。' : 
                              lowerType.includes('目标') ? '你在亲密关系中边界清晰，能够平衡个人需求与关系发展，既尊重自己的目标，也支持他人的成长。建议继续保持这种平衡，将亲密关系作为支持个人目标实现的重要资源。' : 
                              lowerType.includes('系统') ? '你在亲密关系中建立了模块化的边界管理系统，能够根据关系类型和情境灵活调整边界。建议继续优化这个系统，提升边界管理的自动化程度和适应性，让不同关系都能得到合适的边界支持。' : 
                              lowerType.includes('连接') ? '你在亲密关系中注重情感连接与理性边界的平衡，能够理解并尊重自己和他人的需求。建议继续深化这种平衡能力，通过有效的沟通建立更健康、更深入的关系连接。' : 
                              lowerType.includes('适应') ? '你在亲密关系中保持弹性，能够适应不同的关系模式和需求。你不再强求他人符合你的期待，而是学会在关系中保持真实的自我。建议继续深化这种弹性能力，同时保持自我边界，避免过度妥协。' : 
                              lowerType.includes('沟通') ? '你在亲密关系中能够建立健康的边界，同时保持良好的沟通。你懂得如何表达自己的需求，同时尊重他人的边界，这种平衡的关系模式让你的关系更加健康和持久。建议继续深化沟通技巧，提升关系的质量和深度。' : 
                              lowerType.includes('多元') ? '你在亲密关系中能够灵活调整边界，适应不同的关系模式和需求。你懂得如何在保持自我的同时，与不同类型的人建立良好的关系。建议继续深化这种弹性能力，同时保持清晰的自我认知，避免在关系中失去自我。' : 
                              lowerType.includes('管理') ? '你在亲密关系中能够建立健康的情感边界，平衡付出与收获。你不再过度消耗自己，而是能够有选择地给予关怀、获取滋养，为自己与他人构建稳定且温暖的情感空间。建议继续深化情感边界管理，将这种能力应用到更广泛的关系中。' : 
                              lowerType.includes('共情') ? '你在亲密关系中能够深度理解他人情感，建立安全的情感连接。你不再过度依赖他人的情感支持，而是能够主动体验并引导情感流动，成为关系中的情感导航者。建议继续深化共情能力，同时保持健康的情感边界。' : 
                              lowerType.includes('融合') ? '你在亲密关系中能够建立现实的情感连接，平衡理想与实际。你不再陷入空想或过度情绪化，而是能够用务实的方式表达情感，为关系奠定坚实的基础。建议继续深化理想与现实的融合能力，让关系更加稳定和持久。' : 
                              lowerType.includes('平衡') ? '你在亲密关系中能够平衡情感深度与理性边界。你不再被内在矛盾所困，而是能够同时以"体验者"和"观察者"的身份感受关系，获得更丰富、更清晰的认知。建议继续深化内在平衡能力，让关系更加和谐和稳定。' : 
                              '你在亲密关系中注重情感连接，建议建立健康的边界，平衡个人需求与关系需求。'}</td>
                        </tr>
                        <tr>
                            <td>心力管理</td>
                            <td>${totalScores.dim2}/30</td>
                            <td>${getScoreStage(totalScores.dim2)}</td>
                            <td>${highestStage === '高阶' ? 
                              (lowerType.includes('行动') ? '你拥有成熟稳定的情绪管理能力，能够很好地调节自己的情绪，保持内心的平静和稳定。你懂得如何合理释放压力，如何在情绪激动时保持冷静，这种情绪成熟度让你能够更好地应对生活中的各种挑战。' : 
                               lowerType.includes('跨界') ? '你拥有成熟的情绪管理能力，能够在不同情境下保持稳定，适应各种变化和挑战。' : 
                               lowerType.includes('创造') ? '你拥有成熟的情绪管理能力，能够将情绪转化为创造的动力，让情绪成为你创造力的燃料。' : 
                               lowerType.includes('表达') ? '你拥有成熟的情绪管理能力，能够将情绪转化为有效的表达，让情绪成为你表达的内容和力量。' : 
                               lowerType.includes('整合') ? '你拥有成熟的情绪管理能力，能够整合不同的情绪状态，保持内心的平衡和稳定。' : 
                               lowerType.includes('实践') ? '你拥有成熟的情绪管理能力，能够将情绪转化为有效的行动，让情绪成为你实践的动力。' : 
                               lowerType.includes('实验') ? '你拥有成熟的情绪管理能力，能够在实验中保持稳定，应对各种不确定性和变化。' : 
                               lowerType.includes('探索') ? '你拥有成熟的情绪管理能力，能够在探索中保持稳定，应对各种新的体验和挑战。' : 
                               lowerType.includes('实干') ? '你拥有成熟的情绪管理能力，能够支持系统创新，在稳定和变化之间保持平衡。' : 
                               lowerType.includes('价值') ? '你拥有成熟的情绪管理能力，能够支持长期价值实现，保持持久的动力和热情。' : 
                               lowerType.includes('智慧') ? '你拥有成熟的情绪管理能力，能够支持系统性思考，保持内心的平静和清晰。' : 
                               lowerType.includes('融思') ? '你拥有成熟的情绪管理能力，能够支持多元思想整合，在不同思想之间保持平衡。' : 
                               lowerType.includes('联结') ? '你拥有成熟的情绪管理能力，能够支持连接的建立和维护，保持关系的和谐和稳定。' : 
                               lowerType.includes('传播') ? '你拥有成熟的情绪管理能力，能够支持有效传播，保持传播的影响力和感染力。' : 
                               lowerType.includes('思想') ? '你拥有成熟的情绪管理能力，能够支持深度思考，保持思维的清晰和深度。' : 
                               lowerType.includes('疗愈') ? '你拥有成熟的情绪管理能力，能够支持深度共情，理解和接纳他人的情绪。' : 
                               lowerType.includes('启迪') ? '你拥有成熟的情绪管理能力，能够支持深度洞察，保持内心的平静和智慧。' : 
                               lowerType.includes('滋养') ? '你拥有成熟的情绪管理能力，能够支持滋养他人，保持温暖和支持的态度。' : 
                               (lowerType.includes('通明') || lowerType.includes('透明')) ? '你拥有成熟的情绪管理能力，能够支持真实展现，接纳和表达自己的真实情绪。' : 
                               '你拥有成熟稳定的情绪管理能力，能够很好地调节自己的情绪，保持内心的平静和稳定。你懂得如何合理释放压力，如何在情绪激动时保持冷静，这种情绪成熟度让你能够更好地应对生活中的各种挑战。') :  
                              lowerType.includes('冲动') ? '你的情绪管理能力有待提升，容易受情绪波动影响，建议学习情绪调节技巧，建立稳定的能量节奏。' : 
                              lowerType.includes('枯竭') ? '你的情绪管理能力不足，容易陷入情绪低谷，建议建立情绪缓冲机制，学会合理释放压力。' : 
                              lowerType.includes('矛盾') ? '你的情绪管理能力波动较大，内心冲突导致情绪消耗，建议学会调和内在矛盾，提升情绪稳定性。' : 
                              lowerType.includes('激情') ? '你的情绪管理能力较强，但容易过度投入，建议保持情绪平衡，避免能量耗尽。' : 
                              lowerType.includes('自我') ? '你的情绪管理能力稳定，能够较好地控制情绪，建议继续提升情绪觉察能力。' : 
                              lowerType.includes('焦虑') ? '你的情绪管理能力较弱，易焦虑，建议学习放松技巧，缓解焦虑情绪。' : 
                              lowerType.includes('碎片') ? '你的情绪管理陷入思考循环，习惯用分析来处理情绪，却越想越焦虑。过度分析感受和推演可能，让你在"越想越焦虑"的循环中消耗心力。建议尝试正念练习，活在当下，减少对情绪的过度思考。' : 
                              lowerType.includes('敏感') ? '你的情绪管理容易受到外界影响，情绪波动大，难以保持稳定。你对他人的情绪过于敏感，容易被他人的情绪感染，导致自身情绪失控。建议学习情绪边界，培养情绪自主性，通过正念练习提升情绪稳定性。' : 
                              lowerType.includes('耗竭') ? '你的情绪管理缺乏弹性，容易在极端情绪间摆动。在追求目标时，你会充满热情和动力，但一旦遇到挫折或困难，就容易陷入深度沮丧和自我怀疑。你常常忽略身体和情绪的预警信号，直到彻底耗尽才被迫停下。建议学习能量管理，建立情绪缓冲机制，通过正念练习提升情绪稳定性。' : 
                              lowerType.includes('冲突') ? '你的情绪管理能力波动较大，容易在感性和理性间摇摆。面对问题时，你能同时感受到强烈的情感反应和理性分析，这种内在的冲突消耗了大量心理能量。建议学会接纳内在的矛盾，将其视为创造力的来源，通过正念练习提升情绪稳定性。' : 
                              lowerType.includes('稳健') ? '你的情绪管理能力稳定，能够有效调节自身情绪，保持内心的平衡。你开始学会在情绪波动时进行自我觉察和调节，避免被情绪左右。建议继续深化情绪管理技巧，培养更多元的情绪表达方式。' : 
                              lowerType.includes('目标') ? '你的情绪管理能力稳定，能够支持目标实现，在压力下保持冷静和专注。你学会了将情绪能量引导到目标追求上，形成了积极的情绪循环。建议继续提升情绪弹性，更好地应对目标实现过程中的挑战。' : 
                              lowerType.includes('系统') ? '你已经建立了系统的情绪管理机制，能够通过模块化的方式处理不同类型的情绪。建议继续优化这个机制，提升情绪识别和调节的自动化程度，让情绪管理成为一种自然的习惯。' : 
                              lowerType.includes('连接') ? '你已经学会通过自我观察来调节情绪，能够从情绪中抽离出来，客观地观察自己的反应。建议继续深化这种自我观察能力，学习更多情绪调节技巧，让情绪管理更加高效和自然。' : 
                              lowerType.includes('适应') ? '你已经学会将情绪转化为创作资源，能够将强烈的情绪体验作为创作的起点。建议继续深化这种情绪转化能力，学习更多表达技巧，让情绪管理成为创造性成长的动力。' : 
                              lowerType.includes('沟通') ? '你的情绪管理能力提升，能够稳定情绪并有效表达。你开始学会将情绪转化为有效的沟通，不再被情绪左右，而是能够用情绪来增强沟通的效果。建议继续提升情绪觉察能力，深化情绪与沟通的结合。' : 
                              lowerType.includes('多元') ? '你的情绪管理能力提升，能够平衡不同的情绪状态。你开始学会将内在的多种情绪视为不同的资源，而不再只是矛盾与冲突。建议继续深化情绪整合能力，让不同的情绪在合适的场合发挥作用。' : 
                              lowerType.includes('管理') ? '你的情绪管理能力提升，能够稳定情绪并有效引导他人。你开始学习协调丰沛的情感与内在的秩序感，在情绪世界中建立根基与边界。建议继续深化情感与秩序的协调能力，将内在秩序感转化为支持他人的能力。' : 
                              lowerType.includes('共情') ? '你的情绪管理能力提升，能够接纳并表达丰富情感。你不再压抑或逃避情绪，而是能够主动体验并深入自己的情绪世界，成为情绪的有意识体验者与导航者。建议继续深化情感接纳与表达能力，将情感体验转化为帮助他人的资源。' : 
                              lowerType.includes('融合') ? '你的情绪管理能力提升，能够将情感转化为行动。你不再被情绪所困，而是能够将情感转化为具体的行动计划，实现理想与现实的连接。建议继续深化情感向行动的转化能力，让情感成为推动你前进的动力。' : 
                              lowerType.includes('平衡') ? '你的情绪管理能力提升，能够调和内在矛盾。你不再被内在的冲突所消耗，而是能够将感性的体验与理性的观察整合，获得更丰富、更清晰的认知。建议继续深化内在平衡能力，将双重视角转化为独特的认知优势。' : 
                              '你的情绪管理能力有待提升，建议学习情绪调节方法，增强情绪稳定性。'}</td>
                        </tr>
                        <tr>
                            <td>自我认知与内在成长</td>
                            <td>${totalScores.dim3}/30</td>
                            <td>${getScoreStage(totalScores.dim3)}</td>
                            <td>${highestStage === '高阶' ? 
                              (lowerType.includes('行动') ? '你对自我认知清晰深入，对自己的优势、潜力和成长方向有明确的认识。你懂得如何接纳自己的不完美，如何在成长过程中不断调整和完善自己，这种成熟的自我认知让你能够更好地实现自我价值。' : 
                               lowerType.includes('跨界') ? '你对自我认知清晰，能够整合不同的自我面向，适应不同领域的要求和挑战。' : 
                               lowerType.includes('创造') ? '你对自我认知清晰，能够深入了解自己的创造力和潜力，将创造力转化为有价值的成果。' : 
                               lowerType.includes('表达') ? '你对自我认知清晰，能够深入了解自己的表达需求和风格，将表达能力转化为有影响力的内容。' : 
                               lowerType.includes('整合') ? '你对自我认知清晰，能够整合不同的自我面向，形成统一和谐的自我形象。' : 
                               lowerType.includes('实践') ? '你对自我认知清晰，能够深入了解自己的实践能力和潜力，将实践能力转化为有价值的成果。' : 
                               lowerType.includes('实验') ? '你对自我认知清晰，能够在实验中不断探索和成长，发现自己的潜力和优势。' : 
                               lowerType.includes('探索') ? '你对自我认知清晰，能够在探索中不断深化自我了解，拓展自己的视野和经验。' : 
                               lowerType.includes('实干') ? '你对自我认知清晰，明确自身的创新优势，能够将结构性创新思维应用到各个领域。' : 
                               lowerType.includes('价值') ? '你对自我认知清晰，明确核心价值观，能够将价值观转化为可持续的职业价值。' : 
                               lowerType.includes('智慧') ? '你对自我认知清晰，拥有生态思维，能够以系统的视角看待自己和周围的世界。' : 
                               lowerType.includes('融思') ? '你对自我认知清晰，拥有整合性思维，能够将多元的思想、情感和经验融合为一个有机的整体。' : 
                               lowerType.includes('联结') ? '你对自我认知清晰，明确连接的价值，能够创造协同增效的价值。' : 
                               lowerType.includes('传播') ? '你对自我认知清晰，明确传播的价值，能够将价值观转化为有影响力的传播。' : 
                               lowerType.includes('思想') ? '你对自我认知清晰，拥有系统的思想体系，能够输出深刻的思想。' : 
                               lowerType.includes('疗愈') ? '你对自我认知清晰，明确疗愈的价值，能够帮助他人疗愈和成长。' : 
                               lowerType.includes('启迪') ? '你对自我认知清晰，拥有深刻的洞察力，能够帮助他人认识自己和世界。' : 
                               lowerType.includes('滋养') ? '你对自我认知清晰，明确滋养的价值，能够创造安全包容的环境。' : 
                               (lowerType.includes('通明') || lowerType.includes('透明')) ? '你对自我认知清晰，完全接纳自己，能够展现真实、透明的自我。' : 
                               '你对自我认知清晰深入，对自己的优势、潜力和成长方向有明确的认识。你懂得如何接纳自己的不完美，如何在成长过程中不断调整和完善自己，这种成熟的自我认知让你能够更好地实现自我价值。') :  
                              lowerType.includes('冲动') ? '你对自我认知有一定了解，但容易受情绪影响，建议深入探索内在需求，增强自我认知的稳定性。' : 
                              lowerType.includes('枯竭') ? '你需要加强自我认知，了解自身能量消耗模式，建议深入探索内在需求，建立自我支持系统。' : 
                              lowerType.includes('矛盾') ? '你存在内在冲突，自我认知不够一致，建议学会调和内在矛盾，增强自我认知的整合性。' : 
                              lowerType.includes('激情') ? '你对自我认知较为清晰，建议继续深化自我探索，将自我认知与成长目标结合。' : 
                              lowerType.includes('自我') ? '你对自我认知清晰，建议继续深入探索，拓展自我成长空间。' : 
                              lowerType.includes('焦虑') ? '你对自我认知存在偏差，容易自我否定，建议客观认识自我，培养自我接纳。' : 
                              lowerType.includes('碎片') ? '你对自我认知存在分裂，思维与情感难以整合，陷入严重的内耗。你习惯用理性分析来处理所有问题，包括情感需求，导致内心的碎片感越来越强。建议学会倾听内心的情感声音，将思维与情感视为平等的内在资源。' : 
                              lowerType.includes('敏感') ? '你对自我认知依赖外部评价，缺乏内在稳定性。你常常根据他人的反馈来定义自己的价值，容易陷入自我怀疑和自我否定。建议深化内在自我探索，建立基于自身价值观的自我认知，培养自我接纳和自我尊重。' : 
                              lowerType.includes('耗竭') ? '你对自我认知受结果影响大，成功时自信爆棚，失败时自我否定。你将自我价值高度绑定在具体目标的达成上，这种单一的价值来源让你在面对挫折时格外脆弱。建议客观认识自我价值，不再依赖单一结果，培养多元化的自我认知。' : 
                              lowerType.includes('冲突') ? '你对自我认知存在内在矛盾，难以形成统一的自我形象。你常常在理想自我和现实自我之间挣扎，既想要保持真实，又想要符合社会期待。这种分裂的自我认知让你感到困惑和不安。建议学会整合内在的不同面向，接纳自己的复杂性，形成更加包容的自我认知。' : 
                              lowerType.includes('稳健') ? '你对自我认知较为清晰，能够整合内在矛盾，形成相对统一的自我形象。你开始学会接纳自己的不完美，在稳定与成长之间找到平衡。建议继续深化自我探索，拓展自我认知的深度和广度。' : 
                              lowerType.includes('目标') ? '你对自我认知清晰，明确自身优势与发展方向，能够将个人特质与目标实现相结合。你学会了在自我成长与目标追求之间建立良性循环。建议继续深化自我认知，探索更多潜在优势，为目标实现提供更坚实的基础。' : 
                              lowerType.includes('系统') ? '你对自我认知清晰，能够用系统思维理解自身的内在复杂性。你不再试图消除内在矛盾，而是将其视为系统的不同模块，学会让它们协同工作。建议继续优化个人系统，提升模块间的协同效率，深化自我认知的整合程度。' : 
                              lowerType.includes('连接') ? '你对自我认知正在整合，能够理解自己不同内在部分的模式和需求。你不再试图压抑或消除任何部分，而是开始倾听和理解它们。建议继续深化这种整合能力，建立更有效的内在沟通机制，实现更高层次的自我和谐。' : 
                              lowerType.includes('适应') ? '你对自我认知正在整合，开始接纳自身的善变与敏感，将其视为独特的资源。你不再批判自己的本性，而是积极寻找适合自己的表达方式。建议继续深化这种自我接纳，探索更多元的自我表达形式，建立更加积极的自我认知。' : 
                              lowerType.includes('沟通') ? '你对自我认知清晰，能够整合内在资源，将理想与现实结合。你开始学会接纳自己的所有面向，形成更加统一的自我形象。建议继续深化自我探索，拓展自我认知的深度和广度。' : 
                              lowerType.includes('多元') ? '你对自我认知清晰，能够整合内在的多种声音。你开始将内在的多样性视为一种优势，而不再是困扰。建议继续深化自我整合能力，构建属于自己的认知框架，将多样性转化为理解复杂情境的独特优势。' : 
                              lowerType.includes('管理') ? '你对自我认知清晰，能够整合情感与秩序。你开始意识到可持续地关怀他人始于稳固的自我关照，学会了在关系中平衡付出与补给。建议继续深化自我整合能力，将情感与秩序的协调能力应用到更广泛的领域。' : 
                              lowerType.includes('共情') ? '你对自我认知清晰，能够平衡情感依赖与独立。你在情感独立与自我探索上迈出了关键一步，不再过度依赖他人的情感支持，而是能够主动体验并引导情感流动。建议继续深化情感独立能力，同时保持共情的优势。' : 
                              lowerType.includes('融合') ? '你对自我认知清晰，能够整合情感与务实。你开始为理想搭建现实的通路，不再空耗热情，而是运用务实行动，为内心的情感与愿景寻找现实的出口。建议继续深化情感与务实的整合能力，让理想在现实中落地。' : 
                              lowerType.includes('平衡') ? '你对自我认知清晰，能够整合双重视角。你在驾驭内在复杂性上取得了重要进展，开始将感性与理性视为互补的认知方式，而不是对立的。建议继续深化双重视角的整合能力，将内在的矛盾转化为认知的优势。' : 
                              '你正在发展自我认知，建议深入探索内在世界，增强自我了解。'}</td>
                        </tr>
                        <tr>
                            <td>职业与价值实现</td>
                            <td>${totalScores.dim4}/30</td>
                            <td>${getScoreStage(totalScores.dim4)}</td>
                            <td>${highestStage === '高阶' ? 
                              (lowerType.includes('行动') ? '你对职业价值认知明确，能够将个人价值观与职业发展完美结合。你正在实现自己的人生价值，并且能够在职业发展中找到成就感和满足感。建议继续深化职业探索，将个人成长与社会价值结合，实现更高层次的自我实现。' : 
                               lowerType.includes('跨界') ? '你对职业价值认知明确，能够在不同领域间找到连接和价值，创造跨界的职业价值。' : 
                               lowerType.includes('创造') ? '你对职业价值认知明确，能够将创造力转化为职业价值，创造出富有深度和意义的作品。' : 
                               lowerType.includes('表达') ? '你对职业价值认知明确，能够将表达能力转化为职业价值，输出有影响力的内容和思想。' : 
                               lowerType.includes('整合') ? '你对职业价值认知明确，能够整合不同的职业需求和价值，实现职业与个人价值的统一。' : 
                               lowerType.includes('实践') ? '你对职业价值认知明确，能够将实践能力转化为职业价值，实现自己的人生价值。' : 
                               lowerType.includes('实验') ? '你对职业价值认知明确，能够将实验精神转化为职业价值，探索新的可能性和方向。' : 
                               lowerType.includes('探索') ? '你对职业价值认知明确，能够将探索精神转化为职业价值，拓展自己的职业领域和经验。' : 
                               lowerType.includes('实干') ? '你对职业价值认知明确，能够将结构性创新转化为职业价值，创造出高效、可持续的产出系统。' : 
                               lowerType.includes('价值') ? '你对职业价值认知明确，能够将价值观转化为可持续的职业价值，实现长期的职业发展和自我实现。' : 
                               lowerType.includes('智慧') ? '你对职业价值认知明确，能够设计具有韧性与进化力的解决方案，创造持久且有生命力的价值。' : 
                               lowerType.includes('融思') ? '你对职业价值认知明确，能够输出独特的智慧体系，将多元思想整合为有价值的知识产品。' : 
                               lowerType.includes('联结') ? '你对职业价值认知明确，能够创造协同增效的价值，通过连接不同的人和资源创造更大的价值。' : 
                               lowerType.includes('传播') ? '你对职业价值认知明确，能够将价值观转化为有影响力的传播，影响和改变他人的思想和行为。' : 
                               lowerType.includes('思想') ? '你对职业价值认知明确，能够输出深刻的思想，影响和启发他人，创造思想价值。' : 
                               lowerType.includes('疗愈') ? '你对职业价值认知明确，能够帮助他人疗愈和成长，创造情感和心灵价值。' : 
                               lowerType.includes('启迪') ? '你对职业价值认知明确，能够帮助他人认识自己和世界，创造智慧和启迪价值。' : 
                               lowerType.includes('滋养') ? '你对职业价值认知明确，能够创造安全包容的环境，滋养他人的成长和发展，创造支持和滋养价值。' : 
                               (lowerType.includes('通明') || lowerType.includes('透明')) ? '你对职业价值认知明确，能够展现真实的力量，通过真实的自我展现影响和启发他人，创造真实和信任价值。' : 
                               '你对职业价值认知明确，能够将个人价值观与职业发展完美结合。你正在实现自己的人生价值，并且能够在职业发展中找到成就感和满足感。建议继续深化职业探索，将个人成长与社会价值结合，实现更高层次的自我实现。') :  
                              lowerType.includes('冲动') ? '你对职业价值的认知正在形成中，建议明确职业目标，将热情与现实结合。' : 
                              lowerType.includes('枯竭') ? '你需要提升职业价值感，寻找与自身价值观契合的职业方向，建议探索职业兴趣，建立职业发展规划。' : 
                              lowerType.includes('矛盾') ? '你对职业价值认知模糊，存在内在冲突，建议明确职业目标，整合内在需求与职业发展。' : 
                              lowerType.includes('激情') ? '你对职业价值感强烈，建议将激情转化为职业动力，建立长期职业规划。' : 
                              lowerType.includes('自我') ? '你对职业价值认知明确，建议将自我认知与职业发展结合，追求职业成长。' : 
                              lowerType.includes('焦虑') ? '你对职业价值认知不明确，容易焦虑，建议探索适合的职业方向，建立职业信心。' : 
                              lowerType.includes('碎片') ? '你对职业价值认知存在过度分析，难以做出决策，导致行动力不足。你习惯反复权衡各种可能性，却在这个过程中消耗了大量能量，无法采取切实行动。建议设定明确的决策期限，先行动再完善，逐步积累职业经验。' : 
                              lowerType.includes('敏感') ? '你对职业价值认知不明确，容易随波逐流，缺乏内在动力。你常常根据他人的期望或社会潮流来选择职业方向，忽略了自己的真实需求和兴趣。建议深化内在自我探索，明确自身价值观和兴趣，寻找与个人特质契合的职业方向。' : 
                              lowerType.includes('耗竭') ? '你对职业价值认知单一，过度追求目标实现，忽视过程体验。你常常将职业视为需要全力攻克的目标，容易在追求成功的过程中忽略自己的身心健康。建议重新审视职业价值，平衡目标与过程，寻找可持续的职业发展模式。' : 
                              lowerType.includes('冲突') ? '你对职业价值认知模糊，容易陷入理想与现实的冲突中。你渴望从事有意义的工作，但又担心无法养活自己；你想要追求兴趣爱好，但又害怕被视为不切实际。这种内在的冲突让你在职业选择上犹豫不决，难以采取行动。建议明确自己的核心价值观，寻找能够平衡理想与现实的职业方向，从小步行动开始积累经验。' : 
                              lowerType.includes('稳健') ? '你对职业价值认知正在形成，注重平衡理想与现实，希望找到既有意义又能稳定发展的职业方向。建议继续探索自身价值观，寻找与个人特质契合的职业路径。' : 
                              lowerType.includes('目标') ? '你对职业价值认知明确，能够将理想转化为具体的职业目标，并制定可行的实现路径。你学会了在职业发展中平衡个人价值观与现实需求，形成了清晰的职业规划。建议继续完善职业目标管理系统，将长期理想与短期目标相结合，实现可持续的职业成长。' : 
                              lowerType.includes('系统') ? '你对职业价值认知明确，能够用系统思维规划职业发展。你不再将职业视为单一的目标，而是将其作为个人系统的重要组成部分，学会平衡职业发展与个人成长、生活质量等其他系统模块。建议继续优化职业系统，提升职业发展的可持续性和适应性。' : 
                              lowerType.includes('连接') ? '你对职业价值认知明确，注重内外世界的连接与平衡。你不再将职业视为纯粹的外在追求，而是将其作为连接内在价值与外在现实的桥梁。建议继续深化这种连接能力，将内在资源转化为外在行动，实现更有意义的职业发展。' : 
                              lowerType.includes('适应') ? '你对职业价值认知明确，注重创造性表达与个人风格。你不再追求传统意义上的成功，而是寻找能够让你真实展现自我、发挥创造力的职业方向。建议继续探索多元化的表达形式，寻找适合自己的职业发展路径，实现更有意义的职业成长。' : 
                              lowerType.includes('沟通') ? '你对职业价值认知明确，注重理想与现实的连接。你能够将宏大的理想拆解为可执行的具体步骤，不再停留在空想阶段。建议继续深化职业规划，将理想与现实更好地结合，实现职业价值的最大化。' : 
                              lowerType.includes('多元') ? '你对职业价值认知明确，注重跨领域知识的连接与应用。你能够将不同领域的知识和技能整合起来，创造出独特的价值。建议继续深化跨领域整合能力，寻找能够发挥你多元优势的职业方向。' : 
                              lowerType.includes('管理') ? '你对职业价值认知明确，注重情感管理与支持性工作。你正在从随波逐流的状态，成长为更有意识的情感引导者与关系维护者。建议继续深化情感管理能力，寻找能够发挥你支持性特质的职业方向。' : 
                              lowerType.includes('共情') ? '你对职业价值认知明确，注重情感支持与引导性工作。你正在从情感的依赖者，转变为有意识的体验者与导航者，能够驾驭情感的河流。建议继续深化共情能力，寻找能够发挥你情感引导特质的职业方向。' : 
                              lowerType.includes('融合') ? '你对职业价值认知明确，注重理想与现实的结合。你正学习将"感受"转化为"方案"，将"热爱"落地为"行动"。建议继续深化理想与现实的融合能力，寻找能够让你将情感与行动结合的职业方向。' : 
                              lowerType.includes('平衡') ? '你对职业价值认知明确，注重感性与理性的平衡。你正在从内在的消耗者，逐渐转向清醒的觉察者与初步的整合者。建议继续深化内在平衡能力，寻找能够发挥你双重视角优势的职业方向。' : 
                              '你正在形成职业价值认知，建议探索职业兴趣，明确职业发展方向。'}</td>
                        </tr>
                    </table>
                </div>
            `;
            
            // 根据星座元素和血型生成特质解码描述
            const bloodType = testState.basicInfo.bloodType;
            
            // 先天倾向描述（根据星座元素）
            let innateTendency = '';
            if (constellationElement === '火') {
                innateTendency = `${constellationElement}象星座赋予您行动的激情、充沛的能量和对生命意义的强烈渴望。您本能地想要去创造、去引领、去体验，内心燃烧着理想主义的火焰。`;
            } else if (constellationElement === '土') {
                innateTendency = `${constellationElement}象星座赋予您务实的态度、稳定的能量和对安全感的强烈需求。您本能地想要去构建、去稳定、去落实，内心追求着踏实的安全感。`;
            } else if (constellationElement === '风') {
                innateTendency = `${constellationElement}象星座赋予您灵活的思维、好奇的天性和对知识的强烈渴望。您本能地想要去探索、去交流、去理解，内心追求着自由的表达。`;
            } else {
                innateTendency = `${constellationElement}象星座赋予您敏感的情感、深厚的同理心和对连接的强烈渴望。您本能地想要去感受、去关怀、去滋养，内心追求着深刻的情感连接。`;
            }
            
            // 行为模式描述（根据血型）
            let behaviorPattern = '';
            if (bloodType === 'A') {
                behaviorPattern = `${bloodType}型血的谨慎、细致、完美主义和高度责任感，让您注重逻辑、秩序和计划。您希望事情都能在掌控中，按完美的标准执行。`;
            } else if (bloodType === 'B') {
                behaviorPattern = `${bloodType}型血的灵活、自由、创造力和独特个性，让您注重体验、变化和自我表达。您希望事情能够充满新鲜感，按自己的节奏和方式执行。`;
            } else if (bloodType === 'O') {
                behaviorPattern = `${bloodType}型血的务实、目标导向和强大执行力，确保您的热情能够找到落地的路径。您重视成果，善于制定策略并坚持执行。`;
            } else {
                behaviorPattern = `${bloodType}型血的综合、平衡、适应力和洞察力，让您能够灵活应对各种情况。您重视和谐，善于整合不同的观点和资源。`;
            }
            
            // 生成成长建议（特质解释、个性化成长指南和长期发展建议）
            const growthAdvice = document.getElementById('growth-advice');
            growthAdvice.innerHTML = `
                <div class="report-content">
                    <h4 class="report-subtitle">您的特质解码：星座与血型</h4>
                    <p class="report-paragraph">
                        您的星座组：${constellationElement}象星座（${testState.basicInfo.constellation}）
                    </p>
                    <p class="report-paragraph">
                        先天倾向：${innateTendency}
                    </p>
                    <p class="report-paragraph">
                        您的血型：${testState.basicInfo.bloodType}型
                    </p>
                    <p class="report-paragraph">
                        行为模式：${behaviorPattern}
                    </p>
                    
                        ${lowerType.includes('冲动') ? `${constellationElement}象星座的激情与能量赋予您强大的行动力，但${testState.basicInfo.bloodType}型血的灵活与多变又使您难以持久专注，容易陷入"冲动-耗竭"的循环。这种组合让您充满活力，但需要学会管理能量，建立稳定的行动节奏。` : 
                          lowerType.includes('枯竭') ? `${constellationElement}象星座的热情推动您全力投入，但${testState.basicInfo.bloodType}型血的目标导向又使您过度消耗能量，陷入"爆发—熄火"的循环。您需要学会合理分配精力，建立可持续的行动模式。` : 
                          lowerType.includes('矛盾') ? `${constellationElement}象星座的激情与${testState.basicInfo.bloodType}型血的理性思维形成鲜明对比，导致您内心产生强烈的冲突。这种矛盾让您思考深刻，但也容易消耗大量心理能量，需要学会调和内在矛盾。` : 
                          lowerType.includes('激情') ? `${constellationElement}象星座的激情与${testState.basicInfo.bloodType}型血的热情相互呼应，使您充满活力和创造力。但您需要学会聚焦，将分散的能量集中到最有价值的目标上，避免精力过度分散。` : 
                          lowerType.includes('自我') ? `${constellationElement}象星座的独立精神与${testState.basicInfo.bloodType}型血的内省特质相结合，使您拥有强烈的自我意识。但您需要在独立与连接之间找到平衡，避免过度自我封闭。` : 
                          lowerType.includes('焦虑') ? `${constellationElement}象星座的敏感特质与${testState.basicInfo.bloodType}型血的焦虑倾向相结合，使您容易过度担忧和自我怀疑。您的情绪容易受到外界影响，对他人的评价和态度非常敏感，导致内心压力过大。` : 
                          lowerType.includes('碎片') ? `${constellationElement}象星座带来的活跃思维，与${testState.basicInfo.bloodType}型血天生的完美主义，在您内心交织成一片由无数闪光碎片组成的海洋。每一片都映照着一个可能性或一丝忧虑，但它们难以拼合成清晰的图景，反而让您在反复的分析与思虑中持续消耗心力，难以踏出切实的第一步。` : 
                          lowerType.includes('敏感') ? `${constellationElement}象星座的活跃思维与${testState.basicInfo.bloodType}型血追求自由的天性，使您像一颗蒲公英，能灵敏地感知并跟随每一阵风。您拥有开放的感知力，却也因缺乏稳定的内在核心，容易在生活的气流中漂泊不定，难以持续扎根生长。` : 
                          lowerType.includes('耗竭') ? `${constellationElement}象星座的热情与${testState.basicInfo.bloodType}型血的目标导向相结合，使您拥有强大的行动动力，但也容易过度投入，导致能量枯竭。您需要学会平衡热情与精力，建立可持续的行动模式，避免陷入"全力爆发—彻底熄火"的循环。` : 
                          lowerType.includes('冲突') ? `${constellationElement}象星座的特质与${testState.basicInfo.bloodType}型血的行为模式在你身上形成了强烈的内在张力。这种组合让你既能够深刻理解事物的多个面向，又容易陷入决策瘫痪。你需要学会将这种冲突的张力转化为创造的动力，找到适合自己的平衡方式。` : 
                          lowerType.includes('行动') ? `${constellationElement}象星座的行动魄力与${testState.basicInfo.bloodType}型血的目标导向和执行力完美结合，使您成为一位真正的"愿景实现者"，能将宏大的构想系统性地转化为可触摸、可持续的现实成果。` : 
                          lowerType.includes('跨界') ? `${constellationElement}象星座的突破精神与${testState.basicInfo.bloodType}型血的多元思维能力相结合，赋予您一种"结构性直觉"，能自然洞察不同系统间的潜在联系，并进行创新性重组。` : 
                          lowerType.includes('稳健') ? `${constellationElement}象星座的稳定性与${testState.basicInfo.bloodType}型血的灵活性相结合，使您能够在稳定与变化之间找到动态平衡。您既能够保持内心的稳定，又能够灵活应对外部的变化，这种特质让您在面对挑战时能够从容应对。` : 
                          lowerType.includes('目标') ? `${constellationElement}象星座的务实精神与${testState.basicInfo.bloodType}型血的目标导向相结合，使您能够将宏大理想分解为清晰可行的具体步骤。您学会了在理想主义的激情与现实主义的规划之间建立有效连接，让梦想扎根于可执行的行动路径中。` : 
                          lowerType.includes('系统') ? `${constellationElement}象星座的稳定特质与${testState.basicInfo.bloodType}型血的多元思维相结合，使您能够用系统思维理解和管理自身的内在复杂性。您不再试图消除内在矛盾，而是为它们设计一个有序的个人操作系统，让不同特质协同工作。` : 
                          lowerType.includes('连接') ? `${constellationElement}象星座的广阔思维与${testState.basicInfo.bloodType}型血的条理逻辑相结合，使您能够为丰富的内心世界绘制认知地图。您不再将理性与感性对立，而是学习用逻辑来梳理、理解并承载敏锐的感受，实现内外世界的有效连接。` : 
                          lowerType.includes('适应') ? `${constellationElement}象星座的流动灵感与${testState.basicInfo.bloodType}型血的自由天性相结合，使您能够将内心多变的情绪与思绪捕捉并转化为有形的表达。您不再批判自己的善变或敏感，而是将其视为独特的资源，建立起兼具弹性与个人风格的内在秩序。` : 
                          lowerType.includes('沟通') ? `${constellationElement}象星座的全局洞察与${testState.basicInfo.bloodType}型血的目标驱动力相结合，使您能够在理想与现实之间建立可行的连接。您不再停留于空想，而是能够为理想规划出可行的路径，并懂得根据现实情况灵活调整方法。` : 
                          lowerType.includes('多元') ? `${constellationElement}象星座的发散思维与${testState.basicInfo.bloodType}型血的多元视角相结合，使您能够整合内在的多种声音，将多样性转化为理解复杂情境的独特优势。您正在构建属于自己的认知框架，学习管理内在的"专家团"。` : 
                          lowerType.includes('管理') ? `${constellationElement}象星座的情感深度与${testState.basicInfo.bloodType}型血的秩序感相结合，使您能够协调丰沛的情感与内在的秩序，在情绪世界中建立根基与边界。您正在成长为更有意识的情感引导者与关系维护者。` : 
                          lowerType.includes('共情') ? `${constellationElement}象星座的情感敏感与${testState.basicInfo.bloodType}型血的自由天性相结合，使您能够主动探索情感世界，从情感的依赖者转变为有意识的体验者与导航者。` : 
                          lowerType.includes('融合') ? `${constellationElement}象星座的情感深度与${testState.basicInfo.bloodType}型血的务实特质相结合，使您能够为理想搭建现实的通路，将"感受"转化为"方案"，将"热爱"落地为"行动"。` : 
                          lowerType.includes('平衡') ? `${constellationElement}象星座的情感深度与${testState.basicInfo.bloodType}型血的双重视角相结合，使您能够调和内在矛盾，将感性的体验与理性的观察整合为更丰富、更清晰的认知。` : 
                          lowerType.includes('创造') ? `${constellationElement}象星座的创造力与${testState.basicInfo.bloodType}型血的独特个性相结合，使您能够将丰富的内心世界转化为有价值的创造。您的创造力既有深度又有广度，能够在不同领域创造出独特的价值。` : 
                          lowerType.includes('表达') ? `${constellationElement}象星座的表达欲望与${testState.basicInfo.bloodType}型血的沟通能力相结合，使您能够将内心的情感和想法有效地表达出来。您的表达既有感染力又有说服力，能够触动他人的内心。` : 
                          lowerType.includes('整合') ? `${constellationElement}象星座的整合能力与${testState.basicInfo.bloodType}型血的平衡特质相结合，使您能够将不同的元素整合为一个和谐的整体。您的整合能力既有深度又有广度，能够在不同领域实现有效的整合。` : 
                          lowerType.includes('实践') ? `${constellationElement}象星座的实践精神与${testState.basicInfo.bloodType}型血的行动力相结合，使您能够将想法转化为实际的行动和成果。您的实践能力既有效率又有质量，能够在不同领域取得实际的成果。` : 
                          lowerType.includes('实验') ? `${constellationElement}象星座的实验精神与${testState.basicInfo.bloodType}型血的探索欲望相结合，使您能够不断探索新的可能性和方法。您的实验能力既有创新性又有系统性，能够在不同领域探索出新的路径。` : 
                          lowerType.includes('探索') ? `${constellationElement}象星座的探索精神与${testState.basicInfo.bloodType}型血的好奇心相结合，使您能够不断探索新的领域和知识。您的探索能力既有广度又有深度，能够在不同领域获得丰富的经验和知识。` : 
                          lowerType.includes('实干') ? `${constellationElement}象星座的务实特质与${testState.basicInfo.bloodType}型血的执行力相结合，使您能够将创新想法转化为实际的、可持续的成果。您的实干精神既有稳定性又有创新性，能够在保持系统稳定的同时导入有效的变化。` : 
                          lowerType.includes('价值') ? `${constellationElement}象星座的价值导向与${testState.basicInfo.bloodType}型血的使命感相结合，使您能够将深刻的价值观转化为可持续的现实。您的价值实现既有意义又有影响力，能够为自己和他人创造持久的价值。` : 
                          lowerType.includes('智慧') ? `${constellationElement}象星座的智慧特质与${testState.basicInfo.bloodType}型血的洞察力相结合，使您能够将深刻的洞察力与多元的视角融合，搭建起连接不同领域的思维框架。您的智慧既有深度又有广度，能够创造出兼具韧性与进化力的解决方案。` : 
                          lowerType.includes('融思') ? `${constellationElement}象星座的思考能力与${testState.basicInfo.bloodType}型血的整合特质相结合，使您能够将多元的思想、情感和经验融合为一个有机的整体。您的融思能力既有深度又有广度，能够形成独特的智慧体系。` : 
                          lowerType.includes('联结') ? `${constellationElement}象星座的连接能力与${testState.basicInfo.bloodType}型血的关系特质相结合，使您能够在不同的人和事物之间建立有意义的连接。您的联结能力既有影响力又有价值，能够创造出协同增效的结果。` : 
                          lowerType.includes('传播') ? `${constellationElement}象星座的传播欲望与${testState.basicInfo.bloodType}型血的表达能力相结合，使您能够将深刻的价值观和思想通过有效的方式传播给他人。您的传播能力既有感染力又有说服力，能够产生积极的影响。` : 
                          lowerType.includes('思想') ? `${constellationElement}象星座的思想深度与${testState.basicInfo.bloodType}型血的逻辑思维相结合，使您能够进行深刻、系统的思考，形成独特的思想体系。您的思想既有深度又有广度，能够影响和启发他人。` : 
                          lowerType.includes('疗愈') ? `${constellationElement}象星座的共情能力与${testState.basicInfo.bloodType}型血的关怀特质相结合，使您能够深刻理解他人的痛苦和需求，并用温暖、有效的方式帮助他人疗愈和成长。您的疗愈能力既有深度又有温度，能够创造出积极的改变。` : 
                          lowerType.includes('启迪') ? `${constellationElement}象星座的洞察能力与${testState.basicInfo.bloodType}型血的智慧特质相结合，使您能够洞察事物的本质和规律，并用深刻、有启发性的方式帮助他人认识自己和世界。您的启迪能力既有深度又有影响力，能够带来深远的影响。` : 
                          lowerType.includes('滋养') ? `${constellationElement}象星座的滋养能力与${testState.basicInfo.bloodType}型血的支持特质相结合，使您能够用温暖、支持的方式滋养他人的成长和发展，创造出安全、包容的环境。您的滋养能力既有温度又有力量，能够促进他人的成长和发展。` : 
                          (lowerType.includes('通明') || lowerType.includes('透明')) ? `${constellationElement}象星座的真实特质与${testState.basicInfo.bloodType}型血的坦诚特质相结合，使您能够完全接纳自己的所有面向，展现出真实、透明的自我。您的透明特质既有力量又有感染力，能够建立起深厚的信任关系。` : 
                          ``}
                    </p>
                    
                    <h4 class="report-subtitle">您的个性化成长指南</h4>
                    <p class="report-paragraph">
                        ${highestStage === '高阶' ? 
                          (lowerType.includes('行动') ? '在持续实现中 refining（精炼）愿景，扩大创造的影响规模。作为一位成熟的行动梦想家，您的重点是在保持行动力的同时，继续深化和拓展您的愿景。思考如何将个人成功转化为更大范围的积极影响，同时确保这一过程不会背离您的核心价值。' : 
                           lowerType.includes('跨界') ? '作为成熟的跨界型INFP，你的核心发展在于：在保持广阔视野的同时，锚定几个真正有潜力的交叉领域进行深耕。关键在于构建一套系统性的创作流程——既能持续吸收多元灵感，又能稳定地将创意转化为扎实的、可落地的成果。' : 
                           lowerType.includes('创造') ? '作为成熟的创造型INFP，你的核心发展在于：在保持创造力的同时，提升作品的深度和影响力。关键在于构建一套系统性的创作方法，既能持续产生创意，又能将创意转化为高质量的作品。' : 
                           lowerType.includes('表达') ? '作为成熟的表达型INFP，你的核心发展在于：在保持表达真实性的同时，提升表达的影响力和感染力。关键在于构建一套系统性的表达方法，既能清晰地表达自己的想法和情感，又能触动他人的内心。' : 
                           lowerType.includes('整合') ? '作为成熟的整合型INFP，你的核心发展在于：在保持内在平衡的同时，提升整合的深度和广度。关键在于构建一套系统性的整合方法，既能整合自己的内在资源，又能整合外部的资源和价值。' : 
                           lowerType.includes('实践') ? '作为成熟的实践型INFP，你的核心发展在于：在保持行动力的同时，提升实践的深度和影响力。关键在于构建一套系统性的实践方法，既能将想法转化为行动，又能将行动转化为有价值的成果。' : 
                           lowerType.includes('实验') ? '作为成熟的实验型INFP，你的核心发展在于：在保持探索精神的同时，提升实验的系统性和有效性。关键在于构建一套系统性的实验方法，既能探索各种可能性，又能从实验中总结经验和教训。' : 
                           lowerType.includes('探索') ? '作为成熟的探索型INFP，你的核心发展在于：在保持好奇心的同时，提升探索的深度和方向性。关键在于构建一套系统性的探索方法，既能探索各种可能性，又能找到适合自己的成长路径。' : 
                           lowerType.includes('实干') ? '作为成熟的实干型INFP，你的核心发展在于：在保持系统稳定的同时，持续深化结构性创新。关键在于构建一套可持续的创新系统，既能保持现有成果的稳定性，又能不断导入新的创新元素，实现系统的持续进化。' : 
                           lowerType.includes('价值') ? '作为成熟的价值型INFP，你的核心发展在于：在保持价值观清晰的同时，扩大价值实现的影响范围。关键在于构建一套价值传播系统，既能保持核心价值观的一致性，又能让更多人理解和认同你的价值观，实现更大范围的价值创造。' : 
                           lowerType.includes('智慧') ? '作为成熟的智慧型INFP，你的核心发展在于：在保持生态思维的同时，深化价值生态的培育。关键在于构建一套生态系统设计方法，既能设计出具有韧性与进化力的系统，又能让系统中的各个要素相互滋养、共同发展。' : 
                           lowerType.includes('融思') ? '作为成熟的融思型INFP，你的核心发展在于：在保持多元思想整合的同时，提升智慧体系的影响力。关键在于构建一套智慧输出系统，既能将多元思想整合为有机的整体，又能让智慧体系清晰地传达给他人，产生积极的影响。' : 
                           lowerType.includes('联结') ? '作为成熟的联结型INFP，你的核心发展在于：在保持有意义连接的同时，扩大连接网络的价值。关键在于构建一套连接管理系统，既能建立和维护有意义的连接，又能让连接网络产生协同增效的价值，实现更大范围的价值创造。' : 
                           lowerType.includes('传播') ? '作为成熟的传播型INFP，你的核心发展在于：在保持价值传播有效性的同时，扩大传播的影响范围。关键在于构建一套传播策略系统，既能将价值观有效地传播给目标受众，又能让传播产生持续的影响力，推动积极的社会变化。' : 
                           lowerType.includes('思想') ? '作为成熟的思想型INFP，你的核心发展在于：在保持深度思考的同时，提升思想体系的系统性和影响力。关键在于构建一套思想表达系统，既能将深刻的思想系统化地组织起来，又能让思想清晰地传达给他人，影响和启发更多人。' : 
                           lowerType.includes('疗愈') ? '作为成熟的疗愈型INFP，你的核心发展在于：在保持深度共情的同时，扩大疗愈的影响范围。关键在于构建一套疗愈支持系统，既能用温暖、有效的方式帮助他人疗愈和成长，又能让疗愈能力系统化地传播，帮助更多需要帮助的人。' : 
                           lowerType.includes('启迪') ? '作为成熟的启迪型INFP，你的核心发展在于：在保持深度洞察的同时，扩大启迪的影响范围。关键在于构建一套启迪方法系统，既能洞察事物的本质和规律，又能以深刻、有启发性的方式帮助他人认识自己和世界，实现更大范围的智慧传播。' : 
                           lowerType.includes('滋养') ? '作为成熟的滋养型INFP，你的核心发展在于：在保持滋养能力的同时，扩大滋养的影响范围。关键在于构建一套滋养环境系统，既能创造安全、包容的环境滋养他人的成长和发展，又能让滋养能力系统化地传播，创造更多支持性的成长环境。' : 
                           (lowerType.includes('通明') || lowerType.includes('透明')) ? '作为成熟的通明型INFP，你的核心发展在于：在保持真实透明的同时，扩大真实的影响范围。关键在于构建一套真实展现系统，既能完全接纳自己并展现真实的自我，又能让真实的力量影响和启发他人，创造更信任的社会环境。' : 
                           '作为高阶INFP，你的核心发展在于：将个人成长与社会价值结合，实现更高层次的自我实现。你已经具备了良好的自我认知、情绪管理能力和职业价值认知，现在需要思考如何将这些优势转化为更大的社会影响力。') : 
                          lowerType.includes('冲动') ? '建立稳定的能量节奏，而非压抑你的光芒。您的目标不是变得无趣或刻板，而是为您强大的感受力和创造力建立一个更可持续的"发射架"。' : 
                          lowerType.includes('枯竭') ? '建立可持续的能量循环，从消耗战转向持久战。您的核心任务是为自己安装"能量调节阀"，学会在热情驱动和目标管理之间找到平衡。' : 
                          lowerType.includes('矛盾') ? '从内部协调走向创造性整合，将矛盾的张力转化为创造的势能。您的目标不是消除任何一种声音，而是为内心的感性与理性搭建对话的桥梁，找到一个能让它们协同工作的模式。' : 
                          lowerType.includes('激情') ? '聚焦你的热情，将分散的能量集中到最有价值的目标上。您的目标不是抑制热情，而是学会筛选和聚焦，让热情成为推动你前进的持久动力。' : 
                          lowerType.includes('自我') ? '在独立与连接之间找到平衡，打开内心的大门，允许他人进入你的世界。您的目标不是放弃独立，而是学会在保持自我的同时，建立健康的人际关系。' : 
                          lowerType.includes('焦虑') ? '学会接纳不确定性，减少过度担忧和自我怀疑。您的目标是建立内在的安全感，学会理性评估风险，不再被焦虑情绪所控制，而是将其转化为行动的动力。' : 
                          lowerType.includes('碎片') ? '从消耗状态转向建设性行动，将过度分析转化为有价值的洞察。您的目标不是消除思考，而是学会在思考与行动之间找到平衡，让思维成为支持行动的工具，而非消耗行动的障碍。' : 
                          lowerType.includes('敏感') ? '建立稳定的内在核心，从外部导向转向内部导向。您的目标是不再被外界的情绪和评价所左右，而是建立基于自身价值观的稳定自我认知，培养情绪自主性和边界意识。' : 
                          lowerType.includes('耗竭') ? '从"冲刺型"转向"长跑型"，建立可持续的能量管理系统。您的目标是学会平衡热情与精力，不再将职业视为需要全力攻克的目标，而是将其视为长期发展的过程，关注身心健康和过程体验。' : 
                          lowerType.includes('冲突') ? '学会与内在冲突共存，将矛盾转化为创造力的源泉。你不需要消除内在的任何一种声音，而是要学会倾听它们，理解它们的需求，并找到一个能让它们协同工作的模式。关键是要建立自我接纳，允许自己同时拥有多种不同的想法和感受，不再追求完美的一致性。' : 
                          lowerType.includes('稳健') ? '继续深化稳定与自由之间的动态平衡，在保持核心秩序的同时，拓展探索的边界。您的目标是建立一个既有结构又有弹性的成长系统，既能提供安全感，又能支持持续的探索和发展。' : 
                          lowerType.includes('目标') ? '继续完善目标管理系统，将宏大理想与具体行动相结合，在动态调整中稳步前进。您的目标是建立一个可持续的目标实现机制，既能保持理想主义的激情，又能实现现实主义的规划。' : 
                          lowerType.includes('系统') ? '继续优化个人操作系统，提升模块间的协同效率和系统的适应性。您的目标是建立一个更加完善的个人系统，让不同的特质和需求能够更加和谐地协同工作，实现更高层次的自我整合。' : 
                          lowerType.includes('连接') ? '继续深化自我观察能力，完善内在沟通机制，实现更高层次的自我和谐。您的目标是建立更有效的内外连接，将内在资源转化为外在行动，实现更有意义的个人成长和职业发展。' : 
                          lowerType.includes('适应') ? '继续深化情绪转化能力，建立弹性的创作框架，探索多元化的表达形式。您的目标是找到最适合自己的表达方式，将内心的创作原料转化为有价值的作品，实现创造性成长。' : 
                          lowerType.includes('沟通') ? '继续深化理想与现实的连接能力，将宏大的愿景转化为可执行的具体步骤。关键是要保持灵活的思维，同时坚持内心的方向，在变化中寻找平衡，实现持续的成长和发展。' : 
                          lowerType.includes('多元') ? '继续深化内在多样性的整合，构建属于自己的认知框架。关键是要学会管理内在的多种声音，让它们在合适的场合发挥作用，将曾经带来困扰的多样性转化为理解复杂情境的独特优势。' : 
                          lowerType.includes('管理') ? '继续深化情感与秩序的协调能力，将内在秩序感转化为支持他人的能力。关键是要保持自我关照的同时，扩展你的情感支持范围，成为更有意识的情感引导者。' : 
                          lowerType.includes('共情') ? '继续深化情感独立与共情能力的平衡，将情感体验转化为帮助他人的资源。关键是要在保持情感深度的同时，建立健康的情感边界，成为更有效的情感导航者。' : 
                          lowerType.includes('融合') ? '继续深化理想与现实的融合能力，将情感与行动有效结合。关键是要保持情感的热情，同时运用务实的行动，为理想搭建更坚实的现实通路。' : 
                          lowerType.includes('平衡') ? '继续深化双重视角的整合能力，将内在的矛盾转化为认知的优势。关键是要保持对内在复杂性的觉察，同时学会将这种复杂性转化为更丰富、更清晰的认知。' : 
                          '探索你的内在世界，了解自己的优势和潜力，找到适合自己的成长路径。您的目标不是模仿他人，而是成为真正的自己。'}
                    </p>
                    <ul class="advice-list">
                        ${highestStage === '高阶' ? 
                          (lowerType.includes('行动') ? `
                        <li><strong>建立更大的社会连接</strong>：将你的优势和经验分享给他人，帮助更多人实现成长。</li>
                        <li><strong>探索更大的社会价值</strong>：思考如何将你的个人成长与社会价值结合，实现更高层次的自我实现。</li>
                        <li><strong>培养系统性思维</strong>：学会从系统的角度思考问题，提升你的领导力和影响力。</li>
                        <li><strong>持续深化自我探索</strong>：即使在高阶阶段，自我探索仍然是重要的，它能帮助你不断突破自我，实现更高层次的成长。</li>
                        <li><strong>建立可持续的成长模式</strong>：保持良好的生活习惯和工作节奏，确保你的成长是可持续的。</li>
                        ` : 
                           lowerType.includes('跨界') ? `
                        <li><strong>锚定核心交叉领域</strong>：在保持广阔视野的同时，选择几个真正有潜力的交叉领域进行深耕。</li>
                        <li><strong>构建系统性创作流程</strong>：建立一套既能吸收多元灵感，又能稳定产出成果的创作流程。</li>
                        <li><strong>提升整合能力</strong>：学会更好地整合不同领域的知识和经验，创造出更有价值的成果。</li>
                        <li><strong>培养耐心和坚持</strong>：在跨界探索中保持耐心和坚持，不要轻易放弃。</li>
                        <li><strong>分享你的经验</strong>：将你的跨界经验和方法分享给他人，帮助更多人实现跨界成长。</li>
                        ` : 
                           lowerType.includes('创造') ? `
                        <li><strong>深化创作主题</strong>：在保持创造力的同时，深化你的创作主题，提升作品的深度和内涵。</li>
                        <li><strong>构建创作系统</strong>：建立一套既能持续产生创意，又能将创意转化为高质量作品的创作系统。</li>
                        <li><strong>提升作品影响力</strong>：思考如何提升你的作品的影响力和传播力。</li>
                        <li><strong>与其他创作者合作</strong>：与其他创作者合作，互相学习和启发，提升创作水平。</li>
                        <li><strong>分享你的创作经验</strong>：将你的创作经验和方法分享给他人，帮助更多人提升创作能力。</li>
                        ` : 
                           lowerType.includes('表达') ? `
                        <li><strong>提升表达技巧</strong>：在保持表达真实性的同时，提升你的表达技巧和能力。</li>
                        <li><strong>构建表达系统</strong>：建立一套既能清晰表达自己，又能触动他人的表达系统。</li>
                        <li><strong>扩大表达影响力</strong>：思考如何扩大你的表达的影响力和传播范围。</li>
                        <li><strong>与不同受众连接</strong>：尝试与不同的受众连接，了解他们的需求和反馈。</li>
                        <li><strong>分享你的表达经验</strong>：将你的表达经验和方法分享给他人，帮助更多人提升表达能力。</li>
                        ` : 
                           lowerType.includes('整合') ? `
                        <li><strong>深化内在整合</strong>：在保持内在平衡的同时，深化你的内在整合，提升整合的深度和广度。</li>
                        <li><strong>构建整合系统</strong>：建立一套既能整合内在资源，又能整合外部资源的整合系统。</li>
                        <li><strong>提升整合影响力</strong>：思考如何将你的整合能力应用到更广阔的领域，产生更大的影响力。</li>
                        <li><strong>帮助他人整合</strong>：将你的整合经验和方法分享给他人，帮助更多人实现内在整合。</li>
                        <li><strong>保持开放的心态</strong>：在整合过程中保持开放的心态，接纳不同的观点和价值。</li>
                        ` : 
                           lowerType.includes('实践') ? `
                        <li><strong>深化实践领域</strong>：在保持行动力的同时，深化你的实践领域，提升实践的深度和专业性。</li>
                        <li><strong>构建实践系统</strong>：建立一套既能将想法转化为行动，又能将行动转化为有价值成果的实践系统。</li>
                        <li><strong>提升实践影响力</strong>：思考如何提升你的实践的影响力和社会价值。</li>
                        <li><strong>与其他实践者合作</strong>：与其他实践者合作，互相学习和支持，提升实践效果。</li>
                        <li><strong>分享你的实践经验</strong>：将你的实践经验和方法分享给他人，帮助更多人提升实践能力。</li>
                        ` : 
                           lowerType.includes('实验') ? `
                        <li><strong>深化实验领域</strong>：在保持探索精神的同时，深化你的实验领域，提升实验的系统性和有效性。</li>
                        <li><strong>构建实验系统</strong>：建立一套既能探索各种可能性，又能从实验中总结经验和教训的实验系统。</li>
                        <li><strong>提升实验影响力</strong>：思考如何提升你的实验的影响力和应用价值。</li>
                        <li><strong>与其他实验者合作</strong>：与其他实验者合作，互相学习和启发，提升实验效果。</li>
                        <li><strong>分享你的实验经验</strong>：将你的实验经验和方法分享给他人，帮助更多人提升实验能力。</li>
                        ` : 
                           lowerType.includes('探索') ? `
                        <li><strong>深化探索领域</strong>：在保持好奇心的同时，深化你的探索领域，提升探索的深度和方向性。</li>
                        <li><strong>构建探索系统</strong>：建立一套既能探索各种可能性，又能找到适合自己的成长路径的探索系统。</li>
                        <li><strong>提升探索影响力</strong>：思考如何将你的探索经验和发现应用到更广阔的领域。</li>
                        <li><strong>与其他探索者合作</strong>：与其他探索者合作，互相学习和支持，提升探索效果。</li>
                        <li><strong>分享你的探索经验</strong>：将你的探索经验和方法分享给他人，帮助更多人提升探索能力。</li>
                        ` : 
                           lowerType.includes('实干') ? `
                        <li><strong>深化结构性创新</strong>：在保持系统稳定的同时，进一步深化你的结构性创新思维，创造更高效、可持续的产出系统。</li>
                        <li><strong>构建创新框架</strong>：建立一套既能保持稳定，又能导入创新的框架，让创新成为一种可管理的过程。</li>
                        <li><strong>提升创新影响力</strong>：思考如何将你的结构性创新应用到更广阔的领域，创造更大的价值。</li>
                        <li><strong>与其他创新者合作</strong>：与其他创新者合作，互相学习和启发，提升创新能力。</li>
                        <li><strong>分享你的创新经验</strong>：将你的创新经验和方法分享给他人，帮助更多人提升创新能力。</li>
                        ` : 
                           lowerType.includes('价值') ? `
                        <li><strong>深化价值系统</strong>：进一步深化你的价值系统，明确核心价值观，将价值观转化为更具体、可操作的行动指南。</li>
                        <li><strong>构建价值实现框架</strong>：建立一套将价值观转化为可持续职业价值的框架，实现长期的职业发展和自我实现。</li>
                        <li><strong>提升价值影响力</strong>：思考如何将你的价值观传递给更多人，创造更大的社会价值。</li>
                        <li><strong>与其他价值型INFP合作</strong>：与其他价值型INFP合作，互相学习和支持，共同实现价值目标。</li>
                        <li><strong>分享你的价值实现经验</strong>：将你的价值实现经验和方法分享给他人，帮助更多人实现价值目标。</li>
                        ` : 
                           lowerType.includes('智慧') ? `
                        <li><strong>深化生态思维</strong>：进一步深化你的生态思维，将系统的视角应用到更多领域，创造可持续的价值生态。</li>
                        <li><strong>构建生态系统</strong>：建立一套具有韧性与进化力的解决方案，创造持久且有生命力的价值。</li>
                        <li><strong>提升生态影响力</strong>：思考如何将你的生态思维传递给更多人，促进社会的可持续发展。</li>
                        <li><strong>与其他智慧型INFP合作</strong>：与其他智慧型INFP合作，共同设计和培育价值生态系统。</li>
                        <li><strong>分享你的智慧经验</strong>：将你的智慧经验和方法分享给他人，帮助更多人提升系统思维能力。</li>
                        ` : 
                           lowerType.includes('融思') ? `
                        <li><strong>深化多元思想整合</strong>：进一步深化你的多元思想整合能力，将不同领域的思想、情感和经验融合为一个有机的整体。</li>
                        <li><strong>构建智慧体系</strong>：建立一套独特的智慧体系，将多元思想整合为有价值的知识产品。</li>
                        <li><strong>提升智慧影响力</strong>：思考如何将你的智慧体系传递给更多人，创造更大的思想价值。</li>
                        <li><strong>与其他融思型INFP合作</strong>：与其他融思型INFP合作，共同整合多元思想，创造更丰富的智慧产品。</li>
                        <li><strong>分享你的融思经验</strong>：将你的融思经验和方法分享给他人，帮助更多人提升多元思想整合能力。</li>
                        ` : 
                           lowerType.includes('联结') ? `
                        <li><strong>深化连接能力</strong>：进一步深化你的连接能力，建立更多有意义的连接，创造协同增效的价值。</li>
                        <li><strong>构建连接网络</strong>：建立一套连接网络，将不同的人和资源连接起来，创造更大的价值。</li>
                        <li><strong>提升连接影响力</strong>：思考如何将你的连接网络扩大，影响更多人，创造更大的社会价值。</li>
                        <li><strong>与其他联结型INFP合作</strong>：与其他联结型INFP合作，共同构建更大的连接网络。</li>
                        <li><strong>分享你的连接经验</strong>：将你的连接经验和方法分享给他人，帮助更多人提升连接能力。</li>
                        ` : 
                           lowerType.includes('传播') ? `
                        <li><strong>深化价值传播</strong>：进一步深化你的价值传播能力，将价值观转化为更有影响力的传播内容。</li>
                        <li><strong>构建传播框架</strong>：建立一套传播框架，将价值观转化为有影响力的传播，影响和改变他人的思想和行为。</li>
                        <li><strong>提升传播影响力</strong>：思考如何将你的传播扩大，影响更多人，创造更大的社会价值。</li>
                        <li><strong>与其他传播型INFP合作</strong>：与其他传播型INFP合作，共同传播价值观，创造更大的影响力。</li>
                        <li><strong>分享你的传播经验</strong>：将你的传播经验和方法分享给他人，帮助更多人提升传播能力。</li>
                        ` : 
                           lowerType.includes('思想') ? `
                        <li><strong>深化深度思考</strong>：进一步深化你的深度思考能力，形成更系统、更深刻的思想体系。</li>
                        <li><strong>构建思想框架</strong>：建立一套思想框架，将你的思想系统化，便于传播和应用。</li>
                        <li><strong>提升思想影响力</strong>：思考如何将你的思想传递给更多人，影响和启发更多人。</li>
                        <li><strong>与其他思想型INFP合作</strong>：与其他思想型INFP合作，共同深化思想，创造更丰富的思想产品。</li>
                        <li><strong>分享你的思想经验</strong>：将你的思想经验和方法分享给他人，帮助更多人提升深度思考能力。</li>
                        ` : 
                           lowerType.includes('疗愈') ? `
                        <li><strong>深化深度共情</strong>：进一步深化你的深度共情能力，更好地理解他人的痛苦和需求。</li>
                        <li><strong>构建疗愈框架</strong>：建立一套疗愈框架，用温暖、有效的方式帮助他人疗愈和成长。</li>
                        <li><strong>提升疗愈影响力</strong>：思考如何将你的疗愈能力应用到更广阔的领域，帮助更多人。</li>
                        <li><strong>与其他疗愈型INFP合作</strong>：与其他疗愈型INFP合作，共同帮助更多人疗愈和成长。</li>
                        <li><strong>分享你的疗愈经验</strong>：将你的疗愈经验和方法分享给他人，帮助更多人提升疗愈能力。</li>
                        ` : 
                           lowerType.includes('启迪') ? `
                        <li><strong>深化深度洞察</strong>：进一步深化你的深度洞察能力，更好地洞察事物的本质和规律。</li>
                        <li><strong>构建启迪框架</strong>：建立一套启迪框架，用深刻、有启发性的方式帮助他人认识自己和世界。</li>
                        <li><strong>提升启迪影响力</strong>：思考如何将你的启迪能力应用到更广阔的领域，启迪更多人。</li>
                        <li><strong>与其他启迪型INFP合作</strong>：与其他启迪型INFP合作，共同启迪更多人，创造更大的智慧价值。</li>
                        <li><strong>分享你的启迪经验</strong>：将你的启迪经验和方法分享给他人，帮助更多人提升洞察能力。</li>
                        ` : 
                           lowerType.includes('滋养') ? `
                        <li><strong>深化滋养能力</strong>：进一步深化你的滋养能力，用温暖、支持的方式滋养更多人的成长和发展。</li>
                        <li><strong>构建滋养框架</strong>：建立一套滋养框架，创造安全、包容的环境，滋养他人的成长和发展。</li>
                        <li><strong>提升滋养影响力</strong>：思考如何将你的滋养能力应用到更广阔的领域，滋养更多人。</li>
                        <li><strong>与其他滋养型INFP合作</strong>：与其他滋养型INFP合作，共同创造更多安全、包容的环境。</li>
                        <li><strong>分享你的滋养经验</strong>：将你的滋养经验和方法分享给他人，帮助更多人提升滋养能力。</li>
                        ` : 
                           (lowerType.includes('通明') || lowerType.includes('透明')) ? `
                        <li><strong>深化自我接纳</strong>：进一步深化你的自我接纳，完全接纳自己的所有面向，展现出更真实、透明的自我。</li>
                        <li><strong>构建透明框架</strong>：建立一套透明框架，用真实、透明的方式与他人相处，建立更信任的关系。</li>
                        <li><strong>提升透明影响力</strong>：思考如何将你的透明特质传递给更多人，创造更信任的社会环境。</li>
                        <li><strong>与其他通明型INFP合作</strong>：与其他通明型INFP合作，共同创造更信任的环境。</li>
                        <li><strong>分享你的透明经验</strong>：将你的透明经验和方法分享给他人，帮助更多人提升自我接纳和真实展现的能力。</li>
                        ` : `
                        <li><strong>建立更大的社会连接</strong>：将你的优势和经验分享给他人，帮助更多人实现成长。</li>
                        <li><strong>探索更大的社会价值</strong>：思考如何将你的个人成长与社会价值结合，实现更高层次的自我实现。</li>
                        <li><strong>培养系统性思维</strong>：学会从系统的角度思考问题，提升你的领导力和影响力。</li>
                        <li><strong>持续深化自我探索</strong>：即使在高阶阶段，自我探索仍然是重要的，它能帮助你不断突破自我，实现更高层次的成长。</li>
                        <li><strong>建立可持续的成长模式</strong>：保持良好的生活习惯和工作节奏，确保你的成长是可持续的。</li>
                        `) : 
                          lowerType.includes('目标') ? `
                        <li><strong>优化目标管理系统</strong>：完善目标分解、执行和评估机制，提升目标实现效率。</li>
                        <li><strong>强化理想与现实连接</strong>：将宏大愿景与具体行动更紧密地结合，确保每一步都服务于核心目标。</li>
                        <li><strong>提升战略规划能力</strong>：学会从长期视角思考问题，制定更具前瞻性的计划。</li>
                        <li><strong>培养情绪弹性</strong>：提升在压力下保持冷静和专注的能力，更好地应对目标实现过程中的挑战。</li>
                        <li><strong>建立成长问责机制</strong>：找到 accountability partner或使用工具，确保目标执行的持续性。</li>
                        ` : 
                          lowerType.includes('系统') ? `
                        <li><strong>优化个人操作系统</strong>：定期审视和升级你的个人系统，提升模块间的协同效率和系统的适应性。</li>
                        <li><strong>深化模块化思维</strong>：将更多生活和工作领域纳入模块化管理，提升处理复杂问题的能力。</li>
                        <li><strong>提升系统自动化程度</strong>：将常规任务自动化，减少认知负荷，让系统能够更高效地运行。</li>
                        <li><strong>培养系统整合能力</strong>：学会将新的知识和经验整合到现有系统中，保持系统的开放性和成长性。</li>
                        <li><strong>建立系统反馈机制</strong>：设置定期评估点，收集系统运行的反馈信息，不断优化系统性能。</li>
                        ` : 
                          lowerType.includes('连接') ? `
                        <li><strong>深化自我观察练习</strong>：每天花时间观察自己的情绪和思维模式，记录下你的观察和发现，增强自我觉察能力。</li>
                        <li><strong>完善内在沟通机制</strong>：学习与自己的不同内在部分对话，理解它们的需求和模式，建立更有效的内在沟通。</li>
                        <li><strong>提升逻辑整理能力</strong>：学习使用思维导图、日记等工具来整理你的思绪和感受，将感性素材转化为结构化的认知。</li>
                        <li><strong>建立内外连接桥梁</strong>：将你的内在价值和兴趣与外在的职业和生活选择相结合，实现更有意义的内外连接。</li>
                        <li><strong>培养价值排序习惯</strong>：面对决策时，列出影响因素并赋予权重，进行相对理性的分析，同时参考内心的声音。</li>
                        ` : 
                          lowerType.includes('适应') ? `
                        <li><strong>深化情绪转化实践</strong>：每天花时间将情绪体验转化为创作，无论是写作、绘画还是其他形式，培养情绪表达的习惯。</li>
                        <li><strong>建立弹性创作框架</strong>：为自己建立一个松散的创作仪式或时间框架，允许即兴发挥的同时保持一定的结构。</li>
                        <li><strong>探索多元化表达</strong>：尝试不同的表达形式，寻找最适合自己的创作方式，不要局限于单一形式。</li>
                        <li><strong>接纳创作周期</strong>：允许自己有高产期和沉默期，不要用僵化的标准逼迫自己，学会与内在创作节律共舞。</li>
                        <li><strong>建立积极自我认知</strong>：将善变和敏感视为独特的资源，建立更加积极的自我认知，不再批判自己的本性。</li>
                        ` : 
                          lowerType.includes('沟通') ? `
                        <li><strong>深化沟通技巧</strong>：学习更多沟通方法，提升表达的清晰度和说服力。</li>
                        <li><strong>构建沟通框架</strong>：建立一套既能表达真实想法，又能让他人理解的沟通框架。</li>
                        <li><strong>提升倾听能力</strong>：学会真正倾听他人，理解他人的需求和观点。</li>
                        <li><strong>培养同理心</strong>：站在他人角度思考问题，增强沟通的连接性。</li>
                        <li><strong>建立反馈机制</strong>：定期寻求他人对沟通方式的反馈，持续改进。</li>
                        ` : 
                          lowerType.includes('多元') ? `
                        <li><strong>整合内在多样性</strong>：将内在的多种声音视为不同的认知资产，学会管理它们。</li>
                        <li><strong>构建认知框架</strong>：建立一套属于自己的、富有弹性的认知与理解框架。</li>
                        <li><strong>提升跨领域连接</strong>：学习将不同领域的知识、感性直觉与理性分析进行连接。</li>
                        <li><strong>培养系统思维</strong>：学会从系统的角度思考问题，理解复杂情境。</li>
                        <li><strong>探索内在专家团</strong>：学习管理内在的"专家团"，让不同声音在合适时机表达。</li>
                        ` : 
                          lowerType.includes('冲动') ? `
                        <li><strong>建立能量管理系统</strong>：学会识别自己的能量高峰期和低谷期，合理安排任务。</li>
                        <li><strong>培养延迟满足能力</strong>：尝试在行动前先思考后果，避免冲动决策。</li>
                        <li><strong>设定清晰边界</strong>：学会拒绝不合理的请求，保护自己的能量。</li>
                        <li><strong>培养规划习惯</strong>：每天花时间规划任务，建立清晰的行动步骤。</li>
                        <li><strong>练习情绪觉察</strong>：当情绪激动时，先暂停一下，观察自己的情绪状态。</li>
                        ` : 
                          lowerType.includes('枯竭') ? `
                        <li><strong>学习能量分配</strong>：为不同的任务和关系分配合理的精力。</li>
                        <li><strong>建立休息机制</strong>：定期安排休息时间，避免过度劳累。</li>
                        <li><strong>设定优先级</strong>：学会区分重要和紧急的任务，优先处理重要事项。</li>
                        <li><strong>培养自我关怀</strong>：定期进行自我关怀活动，满足自己的需求。</li>
                        <li><strong>学会说不</strong>：拒绝不合理的请求，保护自己的能量。</li>
                        ` : 
                          lowerType.includes('矛盾') ? `
                        <li><strong>练习接纳内在冲突</strong>：不再试图消除冲突，而是学会与冲突共处。</li>
                        <li><strong>建立决策框架</strong>：制定清晰的决策步骤，帮助自己做出选择。</li>
                        <li><strong>培养自我同情</strong>：对自己更加宽容，减少自我批判。</li>
                        <li><strong>整合不同自我</strong>：尝试理解自己的不同面向，寻找它们之间的联系。</li>
                        <li><strong>寻求外部反馈</strong>：向信任的人寻求反馈，获得不同的视角。</li>
                        ` : 
                          lowerType.includes('激情') ? `
                        <li><strong>培养专注能力</strong>：练习集中精力在一件事情上深入发展。</li>
                        <li><strong>设定长期目标</strong>：将热情转化为长期的目标和计划。</li>
                        <li><strong>学习优先级管理</strong>：将精力集中在最有价值的事情上。</li>
                        <li><strong>培养坚持精神</strong>：在遇到困难时学会坚持，不轻易放弃。</li>
                        <li><strong>增强同理心</strong>：尝试理解他人的立场和需求。</li>
                        ` : 
                          lowerType.includes('自我') ? `
                        <li><strong>尝试主动连接</strong>：主动与他人建立联系，分享自己的想法和感受。</li>
                        <li><strong>培养倾听能力</strong>：学会认真倾听他人的意见和需求。</li>
                        <li><strong>加入兴趣小组</strong>：通过共同兴趣结交志同道合的朋友。</li>
                        <li><strong>练习表达情感</strong>：尝试表达自己的情感，增强情感连接。</li>
                        <li><strong>接受他人帮助</strong>：学会接受他人的帮助和支持。</li>
                        ` : 
                          lowerType.includes('焦虑') ? `
                        <li><strong>学习放松技巧</strong>：掌握深呼吸、冥想等放松技巧，帮助缓解焦虑情绪。</li>
                        <li><strong>理性评估风险</strong>：学会客观分析情况，避免过度担忧和灾难化思维。</li>
                        <li><strong>建立内在安全感</strong>：通过肯定自己的优势和成就，建立内在的安全感。</li>
                        <li><strong>设定合理目标</strong>：避免设定过高的目标，将大目标分解为小目标，逐步实现。</li>
                        <li><strong>培养正念意识</strong>：学习活在当下，减少对过去的纠结和对未来的担忧。</li>
                        ` : 
                          lowerType.includes('碎片') ? `
                        <li><strong>减少过度分析</strong>：设定思考时间限制，避免陷入无限循环的分析中。</li>
                        <li><strong>培养行动优先习惯</strong>：先行动再完善，逐步积累经验，而非等待完美答案。</li>
                        <li><strong>学习直接表达情感</strong>：尝试直接表达真实感受，减少对情感的过度思考。</li>
                        <li><strong>建立决策框架</strong>：设定明确的决策标准和期限，避免无限权衡。</li>
                        <li><strong>练习活在当下</strong>：通过正念练习，减少对过去和未来的过度思虑。</li>
                        ` : 
                          lowerType.includes('敏感') ? `
                        <li><strong>建立清晰的个人边界</strong>：学会合理拒绝，保护自己的能量，避免过度共情。</li>
                        <li><strong>培养情绪自主性</strong>：学习识别和管理自己的情绪，减少外界影响。</li>
                        <li><strong>深化内在自我探索</strong>：通过写日记、冥想等方式，明确自己的需求和价值观。</li>
                        <li><strong>聚焦兴趣深耕</strong>：选择一个真正感兴趣的领域，深入学习和实践，培养坚持精神。</li>
                        <li><strong>建立内在价值体系</strong>：不再依赖外部评价，建立基于自身价值观的自我认知。</li>
                        ` : 
                          lowerType.includes('耗竭') ? `
                        <li><strong>学习能量管理</strong>：为不同的任务和关系分配合理的精力，避免过度投入。</li>
                        <li><strong>建立情绪缓冲机制</strong>：在面对挫折和困难时，学会给自己留出调整和恢复的时间。</li>
                        <li><strong>关注过程而非结果</strong>：将注意力从单一的目标实现转移到过程体验和个人成长上。</li>
                        <li><strong>培养多元化的自我价值</strong>：不再将自我价值完全绑定在职业成就上，拓展生活的其他维度。</li>
                        <li><strong>学会合理休息</strong>：在工作和生活之间建立明确的边界，确保充足的休息和恢复时间。</li>
                        ` : 
                          lowerType.includes('管理') ? `
                        <li><strong>深化情感边界管理</strong>：继续完善情感边界，平衡付出与收获，确保可持续地关怀他人。</li>
                        <li><strong>提升情感引导能力</strong>：学习更多情感支持技巧，成为更有效的情感引导者。</li>
                        <li><strong>建立自我关照仪式</strong>：制定定期的自我关照计划，为情感能量充电。</li>
                        <li><strong>培养情感觉察习惯</strong>：学习观察和识别自己的情感模式，更好地管理情绪。</li>
                        <li><strong>扩展情感支持范围</strong>：将你的情感管理能力扩展到更广泛的关系中，帮助更多人。</li>
                        ` : 
                          lowerType.includes('共情') ? `
                        <li><strong>深化情感独立</strong>：继续培养情感独立能力，减少对他人情感支持的依赖。</li>
                        <li><strong>提升情感表达能力</strong>：学习更清晰、更有效的情感表达方法。</li>
                        <li><strong>建立情感边界</strong>：在深度共情的同时，学会保护自己的情感能量。</li>
                        <li><strong>培养情感导航能力</strong>：学习引导自己和他人的情感流动，成为更有效的情感导航者。</li>
                        <li><strong>将情感转化为资源</strong>：学会将情感体验转化为帮助他人的资源和智慧。</li>
                        ` : 
                          lowerType.includes('融合') ? `
                        <li><strong>深化理想与现实连接</strong>：继续为理想搭建现实的通路，将宏大愿景分解为具体步骤。</li>
                        <li><strong>提升行动执行力</strong>：学习更有效的行动方法，确保每个步骤都能落地。</li>
                        <li><strong>培养成果导向思维</strong>：关注行动的成果和反馈，不断调整和优化你的计划。</li>
                        <li><strong>建立行动反馈机制</strong>：定期评估行动效果，根据反馈调整策略。</li>
                        <li><strong>保持情感热情</strong>：在务实行动的同时，保持对理想的情感热情，让热情驱动持续行动。</li>
                        ` : 
                          lowerType.includes('平衡') ? `
                        <li><strong>深化双重视角整合</strong>：继续练习将感性体验与理性观察整合为更丰富的认知。</li>
                        <li><strong>提升内在觉察能力</strong>：学习观察和识别内在的矛盾和冲突，更好地调和它们。</li>
                        <li><strong>培养认知灵活性</strong>：学会在不同情境下灵活运用感性或理性的认知方式。</li>
                        <li><strong>建立内在整合框架</strong>：构建一套属于自己的内在整合方法，帮助你处理内在的复杂性。</li>
                        <li><strong>将整合能力应用到外部</strong>：将你的内在整合能力扩展到外部世界，帮助他人理解和整合复杂问题。</li>
                        ` : `
                        <li><strong>建立明确的边界</strong>：学会拒绝他人不合理的请求，优先照顾自己的需求。</li>
                        <li><strong>提升情绪管理能力</strong>：学习正念冥想、深呼吸等技巧，帮助自己在情绪激动时保持冷静。</li>
                        <li><strong>培养自我价值感</strong>：关注自己的优点和成就，减少对他人评价的依赖。</li>
                        <li><strong>探索内在自我</strong>：通过写日记、冥想等方式，深入了解自己的价值观和需求。</li>
                        <li><strong>设定明确的目标</strong>：将大目标分解为小目标，逐步实现，提升成就感和自信心。</li>
                        `}
                    </ul>
                    
                    <h4 class="report-subtitle">长期发展</h4>
                    <p class="report-paragraph">
                        ${highestStage === '高阶' ? 
                          (lowerType.includes('行动') ? '当你作为行动型INFP，不仅持续达成个人目标，更能将你的经验、方法与信念，构建成清晰、可靠且可传承的体系或平台时，你便实现了从“个人实现者”到“系统奠基者”的进化。这意味着，你的理想与执行力将超越个人范畴，通过为他人提供切实的路径、工具与启发，让你的价值在更广阔的成长中被延续、放大与深化。' : 
                           lowerType.includes('跨界') ? '随着系统性经验的积累，你的核心价值将从“产出创新成果”升级为“提供创新范式”。这意味着，你不仅能自己创造连接，更能将你的思维与工作方法提炼、传递，赋能他人进行跨界思考，从而催生一个更富创造力的生态。' : 
                           lowerType.includes('创造') ? '当你作为创造型INFP，不仅持续产出高质量的作品，更能将你的创作理念和方法系统化，影响和启发更多人时，你便实现了从“创作者”到“创意引领者”的进化。这意味着，你的创造力将超越个人范畴，通过为他人提供创作灵感和方法，让你的价值在更广阔的领域中被传播和放大。' : 
                           lowerType.includes('表达') ? '当你作为表达型INFP，不仅能够清晰地表达自己的想法和情感，更能将你的表达技巧和经验系统化，帮助更多人提升表达能力时，你便实现了从“表达者”到“表达导师”的进化。这意味着，你的表达能力将超越个人范畴，通过为他人提供表达指导和支持，让你的价值在更广阔的人群中被认可和传播。' : 
                           lowerType.includes('整合') ? '当你作为整合型INFP，不仅能够整合自己的内在资源，更能将你的整合能力和经验系统化，帮助更多人实现内在整合时，你便实现了从“整合者”到“整合导师”的进化。这意味着，你的整合能力将超越个人范畴，通过为他人提供整合指导和支持，让你的价值在更广阔的领域中被认可和传播。' : 
                           lowerType.includes('实践') ? '当你作为实践型INFP，不仅能够将想法转化为行动，更能将你的实践经验和方法系统化，帮助更多人提升实践能力时，你便实现了从“实践者”到“实践导师”的进化。这意味着，你的实践能力将超越个人范畴，通过为他人提供实践指导和支持，让你的价值在更广阔的领域中被认可和传播。' : 
                           lowerType.includes('实验') ? '当你作为实验型INFP，不仅能够进行各种实验和探索，更能将你的实验精神和方法系统化，帮助更多人提升实验能力时，你便实现了从“实验者”到“实验导师”的进化。这意味着，你的实验精神将超越个人范畴，通过为他人提供实验指导和支持，让你的价值在更广阔的领域中被认可和传播。' : 
                           lowerType.includes('探索') ? '当你作为探索型INFP，不仅能够探索各种可能性，更能将你的探索经验和方法系统化，帮助更多人提升探索能力时，你便实现了从“探索者”到“探索导师”的进化。这意味着，你的探索能力将超越个人范畴，通过为他人提供探索指导和支持，让你的价值在更广阔的领域中被认可和传播。' : 
                           lowerType.includes('实干') ? '当你作为实干型INFP，不仅能够实现结构性创新，更能将你的创新系统和方法提炼成可复制的模式，赋能他人进行有效创新时，你便实现了从“实干创新者”到“创新系统设计师”的进化。这意味着，你的创新能力将超越个人范畴，通过为他人提供创新框架和方法，让你的价值在更广阔的领域中被放大和延续。' : 
                           lowerType.includes('价值') ? '当你作为价值型INFP，不仅能够实现个人价值，更能将你的价值系统和实现方法系统化，帮助更多人找到并实现自己的价值时，你便实现了从“价值实现者”到“价值引领者”的进化。这意味着，你的价值影响力将超越个人范畴，通过为他人提供价值导航和支持，让你的价值在更广阔的人群中被传播和放大。' : 
                           lowerType.includes('智慧') ? '当你作为智慧型INFP，不仅能够设计价值生态系统，更能将你的生态设计理念和方法系统化，帮助更多人构建和培育可持续的价值生态时，你便实现了从“智慧设计者”到“生态系统导师”的进化。这意味着，你的智慧将超越个人范畴，通过为他人提供生态设计指导和支持，让你的价值在更广阔的系统中被延续和深化。' : 
                           lowerType.includes('融思') ? '当你作为融思型INFP，不仅能够整合多元思想，更能将你的融思方法和智慧体系系统化，帮助更多人实现思想整合和智慧成长时，你便实现了从“思想整合者”到“智慧导师”的进化。这意味着，你的智慧影响力将超越个人范畴，通过为他人提供思想整合指导和智慧输出，让你的价值在更广阔的思想领域中被传播和启发。' : 
                           lowerType.includes('联结') ? '当你作为联结型INFP，不仅能够建立有意义的连接，更能将你的连接方法和网络构建经验系统化，帮助更多人建立和维护有价值的连接网络时，你便实现了从“连接建立者”到“连接生态构建者”的进化。这意味着，你的连接价值将超越个人范畴，通过为他人提供连接指导和网络构建支持，让你的价值在更广阔的连接网络中被放大和延续。' : 
                           lowerType.includes('传播') ? '当你作为传播型INFP，不仅能够有效传播价值，更能将你的传播策略和方法系统化，帮助更多人实现有效的价值传播时，你便实现了从“价值传播者”到“传播战略导师”的进化。这意味着，你的传播影响力将超越个人范畴，通过为他人提供传播指导和策略支持，让你的价值在更广阔的传播领域中被放大和延续。' : 
                           lowerType.includes('思想') ? '当你作为思想型INFP，不仅能够产出深刻的思想，更能将你的思想体系和思考方法系统化，帮助更多人提升深度思考能力和思想表达能力时，你便实现了从“思想生产者”到“思想导师”的进化。这意味着，你的思想影响力将超越个人范畴，通过为他人提供思考指导和思想输出，让你的价值在更广阔的思想领域中被传播和启发。' : 
                           lowerType.includes('疗愈') ? '当你作为疗愈型INFP，不仅能够帮助他人疗愈和成长，更能将你的疗愈方法和经验系统化，帮助更多人提升疗愈能力和支持他人成长时，你便实现了从“疗愈者”到“疗愈导师”的进化。这意味着，你的疗愈影响力将超越个人范畴，通过为他人提供疗愈指导和支持，让你的价值在更广阔的人群中被传播和放大。' : 
                           lowerType.includes('启迪') ? '当你作为启迪型INFP，不仅能够启迪他人，更能将你的启迪方法和洞察经验系统化，帮助更多人提升洞察能力和启迪他人的能力时，你便实现了从“启迪者”到“智慧启迪导师”的进化。这意味着，你的启迪影响力将超越个人范畴，通过为他人提供启迪指导和支持，让你的价值在更广阔的人群中被传播和启发。' : 
                           lowerType.includes('滋养') ? '当你作为滋养型INFP，不仅能够滋养他人的成长和发展，更能将你的滋养方法和经验系统化，帮助更多人提升滋养能力和创造支持性环境时，你便实现了从“滋养者”到“滋养导师”的进化。这意味着，你的滋养影响力将超越个人范畴，通过为他人提供滋养指导和支持，让你的价值在更广阔的人群中被传播和放大。' : 
                           (lowerType.includes('通明') || lowerType.includes('透明')) ? '当你作为通明型INFP，不仅能够展现真实透明的自我，更能将你的自我接纳和真实展现方法系统化，帮助更多人实现自我接纳和真实展现时，你便实现了从“真实展现者”到“真实领导力导师”的进化。这意味着，你的真实影响力将超越个人范畴，通过为他人提供自我接纳指导和真实展现支持，让你的价值在更广阔的人群中被传播和放大。' : 
                           '当你深入了解自己，找到适合自己的成长路径时，你将自然地过渡到下一个阶段。届时，你将能够充分发挥自己的优势和潜力，实现自己的人生价值和目标。') : 
                          lowerType.includes('冲动') ? '当你学会有意识地管理能量、慎重做出承诺，便能进入下一阶段。你将不再只追逐瞬间的灵感，而是能将其转化为持续的表达；在接纳自己多变天性的同时，建立起稳定的内在节奏，吸引真正同频的人与机会。' : 
                          lowerType.includes('枯竭') ? '当你学会合理分配精力，建立可持续的行动节奏，而非依赖一次性的热情冲刺后，你将稳步进入下一阶段——成为更成熟的"整合型INFP"。届时，你将能够制定清晰而灵活的规划，让持久的、可再生的内在动力，而非短暂的情绪爆发，成为推动你持续向前的核心引擎。' : 
                          lowerType.includes('矛盾') ? '当您学会欣赏并驾驭内在的复杂性，将矛盾的张力视为创造力的源泉时，您将稳步迈向下一阶段。届时，您将能把独特的双重视角转化为优势，在更广阔的天地中进行创造性的探索与整合。' : 
                          lowerType.includes('激情') ? '当你学会聚焦你的热情，将分散的能量集中到最有价值的目标上时，你将进入下一阶段。届时，你将能够将热情转化为持久的动力，实现自己的理想和目标。' : 
                          lowerType.includes('自我') ? '当你学会在独立与连接之间找到平衡，打开内心的大门，允许他人进入你的世界时，你将进入下一阶段。届时，你将能够保持自我的同时，建立健康的人际关系，获得更多的支持和成长机会。' : 
                          lowerType.includes('焦虑') ? '当你学会接纳不确定性，建立内在安全感时，你将进入下一阶段。届时，你将能够理性评估风险，不再被焦虑情绪所控制，而是将其转化为行动的动力，实现更有意义的成长。' : 
                          lowerType.includes('碎片') ? '当你从"碎片型INFP"的消耗状态，稳步转向更有建设性的新阶段时，你强大的思维能力将不再是自我消耗的漩涡，而会转化为探索世界、构建理解的宝贵工具。你将学会在思考与行动之间找到平衡，让思维成为支持行动的力量。' : 
                          lowerType.includes('敏感') ? '当你建立了稳定的内在核心，从外部导向转向内部导向时，你将进入下一阶段。届时，你将能够不再被外界的情绪和评价所左右，而是建立基于自身价值观的稳定自我认知，培养情绪自主性和边界意识，实现真正的成长和发展。' : 
                          lowerType.includes('耗竭') ? '当你学会从"冲刺型"转向"长跑型"，建立可持续的能量管理系统时，你将进入下一阶段。届时，你将能够平衡热情与精力，不再将职业视为需要全力攻克的目标，而是将其视为长期发展的过程，关注身心健康和过程体验，实现可持续的成长和发展。' : 
                          lowerType.includes('稳健') ? '当你能够将稳健的生活节奏与持续的探索精神更紧密地结合时，你将进入下一阶段。届时，你将发展出一种"弹性成长"的能力，既能在稳定的核心基础上拓展边界，又能在探索中保持内在的平衡。' : 
                          lowerType.includes('目标') ? '当你能够将目标管理系统进一步优化，使其更具灵活性和适应性时，你将进入下一阶段。届时，你将发展出一种"战略型思维"，能够在复杂多变的环境中迅速调整目标和策略，同时保持对核心愿景的执着。你将从"目标执行者"进化为"愿景引领者"，不仅能实现个人目标，更能带领他人共同实现更大的愿景。' : 
                          lowerType.includes('系统') ? '当你将个人操作系统进一步优化，使其更加自动化和智能化时，你将进入下一阶段。届时，你将不再需要刻意管理系统，系统将成为你的第二本能，能够自动处理各种复杂情况。你将从"系统设计者"进化为"系统使用者"，将更多精力投入到创造性和战略性的思考中，实现更高层次的自我实现。' : 
                          lowerType.includes('连接') ? '当你能够将自我观察和内在沟通能力内化为自然习惯，实现更高层次的自我和谐时，你将进入下一阶段。届时，你将能够更有效地连接内在与外在世界，将你的洞察力和同理心转化为有意义的行动，成为连接不同领域和人群的桥梁。' : 
                          lowerType.includes('适应') ? '当你能够将情绪转化能力内化为自然习惯，找到最适合自己的表达方式时，你将进入下一阶段。届时，你将能够持续产出具有个人风格的作品，实现创造性成长，同时保持内在的弹性和自由。' : 
                          lowerType.includes('沟通') ? '当你能够将理想与现实完美结合，建立有效的沟通机制，帮助他人理解和接受你的想法时，你将进入下一阶段。届时，你将能够成为理想与现实之间的桥梁，实现更大的社会价值。' : 
                          lowerType.includes('多元') ? '当你能够完全整合内在的多样性，将其转化为理解复杂情境的独特优势时，你将进入下一阶段。届时，你将能够构建出更加完善的认知框架，成为一名真正的"多元整合者"，在更广阔的领域中创造价值。' : 
                          lowerType.includes('管理') ? '当你能够将情感管理能力系统化，并扩展到更广泛的关系中时，你将进入下一阶段。届时，你将成为一名真正的情感引导者，能够帮助更多人建立健康的情感关系，实现情感与秩序的和谐。' : 
                          lowerType.includes('共情') ? '当你能够将共情能力与情感独立完美结合，并将情感体验转化为帮助他人的智慧时，你将进入下一阶段。届时，你将成为一名真正的情感导航者，能够引导自己和他人在情感世界中自由航行。' : 
                          lowerType.includes('融合') ? '当你能够将理想与现实的融合能力系统化，并创造出有影响力的成果时，你将进入下一阶段。届时，你将成为一名真正的理想实践者，能够将情感与行动完美结合，实现自己的愿景。' : 
                          lowerType.includes('平衡') ? '当你能够完全整合内在的双重视角，并将这种整合能力应用到更广泛的领域时，你将进入下一阶段。届时，你将成为一名真正的整合者，能够调和复杂的矛盾，创造出更丰富、更有深度的认知和成果。' : 
                          '当你深入了解自己，找到适合自己的成长路径时，你将自然地过渡到下一个阶段。届时，你将能够充分发挥自己的优势和潜力，实现自己的人生价值和目标。'}
                    </p>
                    <p class="report-paragraph">
                        ${highestStage === '高阶' ? 
                          (lowerType.includes('行动') ? '记住，成长是一个永无止境的过程，即使在高阶阶段，你仍然可以继续成长和进步。保持开放的心态，不断学习和探索，你将能够实现更高层次的自我实现和社会价值。' : 
                           lowerType.includes('跨界') ? '记住，成长是一个永无止境的过程，即使在高阶阶段，你仍然可以继续成长和进步。保持开放的心态，不断学习和探索，你将能够实现更高层次的自我实现和社会价值。' : 
                           lowerType.includes('创造') ? '记住，成长是一个永无止境的过程，即使在高阶阶段，你仍然可以继续成长和进步。保持开放的心态，不断学习和探索，你将能够实现更高层次的自我实现和社会价值。' : 
                           lowerType.includes('表达') ? '记住，成长是一个永无止境的过程，即使在高阶阶段，你仍然可以继续成长和进步。保持开放的心态，不断学习和探索，你将能够实现更高层次的自我实现和社会价值。' : 
                           lowerType.includes('整合') ? '记住，成长是一个永无止境的过程，即使在高阶阶段，你仍然可以继续成长和进步。保持开放的心态，不断学习和探索，你将能够实现更高层次的自我实现和社会价值。' : 
                           lowerType.includes('实践') ? '记住，成长是一个永无止境的过程，即使在高阶阶段，你仍然可以继续成长和进步。保持开放的心态，不断学习和探索，你将能够实现更高层次的自我实现和社会价值。' : 
                           lowerType.includes('实验') ? '记住，成长是一个永无止境的过程，即使在高阶阶段，你仍然可以继续成长和进步。保持开放的心态，不断学习和探索，你将能够实现更高层次的自我实现和社会价值。' : 
                           lowerType.includes('探索') ? '记住，作为探索型INFP，你的成长是永无止境的。保持你的好奇心和探索精神，同时不断深化你的探索方法，你将能够获得更丰富的经验和知识，成为真正的探索导师。' : 
                           lowerType.includes('实干') ? '记住，作为实干型INFP，你的成长是永无止境的。保持你的结构性创新和实干精神，同时不断深化你的创新系统，你将能够赋能更多人进行有效创新，成为真正的创新系统设计师。' : 
                           lowerType.includes('价值') ? '记住，作为价值型INFP，你的成长是永无止境的。保持你的价值观清晰和价值实现能力，同时不断深化你的价值系统，你将能够帮助更多人实现自己的价值，成为真正的价值引领者。' : 
                           lowerType.includes('智慧') ? '记住，作为智慧型INFP，你的成长是永无止境的。保持你的生态思维和智慧设计能力，同时不断深化你的生态系统设计方法，你将能够帮助更多人构建可持续的价值生态，成为真正的生态系统导师。' : 
                           lowerType.includes('融思') ? '记住，作为融思型INFP，你的成长是永无止境的。保持你的多元思想整合能力和智慧体系，同时不断深化你的智慧输出系统，你将能够影响和启发更多人，成为真正的智慧导师。' : 
                           lowerType.includes('联结') ? '记住，作为联结型INFP，你的成长是永无止境的。保持你的有意义连接能力和连接网络，同时不断深化你的连接管理系统，你将能够创造更大的连接价值，成为真正的连接生态构建者。' : 
                           lowerType.includes('传播') ? '记住，作为传播型INFP，你的成长是永无止境的。保持你的价值传播能力和传播影响力，同时不断深化你的传播策略系统，你将能够推动更大范围的社会变化，成为真正的传播战略导师。' : 
                           lowerType.includes('思想') ? '记住，作为思想型INFP，你的成长是永无止境的。保持你的深度思考能力和思想体系，同时不断深化你的思想表达系统，你将能够影响和启发更多人，成为真正的思想导师。' : 
                           lowerType.includes('疗愈') ? '记住，作为疗愈型INFP，你的成长是永无止境的。保持你的深度共情能力和疗愈方法，同时不断深化你的疗愈支持系统，你将能够帮助更多人疗愈和成长，成为真正的疗愈导师。' : 
                           lowerType.includes('启迪') ? '记住，作为启迪型INFP，你的成长是永无止境的。保持你的深度洞察能力和启迪方法，同时不断深化你的启迪方法系统，你将能够启迪更多人认识自己和世界，成为真正的智慧启迪导师。' : 
                           lowerType.includes('滋养') ? '记住，作为滋养型INFP，你的成长是永无止境的。保持你的滋养能力和支持特质，同时不断深化你的滋养环境系统，你将能够滋养更多人的成长和发展，成为真正的滋养导师。' : 
                           (lowerType.includes('通明') || lowerType.includes('透明')) ? '记住，作为通明型INFP，你的成长是永无止境的。保持你的真实透明特质和自我接纳，同时不断深化你的真实展现系统，你将能够影响和启发更多人展现真实自我，成为真正的真实领导力导师。' : 
                           '记住，成长是一个永无止境的过程，即使在高阶阶段，你仍然可以继续成长和进步。保持开放的心态，不断学习和探索，你将能够实现更高层次的自我实现和社会价值。') : 
                          lowerType.includes('冲动') ? '记住，冲动是你独特的能量，学会管理它而不是压抑它。通过建立能量管理系统和培养规划习惯，你将能够将冲动转化为有意义的行动。' : 
                          lowerType.includes('枯竭') ? '记住，学会照顾自己并不是自私，而是可持续成长的基础。通过合理分配精力和建立休息机制，你将能够实现更持久的成长。' : 
                          lowerType.includes('矛盾') ? '记住，内在冲突是你独特的资源，学会与冲突共处而不是消除它。通过建立决策框架和培养自我同情，你将能够将冲突转化为创造的动力。' : 
                          lowerType.includes('激情') ? '记住，热情是你宝贵的财富，学会聚焦它而不是分散它。通过设定长期目标和培养专注能力，你将能够将热情转化为持久的成就。' : 
                          lowerType.includes('自我') ? '记住，独立是你的优势，但连接也是成长的重要部分。通过尝试主动连接和培养倾听能力，你将能够在保持自我的同时建立健康的关系。' : 
                          lowerType.includes('焦虑') ? '记住，焦虑是你对自己的高标准体现，学会接纳不确定性而不是消除它。通过学习放松技巧和建立内在安全感，你将能够将焦虑转化为行动的动力。' : 
                          lowerType.includes('稳健') ? '记住，稳健的成长才是可持续的。在保持内在平衡的同时，稳步拓展你的边界，每一步的扎实前进都会为你的未来奠定坚实的基础。' : 
                          lowerType.includes('系统') ? '记住，系统是成长的基础，但不要被系统限制。保持系统思维的同时，也要保持对新可能性的开放心态，灵活调整系统，你将实现更高层次的自我整合。' : 
                          lowerType.includes('连接') ? '记住，连接是成长的桥梁，但不要被连接所累。保持自我观察的同时，也要保持对内在需求的关注，平衡内外连接，你将实现更高层次的自我和谐。' : 
                          lowerType.includes('目标') ? '记住，目标是成长的指南针，但不要被目标束缚。保持战略定力的同时，也要保持对新可能性的开放心态，灵活调整策略，你将实现更大的愿景。' : 
                          lowerType.includes('沟通') ? '记住，成长是一个持续的过程，沟通能力的提升需要不断的实践和反思。保持开放的心态，不断学习和探索，你将能够成为一名更加优秀的沟通者和理想实践者。' : 
                          lowerType.includes('多元') ? '记住，多样性是你的优势，学会欣赏和驾驭内在的复杂性，你将能够在未来的成长中创造出更加丰富和有价值的成果。保持好奇和开放的心态，持续探索和整合，你将实现更高层次的自我成长。' : 
                          lowerType.includes('适应') ? '记住，情绪转化是一个持续的过程，不要急于求成。保持弹性创作框架的同时，也要接纳自己的创作周期，与内在创作节律共舞，你将实现更加自由的创造性表达。' : 
                          '记住，成长是一个缓慢的过程，不要急于求成。每一步的小进步都是值得庆祝的，坚持下去，你会逐渐成长为更加成熟和稳定的自己。'}
                    </p>
                </div>
            `;
        }
        
        // 获取得分阶段
        function getScoreStage(score) {
            if (score <= 16) {
                return '低阶';
            } else if (score <= 23) {
                return '中阶';
            } else {
                return '高阶';
            }
        }
        
        // 获取星座元素
        function getConstellationElement(constellation) {
            const elementMap = {
                '白羊座': '火',
                '金牛座': '土',
                '双子座': '风',
                '巨蟹座': '水',
                '狮子座': '火',
                '处女座': '土',
                '天秤座': '风',
                '天蝎座': '水',
                '射手座': '火',
                '摩羯座': '土',
                '水瓶座': '风',
                '双鱼座': '水'
            };
            return elementMap[constellation] || '风';
        }
        
        // 获取星座特质
        function getConstellationTraits(constellation) {
            const traitsMap = {
                '白羊座': '热情、冲动、自信，具有强烈的行动力和领导力',
                '金牛座': '务实、稳定、耐心，重视物质享受和安全感',
                '双子座': '灵活、好奇、善于沟通，具有双重性格和多变的思维',
                '巨蟹座': '敏感、情绪化、顾家，重视家庭和情感连接',
                '狮子座': '自信、慷慨、热情，具有领导才能和表演天赋',
                '处女座': '细心、完美主义、有条理，重视细节和秩序',
                '天秤座': '优雅、和谐、公正，重视平衡和人际关系',
                '天蝎座': '神秘、深沉、敏锐，具有强烈的洞察力和情感强度',
                '射手座': '乐观、自由、冒险，重视探索和成长',
                '摩羯座': '务实、野心、责任感，重视事业和成就',
                '水瓶座': '独立、创新、理性，具有独特的思维和价值观',
                '双鱼座': '敏感、梦幻、富有同情心，具有艺术天赋和想象力'
            };
            return traitsMap[constellation] || '具有独特的性格和特质';
        }
        
        // 获取血型特质
        function getBloodTypeTraits(bloodType) {
            const traitsMap = {
                'A': '细心、谨慎、责任感强，重视秩序和规则',
                'B': '自由、乐观、创造力强，重视个人表达和独立性',
                'O': '自信、热情、领导力强，重视实际和效率',
                'AB': '理性、平衡、适应力强，具有双重性格和独特的思维方式'
            };
            return traitsMap[bloodType] || '具有独特的性格和特质';
        }

        // 导出PDF
        function exportPDF() {
            // 显示导出提示
            const originalText = document.querySelector('#export-pdf-btn').textContent;
            const exportBtn = document.querySelector('#export-pdf-btn');
            exportBtn.textContent = '导出中...';
            exportBtn.disabled = true;
            
            // 使用utils中的新函数
            setTimeout(() => {
                utils.generatePDF('result-page');
                // 恢复按钮状态
                exportBtn.textContent = originalText;
                exportBtn.disabled = false;
                alert('PDF报告导出成功！');
            }, 100);
        }
    </script>
</body>
</html>